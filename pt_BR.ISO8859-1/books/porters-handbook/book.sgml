<!--
     The FreeBSD Documentation Project

     $FreeBSD: doc/en_US.ISO8859-1/books/porters-handbook/book.sgml,v 1.349 2004/01/09 21:11:48 ceri Exp $
-->

<!DOCTYPE BOOK PUBLIC "-//FreeBSD//DTD DocBook V4.1-Based Extension//EN" [
<!ENTITY % man PUBLIC "-//FreeBSD//ENTITIES DocBook Manual Page Entities//EN">
%man;

<!ENTITY % bookinfo PUBLIC "-//FreeBSD//ENTITIES DocBook BookInfo Entities//EN">
%bookinfo;

<!ENTITY % authors PUBLIC "-//FreeBSD//ENTITIES DocBook Author Entities//EN"> %authors;
<!ENTITY % teams PUBLIC "-//FreeBSD//ENTITIES DocBook Team Entities//EN">
%teams;
<!ENTITY % mailing-lists PUBLIC "-//FreeBSD//ENTITIES DocBook Mailing List Entities//PTBR">
%mailing-lists;

]>

<book>
  <bookinfo>
    <title>Manual do Porter do FreeBSD</title>

    <authorgroup>
      <corpauthor>O Projeto de Documenta&ccedil;&atilde;o do FreeBSD</corpauthor>
    </authorgroup>

    <pubdate>Abril de 2000</pubdate>

    <copyright>
      <year>2000</year>
      <year>2001</year>
      <year>2002</year>
      <year>2003</year>
      <year>2004</year>
      <holder role="mailto:doc@FreeBSD.org">O Projeto de Documenta&ccedil;&atilde;o do
	FreeBSD</holder>
    </copyright>

    &bookinfo.trademarks;

    &bookinfo.legalnotice;
  </bookinfo>


    <chapter id="own-port">
      <title>Fazendo um port si mesmo</title>

      <para>Assim, agora voc&ecirc; est&aacute; interessado em fazer seu pr&oacute;prio port ou
        melhorando existente? Otimo!</para>

      <para>O que segue s&atilde;o alguns guias para criar um novo port para
        o FreeBSD.  Se voc&ecirc; quiser melhorar um port existente, voc&ecirc; deve
	ler isto e ent&atilde;o ler <xref linkend="port-upgrading">.</para>

      <para>Quando este documento n&atilde;o for suficientemente detalhado, voc&ecirc; deve
        consultar o <filename>/usr/ports/Mk/bsd.port.mk</filename>, qual
	todo port inclui Makefiles.  Mesmo se voc&ecirc; n&atilde;o hackeie Makefiles
	diariamente, ele &eacute; bem comentado, e voc&ecirc; ainda ganhar&aacute; muito
	conhecimento dele.  Adicionalmente, voc&ecirc; pode enviar perguntas espec&iacute;ficas
	para the &a.ports;.</para>

      <note>
        <para>Somente uma fra&ccedil;&atilde;o das vari&aacute;veis
          (<makevar><replaceable>VAR</replaceable></makevar>) que pode ser
          overridden s&atilde;o mencionados neste documento.  A maioria (se n&atilde;o todas)
	  est&atilde;o documentadas no inicio do <filename>bsd.port.mk</filename>.
	  Este arquivo usa um n&atilde;o-padr&atilde;o conjunto de tab.
	  <application>Emacs</application> e
	  <application>Vim</application> deve reconhecer as defini&ccedil;&otilde;es
	  carregando o arquivo.  Ambos &man.vi.1; e
	  &man.ex.1; podem ser definidos para usar o valor correto
	  digitando <command>:set tabstop=4</command> uma vez arquivos tenham sido
	  carregados.</para>
      </note>
    </chapter>

    <chapter id="quick-porting">
      <title>Portando R&aacute;pido</title>

      <para>Esta se&ccedil;&atilde;o lhe diz como fazer um r&aacute;pido port.  Em muitos casos, isto
        n&atilde;o &eacute; suficiente, mas n&oacute;s veremos.</para>

      <para>Primeiro, obter o tarball original e coloca-lo dentro
        <makevar>DISTDIR</makevar>, qual defaults to
        <filename>/usr/ports/distfiles</filename>.</para>

      <note>
        <para>O seguinte sup&otilde;e que o software compilado out-of-the-box,
          ex., n&atilde;o havia absolutamente nenhuma mudan&ccedil;a necess&aacute;ria para o port funcionar 
          em seu FreeBSD box.  Se voc&ecirc; necessitar mudar algo, voc&ecirc; ter&aacute;
          consultar a pr&oacute;xima se&ccedil;&atilde;o tamb&eacute;m.</para>
      </note>

      <sect1 id="porting-makefile">
        <title>Escrevendo o <filename>Makefile</filename></title>

        <para>O <filename>Makefile</filename> minimo pareceria algo
          como isto:</para>

        <programlisting># New ports collection makefile for:   oneko
# Date created:        5 December 1994
# Whom:                asami
#
# &dollar;FreeBSD&dollar;
#

PORTNAME=      oneko
PORTVERSION=   1.1b
CATEGORIES=    games
MASTER_SITES=  ftp://ftp.cs.columbia.edu/archives/X11R5/contrib/

MAINTAINER=    asami@FreeBSD.org
COMMENT=       A cat chasing a mouse all over the screen

MAN1=          oneko.1
MANCOMPRESSED= yes
USE_IMAKE=     yes

.include &lt;bsd.port.mk&gt;</programlisting>

        <para>Veja se voc&ecirc; pode comprende-lo.  N&atilde;o se preocupe sobre os &iacute;ndices
          da linha <literal>&dollar;FreeBSD&dollar;</literal> , ser&aacute;
          preenchido automaticamente pelo CVS quando o port est&aacute; importado ao nossa arvore
          de ports principal.  Voc&ecirc; pode encontrar um exemplo mais detalhado na se&ccedil;&atilde;o <link
            linkend="porting-samplem">Makefile de exemplo</link>.</para>
      </sect1>

      <sect1 id="porting-desc">
        <title>Escrevendo o arquivos de descri&ccedil;&atilde;o</title>

        <para>Existem dois arquivos de descri&ccedil;&atilde;o que s&atilde;o necess&aacute;rios para
          qualquer port, se eles s&atilde;o realmente pacotes ou n&atilde;o. Eles s&atilde;o
          <filename>pkg-descr</filename> e
          <filename>pkg-plist</filename>.  Seus
          prefixos <filename>pkg-</filename> distingue-os de
          outros arquivos.</para>

        <sect2>
          <title><filename>pkg-descr</filename></title>

          <para>Esta &eacute; uma descri&ccedil;&atilde;o mais longa do port.  Um a alguns
            par&aacute;grafos concietizamente explicando o que o port faz &eacute;
            suficiente.</para>

          <note>
            <para>Este <emphasis>n&atilde;o</emphasis> &eacute; um manual ou uma descri&ccedil;&atilde;o
              aprofundada em como usar ou compilar o port! <emphasis>Por favor
              tenha cautela se voc&ecirc; est&aacute; compiando do
              <filename>README</filename> ou manpage</emphasis>; t&atilde;o frequentemente
              eles n&atilde;o s&atilde;o uma descri&ccedil;&atilde;o concisa do port ou est&aacute; em um formato
              de dif&iacute;cil manipula&ccedil;&atilde;o (ex., manpages tem espa&ccedil;amento justificado).  Se o
              software portado tem uma homepage WWW oficial, voc&ecirc; deve lista-la
              aqui.  Prefix <emphasis>one</emphasis> do websites com
              <literal>WWW:</literal> assim ferramentas automatizadas
              funcionar&atilde;o corretamente.</para>
          </note>

          <para>Isto &eacute; recomendado que voc&ecirc; assine seu nome no final deste
            arquivo, como em:</para>

          <programlisting>Este &eacute; um port do oneko, em qual um gato persegue um pobre rato por
a tela.
 :
(etc.)

WWW: http://www.oneko.org/

- Satoshi
asami@cs.berkeley.edu</programlisting>
        </sect2>

        <sect2>
          <title><filename>pkg-plist</filename></title>

          <para>Este arquivo lista todos os arquivos instalados pelo port.  Ele &eacute;
            tambem chamado de <quote>packing list</quote> porque o pacote &eacute;
            gerado pelo empacotamento dos arquivos listados aqui.  Os pathnames s&atilde;o
            relativos ao prefixo de instala&ccedil;&atilde;o (normalmente
            <filename>/usr/local</filename> ou
            <filename>/usr/X11R6</filename>).  Se voc&ecirc; est&aacute; usando o
            <makevar>MAN<replaceable>n</replaceable></makevar> vari&aacute;veis (as
            you should be), n&atilde;o liste nenhum manpages aqui.</para>

          <para>Aqui est&aacute; um pequeno exemplo:</para>

          <programlisting>bin/oneko
lib/X11/app-defaults/Oneko
lib/X11/oneko/cat1.xpm
lib/X11/oneko/cat2.xpm
lib/X11/oneko/mouse.xpm
@dirrm lib/X11/oneko</programlisting>

          <para>Consulte o &man.pkg.create.1; manual page para detalhes na
            lista de empacotamento.</para>

          <note>
            <para>Voc&ecirc; deve listar todos arquivos, mas n&atilde;o o nomes de diret&oacute;rios,
              na lista.  Tamb&eacute;m, se o port cria diret&oacute;rios para si mesmo
              durante a instala&ccedil;&atilde;o, certifique-se de adicionar linhas
              <literal>@dirrm</literal> t&atilde;o necess&aacute;ria para remove-los quando o port &eacute;
              apagado.</para>

            <para>&Eacute; recomendav&eacute;l que voc&ecirc; mantenha todos nomes de arquivos neste
              arquivo sortidos alfabeticamente.  Isto far&aacute; a verifica&ccedil;&atilde;o de mudan&ccedil;as
              quando voc&ecirc; upgrade o port muito mais f&aacute;cil.</para>

            <para>Cria&ccedil;&atilde;o de uma lista de empacotamento manualmente pode ser uma tarefa
              muito intediante.  Se o port instala um grande numero de arquivos, <link
                linkend="porting-autoplist">criando lista de empacotamento
                automaticamente</link> pode economizar tempo.</para>
          </note>
        </sect2>
      </sect1>

      <sect1 id="porting-checksum">
        <title>Criando o arquivo de checksum</title>

        <para>So digite <command>make makesum</command>. As regras do make do ports
          gerar&aacute; automaticamente o arquivo
          <filename>distinfo</filename>.</para>
      </sect1>

      <sect1 id="porting-testing">
        <title>Testando o port</title>

        <para>Voc&ecirc; deve certificar-se que a regras do port faz exatamente o que voc&ecirc;
          quer que ele fa&ccedil;a, incluindo empacotamento do port.  Estes s&atilde;o os
          pontos importantes que voc&ecirc; precisa verificar.</para>

        <itemizedlist>
          <listitem>
            <para><filename>pkg-plist</filename> n&atilde;o cont&eacute;m nada instalado pelo
              seu port</para>
          </listitem>

          <listitem>
            <para><filename>pkg-plist</filename> cont&eacute;m tudo o que est&aacute;
              instalado pelo seu port</para>
          </listitem>

          <listitem>
            <para>Seu port pode ser instalado multiplas vezes usando o
              <maketarget>reinstall</maketarget> target</para>
          </listitem>

          <listitem>
            <para>Seu port <link linkend="porting-cleaning">cleans up</link>
              depois ele mesmo desinstala</para>
          </listitem>
        </itemizedlist>

        <procedure>
          <title>Ordem de teste recomendada</title>

          <step>
            <para><command>make install</command></para>
          </step>

          <step>
            <para><command>make package</command></para>
          </step>

          <step>
            <para><command>make deinstall</command></para>
          </step>

          <step>
            <para><command>pkg_add <replaceable>package-name</replaceable>
              </command></para>
          </step>

          <step>
            <para><command>make deinstall</command></para>
          </step>

          <step>
            <para><command>make reinstall</command></para>
          </step>

          <step>
            <para><command>make package</command></para>
          </step>
        </procedure>

        <para>Certifique-se que n&atilde;o ha quet&otilde;es avisos em nenhum dos est&aacute;gios
          <maketarget>package</maketarget> e
          <maketarget>deinstall</maketarget>.  Depois do passo 3, verifique para
          ver se todos os novos diret&oacute;rios est&atilde;o corretamente apagados.  Tamb&eacute;m, tente
          usando o software depois do passo 4, para assegurar que est&aacute; funciona corretamente
          quando instalado de um pacote.</para>
      </sect1>

      <sect1 id="porting-portlint">
        <title>Verficando seu port com <command>portlint</command></title>

        <para>Por favor use <command>portlint</command> para ver se seu port
          ajusta-se ao nossas orienta&ccedil;&otilde;es.  O programa <command>portlint</command>
          &eacute; parte da cole&ccedil;&atilde;o do ports.  Em particular, voc&ecirc; pode querer
          verificar se o <link linkend="porting-samplem">Makefile</link> est&aacute; na
          forma certa e o  <link
            linkend="porting-pkgname">package</link> est&aacute; nomeado
          apropriadamente.</para>
      </sect1>

      <sect1 id="porting-submitting">
        <title>Enviando o port</title>

        <para>Primeiro, certifique-se de ter lido a se&ccedil;&atilde;o <link
            linkend="porting-dads">FAZERes e N&Atilde;O-FAZERes</link>.</para>

        <para>Agora que voc&ecirc; est&aacute; feliz com seu port, a unica coisa restante
          &eacute; coloca-lo na arvore do ports principal do FreeBSD e fazer todos else
          feliz sobre ele tamb&eacute;m.  N&oacute;s n&atilde;o necessitamos seu diret&oacute;rio <filename>work</filename>
          ou o pacote <filename>pkgname.tgz</filename>, assim apague-os
          agora.  Pr&oacute;ximo, simplesmente inclua a saida do <command>shar `find
            port_dir`</command> em um bug report e envie-o com o
            &man.send-pr.1; programa (veja <ulink url="../../articles/contributing/contrib-how.html#CONTRIB-GENERAL">Bug
            Reports and General Commentary</ulink> para mais informa&ccedil;&otilde;es sobre
            &man.send-pr.1;).  Se o port descomprimido &eacute; maior que 20KB,
          voc&ecirc; deve comprimir ele dentro de um arquivo tar e usar &man.uuencode.1;
          antes de inclui-lo no  bug report (uuencoded tarfiles s&atilde;o
          aceit&aacute;veis mesmo se o bug report &eacute; menor que 20KB mas n&atilde;o s&atilde;o
          preferidos).  Esteja certo ao classificar o bug report como a categoria
          <literal>ports</literal> e classe
          <literal>change-request</literal>  (N&atilde;o marque o report
          <literal>confidential</literal>!).
          Tamb&eacute;m adicione um curta descri&ccedil;&atilde;o do programa que voc&ecirc; portou
          ao campo <quote>Description</quote> do PR e
          o arquivo tar do shar ou uuencoded ao campo
          <quote>Fix</quote>.  A ultima ajuda os committers
          muito, quem usa scripts para o ports-funcionar.</para>

        <para>Uma vez mais, <emphasis>n&atilde;o inclua a fonte original
            distfile, o diret&oacute;rio <filename>work</filename>, ou o pacote
            que voc&ecirc; construiu com <command>make package</command></emphasis>.</para>

        <note>
          <para>No passado, nos perguntavamos a voc&ecirc; para upload novo port submissions em
            nosso site ftp (<hostid role="fqdn">ftp.FreeBSD.org</hostid>). Este
            n&atilde;o &eacute; longer recomendado assim o acesso a leitura &eacute; desativado no
            diret&oacute;rio <filename>incoming/</filename> daquele site devido ao
            grande quantidade de software pirata aparecendo l&aacute;.</para>
        </note>

	<para>Depois que voc&ecirc; have enviou seu port, por favor seja paciente.
	  As vezes it pode levar a alguns meses antes que um port seja incluido
	  no FreeBSD, embora possa somente levar alguns dias.  Voc&ecirc; pode
	  ver a lista de ports <ulink
	  url="http://www.FreeBSD.org/cgi/query-pr-summary.cgi?category=ports">
	  esperando para ser committed ao FreeBSD</ulink>.</para>

        <para>Uma vez que n&oacute;s olharemos seu port, retornaremos para voc&ecirc; se necess&aacute;rio, e
          coloca-lo na arvore.  Seu nome tamb&eacute;m aparecer&aacute;  na lista de
          <ulink url="../../articles/contributors/contrib-additional.html">Contribuidores Adicionais do FreeBSD</ulink>
          e outros arquivos. N&atilde;o &eacute; &oacute;timo?!? <!-- smiley
          -->:-)</para>

        <note>
          <para>>Voc&ecirc; pode facilitar nosso trabalho, se voc&ecirc; usa uma boa
            descri&ccedil;&atilde;o na sinopse do relat&oacute;rio do problema.
            N&oacute;s preferimos algo como
            <quote>New port: &lt;curta descri&ccedil;&atilde;o do port&gt;</quote> para
            novos ports e
            <quote>Update port: &lt;categoria&gt;/&lt;port&gt; &lt;curta descri&ccedil;&atilde;o
            da atualiza&ccedil;&atilde;o&gt;</quote> para atualiza&ccedil;&atilde;o do port.
            Se voc&ecirc; stick a este esquema, a chance que alguem olhe
            seu PR cedo &eacute; muito maior.</para>
        </note>
      </sect1>
    </chapter>

    <chapter id="slow">
      <title>Slow Porting</title>

      <para>Ok, assim n&atilde;o era aquilo simples, e o port necessita algumas
        modifica&ccedil;&otilde;es para funcionar.  Nesta se&ccedil;&atilde;o, n&oacute;s explicaremos,
        passo a passo, como modifica-lo para funcionar com os paradigmas
        do ports.</para>

      <sect1 id="slow-work">
        <title>Como as coisas funcionam</title>

        <para>Primeiro, esta &eacute; sequencia de eventos que ocorrem quando o usu&aacute;rio
          primeiro digita <command>make</command> em seu diret&oacute;rio do port.
          Voc&ecirc; pode encontrar que contem <filename>bsd.port.mk</filename> em uma outra
          janela enquanto voc&ecirc; le isto realmente ajuda compreende-lo.</para>

        <para>Mas n&atilde;o se preocupe se voc&ecirc; n&atilde;o entendeu realmente o que
          <filename>bsd.port.mk</filename> est&aacute; fazendo, muitas pessoas n&atilde;o entendem...
          <!-- smiley --><emphasis>:-&gt;</emphasis></para>

        <procedure>

          <step>
            <para>O <maketarget>fetch</maketarget> target &eacute; executado.  The
              <maketarget>fetch</maketarget> target &eacute; responsavel por certificar-se
              que o tarball existe localmente em
              <makevar>DISTDIR</makevar>. Se <maketarget>fetch</maketarget>
              n&atilde;o pode encontrar os arquivos necess&aacute;rios em <makevar>DISTDIR</makevar> it
              procurar&aacute; a URL <makevar>MASTER_SITES</makevar>, qual est&aacute;
              definida no Makefile, t&atilde;o bem quanto em nosso site principal de ftp em <ulink
                url="ftp://ftp.FreeBSD.org/pub/FreeBSD/ports/distfiles/"></ulink>,
              onde n&oacute;s colocamos sansionado distfiles como backup.  Ent&atilde;o
              tentar&aacute; buscar o arquivo distribui&ccedil;&atilde;o chamado com
              <makevar>FETCH</makevar>, assumindo que o site pedido tenha
              acesso direto a Internet.  Se sucedido, salvar&aacute;
              o arquivo em <makevar>DISTDIR</makevar> para uso futuro e
              proseguir.</para>
          </step>

          <step>
            <para>The <maketarget>extract</maketarget> target &eacute; executado.  Procurar&aacute;
              em seu arquivo de distribui&ccedil;&atilde;o do port (tipicamente um gzip'd
              tarball) em <makevar>DISTDIR</makevar> e desempacota-lo dentro de um
              especifico subdiret&oacute;rio tempor&aacute;rio pelo <makevar>WRKDIR</makevar>
              (defaults to <filename>work</filename>).</para>
          </step>

          <step>
            <para>The <maketarget>patch</maketarget> target &eacute; executado.  Primeiro,
              quaisquer patches definidos em <makevar>PATCHFILES</makevar> s&atilde;o
              aplicados.  Segundo, se quaisquer arquivos patch chamados
              <filename>patch-<replaceable>*</replaceable></filename> s&atilde;o encontrados em
              <makevar>PATCHDIR</makevar> (defaults ao
              subdiret&oacute;rio <filename>files</filename>), eles s&atilde;o aplicados neste
              tempo em ordem alfabetica.</para>
          </step>

          <step>
            <para>The <maketarget>configure</maketarget> target &eacute; executado.  Isto
              pode fazer qualquer de v&aacute;rias coisas diferentes.</para>

            <orderedlist>
              <listitem>
                <para>Se existe, <filename>scripts/configure</filename> &eacute;
                  executado.</para>
              </listitem>

              <listitem>
                <para>Se <makevar>HAS_CONFIGURE</makevar> ou
                  <makevar>GNU_CONFIGURE</makevar> &eacute; definido,
                  <filename><makevar>WRKSRC</makevar>/configure</filename> &eacute;
                  executado.</para>
              </listitem>

              <listitem>
                <para>Se <makevar>USE_IMAKE</makevar> &eacute; definido,
                  <makevar>XMKMF</makevar> (default: <command>xmkmf
                    -a</command>) &eacute; executado.</para>
              </listitem>
            </orderedlist>
          </step>

          <step>
            <para>The <maketarget>build</maketarget> target &eacute; executado.  Este &eacute;
              responsavel por ir descendo dentro do diret&oacute;rio de trabalho privado
              do port (<makevar>WRKSRC</makevar>) e construindo-o.  Se
              <makevar>USE_GMAKE</makevar> &eacute; definido, GNU <command>make</command>
              ser&aacute; usado, caso contr&aacute;rio <command>make</command> do sistema
              ser&aacute; usado.</para>
          </step>
        </procedure>

        <para>Acima s&atilde;o as a&ccedil;&otilde;es.  Adicionalmente, voc&ecirc; pode definir
          targets
          <maketarget>pre-<replaceable>something</replaceable></maketarget> ou
          <maketarget>post-<replaceable>something</replaceable></maketarget>,
          ou colocar os scripts com aqueles nomes, no subdiret&oacute;rio
          <filename>scripts</filename>, e eles ser&atilde;o executados antes ou depois das
          a&ccedil;&otilde;es default serem feitas.</para>

        <para>Por exemplo, se voc&ecirc; tem um <maketarget>post-extract</maketarget>
          target definido em seu <filename>Makefile</filename>, e um arquivo
          <filename>pre-build</filename> no subdiret&oacute;rio
          <filename>scripts</filename>, the <maketarget>post-extract</maketarget> target
          ser&aacute; chamado depois das a&ccedil;&otilde;es de extra&ccedil;&atilde;o regular, e o script
          <filename>pre-build</filename> ser&aacute; executado antes das
          regras de constru&ccedil;&atilde;o default serem feitas.  &Eacute; recomendavel que voc&ecirc; use
          <filename>Makefile</filename> targets se as a&ccedil;&otilde;es s&atilde;o simples
          bastante, porque ser&aacute; mais f&aacute;cil para alguem compreender que tipo
          de a&ccedil;&atilde;o non-default o port necessita.</para>

        <para>As a&ccedil;&otilde;es default s&atilde;o feitas pelos
          <filename>bsd.port.mk</filename> targets
          <maketarget>do-<replaceable>something</replaceable></maketarget>.
          Por exemplo, os comandos para extrair um port est&atilde;o no target
          <maketarget>do-extract</maketarget>.  Se voc&ecirc; n&atilde;o est&aacute; feliz com o
          default target, voc&ecirc; pode conserta-lo redefinindo o
          <maketarget>do-<replaceable>something</replaceable></maketarget>
          target em seu <filename>Makefile</filename>.</para>

        <note>
          <para>As <quote>principais</quote> targets (ex.,
            <maketarget>extract</maketarget>,
            <maketarget>configure</maketarget>, etc.) n&atilde;o fazem nada mais que
            certificar todos os est&aacute;gios acima daquele est&atilde;o completos e chama
            os targets ou scripts reais, e eles n&atilde;o intended a ser
            mudados.  Se voc&ecirc; quer consertar a extra&ccedil;&atilde;o, conserte
            <maketarget>do-extract</maketarget>, mas nunca jamais toque
            <maketarget>extract</maketarget>!</para>
        </note>

        <para>Agora que voc&ecirc; entendeu que est&aacute; acontecendo quando o usu&aacute;rios digita
          <command>make</command>, deixe-nos ir atrav&eacute;s dos passos recomendados para
          criar o port perfeito.</para>
      </sect1>

      <sect1 id="slow-sources">
        <title>Obtendo os fontes originais</title>

        <para>Obter os fontes originais (normalmente) como um tarball comprimido
          (<filename><replaceable>foo</replaceable>.tar.gz</filename> ou
          <filename><replaceable>foo</replaceable>.tar.Z</filename>) e copie-o
          dentro <makevar>DISTDIR</makevar>.  Sempre use
          <emphasis>mainstream</emphasis> fontes quando quando e onde voc&ecirc;
          possa.</para>

        <para>Se voc&ecirc; n&atilde;o possa encontrar um site FTP/HTTP que est&aacute; bem-conectado a
          rede, ou pode somente encontrar sites que tenham formatos irritantemente
          n&atilde;o-padr&atilde;o, voc&ecirc; pode querer colocar uma copia em um confiavel servidor
          FTP or HTTP que voc&ecirc; controla (ex., sua home page).  Certifique-se de definir
          <makevar>MASTER_SITES</makevar> a refletir sua escolha.</para>

        <para>Se voc&ecirc; n&atilde;o pode encontrar algo conveniente e confiavel para colocar o
          distfile
          n&oacute;s podemos <quote>house</quote> it ourselves
          em <hostid>ftp.FreeBSD.org</hostid>.
          O distfile tem que colocado dentro
          <filename>~/public_distfiles/</filename> of someone's
          <hostid>freefall</hostid> account.
          Pergunte as pessoa quem commits seu port para fazer isto.
          Esta pessoa tamb&eacute;m definir&aacute; <makevar>MASTER_SITES</makevar> ao
          <makevar>MASTER_SITE_LOCAL</makevar> e
          <makevar>MASTER_SITE_SUBDIR</makevar> ao seu
          <hostid>freefall</hostid> username.</para>

        <para>Se seu distfile do port muda todo tempo por isso n&atilde;o &eacute; boa raz&atilde;o,
          considere colocando o distfile em sua home page e listando-o como
          o primeiro <makevar>MASTER_SITES</makevar>.  Isto empedir&aacute; usu&aacute;rios
          de obterem erros <errorname>checksum mismatch</errorname>, e
          tamb&eacute;m reduzir a carga de trabalho dos mantedores de nosso site ftp.  
          Tamb&eacute;m, se h&aacute; somente um site master para o port, &eacute; recomendado que
          voc&ecirc; aloje um backup em seu site e liste-o como segundo
          <makevar>MASTER_SITES</makevar>.</para>

        <para>Se seu port necessita alguns `patches' adicionais que est&atilde;o
          dispon&iacute;veis na Internet, busca-los tamb&eacute;m e coloca-los em
          <makevar>DISTDIR</makevar>.  N&atilde;o se preocupe se eles virem de um outro
          site de que onde voc&ecirc; obteve o tarball do fonte principal, n&oacute;s temos um
          meio para handle estas situa&ccedil;&otilde;es (veja a descri&ccedil;&atilde;o do <link
            linkend="porting-patchfiles">PATCHFILES</link> abaixo).</para>
      </sect1>

      <sect1 id="slow-modifying">
        <title>Modificando o port</title>

        <para>Desempacote uma copia do tarball em um diret&oacute;rio privado e fa&ccedil;a
          quaisquer muda&ccedil;as que s&atilde;o necess&aacute;rias para obter o port compilar
          corretamente sob the vers&atilde;o atual do FreeBSD.  Keep <emphasis>careful
            track</emphasis> of tudo que voc&ecirc; fez, assim voc&ecirc; estar&aacute; automatizando
          o processo shortly.  Tudo, incluindo o exclus&atilde;o, adi&ccedil;&atilde;o,
          ou modifica&ccedil;&atilde;o dos arquivos deve ser feita usando um arquivo script
          ou patch automatizado quando seu port &eacute; finalizado.</para>

        <para>Se seu port necessita significantes intera&ccedil;&atilde;o/customiza&ccedil;&atilde;o
          para compilar ou instalar, voc&ecirc; deve procurar um dos scripts cl&aacute;ssicos
          do Larry Wall<application>Configure</application> scripts e perhaps faz
          algo similar si mesmo.  A meta das novas cole&ccedil;&atilde;o de ports &eacute;
          fazer cada port como <quote>plug-and-play</quote> assim possivel para o
          usu&aacute;rio-final enquanto usando o minimo de espa&ccedil;o de disco.</para>

        <note>
          <para>Ao menos explicitamente stated, arquivos patch, scripts, e outros
            arquivos voc&ecirc; criou e contribuiu a cole&ccedil;&atilde;o de ports do FreeBSD
            est&atilde;o assumidos a ser cobertos pelas condi&ccedil;&otilde;es padr&otilde;es do
            BSD copyright.</para>
        </note>
      </sect1>

      <sect1 id="slow-patch">
        <title>Patching</title>

        <para>Na prepara&ccedil;&atilde;o do port, arquivos que foram adicionados ou
          mudados podem ser picked up com um recursivo &man.diff.1;
          para depois feeding to &man.patch.1;.  Cada conjunto de patches que voc&ecirc;
          deseja aplicar deve ser coletado um arquivo chamado
          <filename>patch-<replaceable>*</replaceable></filename> onde
          <replaceable>*</replaceable> denotas a sequencia em qual os
          patches ser&atilde;o aplicados &mdash; estes s&atilde;o feitos em
          <emphasis>ordem alfabetica</emphasis>, assim <literal>aa</literal>
          primeiro, <literal>ab</literal> segundo e assim por diante.  Se voc&ecirc; deseja,
          voc&ecirc; pode usar nomes que indicam os pathnames dos arquivos que
          s&atilde;o patched, como <filename>patch-Imakefile</filename> ou
          <filename>patch-src-config.h</filename>.  Estes arquivos devem
          ser armazenados em <makevar>PATCHDIR</makevar>, de onde eles ser&atilde;o
          automaticamente aplicados.  Todos patches devem ser relativos ao
          <makevar>WRKSRC</makevar> (normalmente o diret&oacute;rio que seu tarball do port
          se desempacota dentro, que estando onde a constru&ccedil;&atilde;o &eacute; feita).
          Para fazer consertos e melhorias facilmente, voc&ecirc; deve evitar ter mais
          de um patch de conserto do mesmo arquivo (ex., <filename>patch-aa</filename> e
          <filename>patch-ab</filename> ambos mudando
          <filename><makevar>WRKSRC</makevar>/foobar.c</filename>).</para>

        <para>N&atilde;o coloque RCS strings nos patches.  CVS mutilar&aacute;-los quando n&oacute;s
          colocamos os arquivos dentro da arvore do ports, e quando n&oacute;s verificamos-as sa&iacute;das novamente,
          eles sair&atilde;o diferentes e o patch falhar&aacute;.  RCS strings
          s&atilde;o cercadas por sinais de dollar (<literal>&dollar;</literal>), e
          tipicamente inicia com <literal>&dollar;Id</literal> ou
          <literal>&dollar;RCS</literal>.</para>

        <para>Usando o recurso op&ccedil;&atilde;o (<option>-r</option>) para
          &man.diff.1; gerar patches &eacute; sutil, mas por favor de olhe
          a look at the resulting patches para certificar-se que voc&ecirc; n&atilde;o tem nada
          desnecess&aacute;rio junk em l&aacute;.  Em particular, diffs entre dois arquivos
          backup, <filename>Makefile</filename>s quando o port usa
          <command>Imake</command> ou GNU <command>configure</command>, etc.,
          s&atilde;o desnecess&aacute;rios e devem ser apagados.  Se voc&ecirc; teve que editar
          <filename>configure.in</filename> e executar
          <command>autoconf</command> para gerar
          <command>configure</command>, n&atilde;o pegue os diffs do
          <command>configure</command> (frequentemente cresce algumas milhares de
          linhas!); defina <literal>USE_AUTOCONF=yes</literal> e pegue os
          diffs do <filename>configure.in</filename>.</para>

        <para>Tamb&eacute;m, se voc&ecirc; teve que apagar um arquivo, ent&atilde;o voc&ecirc; pode faze-lo no
          <maketarget>post-extract</maketarget> target rather than as part of
          the patch.  Uma vez voc&ecirc; est&aacute; feliz com o resulting diff, por favor divida-o
          dentro de um arquivo fonte por arquivo patch.</para>
      </sect1>

      <sect1 id="slow-configure">
        <title>Configurando</title>

        <para>Incluir quaisquer comandos adicionais de customiza&ccedil;&otilde;es em seu
          script <filename>configure</filename> e salva-o no subdiret&oacute;rio
          <filename>scripts</filename>.  Como mencionado acima, voc&ecirc;
          pode tamb&eacute;m fazer isto com <filename>Makefile</filename> targets e/ou
          scripts com o nome <filename>pre-configure</filename> ou
          <filename>post-configure</filename>.</para>
      </sect1>

      <sect1 id="slow-user-input">
        <title>Manuseando a entrada do usu&aacute;rio</title>

        <para>Se seu port necessita de entrada do usu&aacute;rio para construir, configurar, ou instalar,
          ent&atilde;o defina <makevar>IS_INTERACTIVE</makevar> em seu <filename>Makefile</filename>.  Isto
          permitir&aacute;  <quote>overnight builds</quote> para skip seu port se as
          defini&ccedil;&otilde;es do usu&aacute;rio vari&aacute;vel <envar>BATCH</envar> em seu ambiente (e
          se o usu&aacute;rio define a vari&aacute;vel <envar>INTERACTIVE</envar>, ent&atilde;o
          <emphasis>somente</emphasis> aqueles ports necessintando intera&ccedil;&atilde;o s&atilde;o
          construido).</para>

        <para>&Eacute; tamb&eacute;m recomendado que se h&aacute; respostas razo&aacute;veis default
          para as perguntas, voc&ecirc; deve verificar a vari&aacute;vel
          <makevar>PACKAGE_BUILDING</makevar> e desativar o
          iscript interativo quando ele &eacute; definido.  Isto permitir&aacute;-nos construir os
          pacotes aos CDROMs e FTP.</para>
      </sect1>
    </chapter>

    <chapter id="makefile">
      <title>Configurando o Makefile</title>

      <para>Configurando o <filename>Makefile</filename> e bastante simples, e novamente n&oacute;s sugerimos
        que voc&ecirc; olhe em exemplos existentes antes de iniciar. Tamb&eacute;m, h&aacute; 
        <link linkend="porting-samplem">exemplo de Makefile</link> neste
        manual, assim de um olhada e por favor siga as orderns das vari&aacute;veis
        ae se&ccedil;&otilde;es naquele template para fazer seu port facilmente para outros
        lerem.</para>

      <para>Agora, considerando os seguintes problemas em sequencia como voc&ecirc; design
        seu novo <filename>Makefile</filename>:</para>

      <sect1 id="makefile-source">
        <title>O fonte original</title>

        <para>Ele mora em <makevar>DISTDIR</makevar> como em um padr&atilde;o
	  gzip'd tarball chamado algo como
	  <filename>foozolix-1.2.tar.gz</filename>? Se sim, voc&ecirc; pode ir ao
	  ao pr&oacute;ximo passo.  Se n&atilde;o, voc&ecirc; deve olhar em sobrescrevendo qualquer das
	  vari&aacute;veis <makevar>DISTNAME</makevar>, <makevar>EXTRACT_CMD</makevar>,
	  <makevar>EXTRACT_BEFORE_ARGS</makevar>,
	  <makevar>EXTRACT_AFTER_ARGS</makevar>,
	  <makevar>EXTRACT_SUFX</makevar>, ou <makevar>DISTFILES</makevar>,
	  dependendo em como alien um formato a seu arquivo distribui&ccedil;&atilde;o
	  &eacute;.  (O mais caso comum &eacute;
	  <literal>EXTRACT_SUFX=.tar.Z</literal>, quando o tarball est&aacute;
	  condensado regularmente <command>compress</command>, n&atilde;o
	  <command>gzip</command>.)</para>

        <para>No pior caso, voc&ecirc; pode simplesmente criar seu pr&oacute;prio
	  <maketarget>do-extract</maketarget> target para sobrescrever o
	  default, embora este deve ser raramente, se for,
	  necess&aacute;rio.</para>
      </sect1>
    
    <sect1 id="makefile-naming">
      <title>Nomeando</title>

      <para>A primeira parte do <filename>Makefile</filename> do port nomeia
	o port, descreve seu n&uacute;mero da vers&atilde;o, e lista-os na categoria
	correta.</para>

      <sect2>
        <title><makevar>PORTNAME</makevar> and <makevar>PORTVERSION</makevar></title>

        <para>Voc&ecirc; deve definir <makevar>PORTNAME</makevar> ao
          nome da base de seu port, e <makevar>PORTVERSION</makevar>
          ao n&uacute;mero da vers&atilde;o do port.</para>
      </sect2>

      <sect2>
	<title><makevar>PORTREVISION</makevar> e
	  <makevar>PORTEPOCH</makevar></title>

	<sect3>
	  <title><makevar>PORTREVISION</makevar></title>

	  <para>A vari&aacute;vel <makevar>PORTREVISION</makevar> &eacute; uma
	    monotonically aumentando o valor qual &eacute; redefinido a 0 com
	    cada aumento da <makevar>PORTVERSION</makevar> (ex.
	    cada vez que um oficial vendor release &eacute; feita), e
	    appended ao nome do pacote se n&atilde;o-zero.
	    <makevar>PORTREVISION</makevar> &eacute; aumentado cada vez que
	    uma mudan&ccedil;a &eacute; feita ao port do FreeBSD qual significantemente
	    afeta o conte&uacute;do ou estutura dos pacotes
	    derivados.</para>

	  <para>Exemplos de quando <makevar>PORTREVISION</makevar>
	    deve ser bumped:</para>

	  <itemizedlist>
	    <listitem>
	      <para>Adi&ccedil;&atilde;o de patches para corrigir as vulnerabilidades
		de seguran&ccedil;a, bugs, ou para adicionar novas funcionalidades ao
		port do FreeBSD.</para>
	    </listitem>

	    <listitem>
	      <para>Mudan&ccedil;as ao <filename>Makefile</filename> do port para abilitar ou disabilitar
		op&ccedil;&otilde;es no tempo de compila&ccedil;&atilde;o no pacote.</para>
	    </listitem>

	    <listitem>
	      <para>Mudan&ccedil;as na lista de empacotamento ou no tempo-da-instala&ccedil;&atilde;o
		comportamento do pacote (ex. mudan&ccedil;a ao script
		qual gera initial data para o pacote, como chaves ssh do
		host).</para>
	    </listitem>

	    <listitem>
	      <para>Version bump de umas dependencias da biblioteca
		compartilhada do port (neste caso, alguem tentando instalar o pacote
		antigo depois da instalado uma nova vers&atilde;o da
		dependencia falhar&aacute; desde que ele procurar o antigo
		libfoo.x ao inv&eacute;s de libfoo.(x+1)).</para>
	    </listitem>

	    <listitem>
	      <para>Silent changes ao distfile do port qual tem
		significantes diferen&ccedil;as funcionais, ex. mudan&ccedil;as ao
		distfile necessitando de uma corre&ccedil;&atilde;o ao
		<filename>distinfo</filename> com mudan&ccedil;a n&atilde;o correspondente ao
		<makevar>PORTVERSION</makevar>, onde um <command>diff
		-ru</command> do antigo e novas vers&otilde;es mostra
		mudan&ccedil;as n&atilde;o-triviais ao c&oacute;digo.</para>
	    </listitem>
	  </itemizedlist>

	  <para>Exemplos de mudan&ccedil;as qual n&atilde;o necessitam uma
	    <makevar>PORTREVISION</makevar> bump:</para>

	  <itemizedlist>
	    <listitem>
	      <para>Mudan&ccedil;as de estilo ao esqueleto do port com mudan&ccedil;as
		n&atilde;o funcionais para que apare&ccedil;am no pacote
		resultante.</para>
	    </listitem>

	    <listitem>
	      <para>Mudan&ccedil;as ao <makevar>MASTER_SITES</makevar> ou
		outras mudan&ccedil;as funcionais ao port qual n&atilde;o
		afeta o pacote resultante.</para>
	    </listitem>

	    <listitem>
	      <para>Trivial patches ao distfile como corre&ccedil;&atilde;o
		de typos, qual n&atilde;o s&atilde;o suficiente importante que usu&aacute;rios
		do pacote devem ir a problemas de
		upgrading.</para>
	    </listitem>

	    <listitem>
	      <para>Build fixes qual causa uma pacote torna-se
		compil&aacute;vel onde ele estava anteriormente falhando (as long as
		as mudan&ccedil;as n&atilde;o introduziram quaisquer mudan&ccedil;as funcionais em
		quaisquer outras platformas em qual o port foi construido
		anteriormente). Desde <makevar>PORTREVISION</makevar> reflita
		o conte&uacute;do do pacote, se nenhum pacote foi
		anteriormente contrutivel ent&atilde;o n&atilde;o h&aacute; necessidade para aumentar
		<makevar>PORTREVISION</makevar> para marcar uma
		mudan&ccedil;a.</para>
	    </listitem>
	  </itemizedlist>

	  <para>Uma regra do thumb &eacute; perguntar a si mesmo se uma mudan&ccedil;a
	    committed a um port &eacute; algo qual alguem, algum local,
	    would benefit from having (either because of an
	    enhancement, fix, or by virtue that the new package will
	    actually work for them). If yes, the
	    <makevar>PORTREVISION</makevar> should be bumped so that
	    automated tools (e.g.  &man.pkg.version.1;)
	    ir&aacute; highlight o fata que um novo pacote est&aacute;
	    dispon&iacute;vel.</para>
	</sect3>

	<sect3>
	  <title><makevar>PORTEPOCH</makevar></title>

	  <para>De tempos em tempos um software vendor ou porter do FreeBSD
	    far&aacute; algo silly e release uma vers&atilde;o de seus
	    software qual est&aacute; atualmente numericamente abaixo da
	    vers&atilde;o anterior. Um exemplo disto &eacute; um port qual foi
	    de foo-20000801 para foo-1.0 (o former ser&aacute;
	    tratado incorretamente como uma vers&atilde;o mais nova desde 20000801 &eacute; um
	    valor numericamente superior que 1).</para>

	  <para>Em situa&ccedil;&otilde;es como esta, a vers&atilde;o
	    <makevar>PORTEPOCH</makevar> deve ser aumentada.
	    Se <makevar>PORTEPOCH</makevar> &eacute; n&atilde;o-zero ele &eacute; appended
	    ao nome do pacote como descrito na se&ccedil;&atilde;o 0 acima.
	    <makevar>PORTEPOCH</makevar> nunca &eacute; diminuido ou redefinido
	    a zero, porque aquilo causaria compara&ccedil;&atilde;o a um pacote
	    de um anterior epoch a falhar (ex. o pacote n&atilde;o seria
	    detectado como fora de data): o novo numero de vers&atilde;o (ex.
	    <literal>1.0,1</literal> no exemplo acima) &eacute; ainda
	    numericamente menor que a vers&atilde;o anterior (2000801), mas
	    ferramentas automatizadas e encontradas para ser maior que o implica
	    sufixo <literal>,0</literal> no pacote anterior.</para>

	  <para>&Eacute; esperado que <makevar>PORTEPOCH</makevar> n&atilde;o ser&aacute;
	    usado pela maioria dos ports, e que sensivel
	    uso do <makevar>PORTVERSION</makevar> pode frequentemente pre-empt
	    ele tornando-se necess&aacute;rio se uma futura release do software
	    deve mudar a estrutura da vers&atilde;o. Entretanto, cuidado &eacute;
	    necess&aacute;rio pelos porters do FreeBSD quando um vendor release &eacute; feito
	    sem um n&uacute;mero de vers&atilde;o oficial &mdash; como um c&oacute;digo
	    <quote>snapshot</quote> release.  A tenta&ccedil;&atilde;o &eacute; rotular a
	    release com a data da release, qual causar&aacute; problemas
	    assim no exemplo acima quando uma nova release <quote>oficial</quote> &eacute;
	    feita.</para>

	  <para>Por exemplo, se um snapshot release &eacute; feita na data
	    20000917, e a vers&atilde;o anterior do software foi a
	    vers&atilde;o 1.2, a snapshot release deve ser dada a
	    <makevar>PORTVERSION</makevar> de 1.2.20000917 ou similar,
	    n&atilde;o 20000917, assim que a posterior release, diz 1.3, &eacute;
	    ainda um valor numericamente superior.</para>
	</sect3>

	<sect3>
	  <title>Exemplo de uso do <makevar>PORTREVISION</makevar> e
	    <makevar>PORTEPOCH</makevar></title>

	  <para>O port <literal>gtkmumble</literal>, vers&atilde;o
	    <literal>0.10</literal>, &eacute; committed a cole&ccedil;&atilde;o de
	    ports:</para>

	  <programlisting>PORTNAME=	gtkmumble
PORTVERSION=	0.10</programlisting>

	  <para><makevar>PKGNAME</makevar> torna-se
	    <literal>gtkmumble-0.10</literal>.</para>

	  <para>Um buraco na seguran&ccedil;a &eacute; descoberto qual necessita um patch
	    local do FreeBSD. <makevar>PORTREVISION</makevar> &eacute; bumped
	    de modo devido.</para>

	  <programlisting>PORTNAME=	gtkmumble
PORTVERSION=	0.10
PORTREVISION=	1</programlisting>

	  <para><makevar>PKGNAME</makevar> torna-se
	    <literal>gtkmumble-0.10_1</literal></para>

	  <para>Uma nova vers&atilde;o &eacute; released pelo vendor, numerada <literal>0.2</literal>
	    (it turns out the author actually intended
	    <literal>0.10</literal> para atualmente mean
	    <literal>0.1.0</literal>, n&atilde;o <quote>que vem depois
	      0.9</quote> - oops, t&atilde;o tarde agora). Desde o novo minor
	    version <literal>2</literal> &eacute; numericamente abaixo que a
	    vers&atilde;o anterior <literal>10</literal> o
	    <makevar>PORTEPOCH</makevar> tem que ser bumped para for&ccedil;ar
	    manualmente o novo pacote ser apagado como <quote>newer</quote>. Desde que ele
	    &eacute; um novo vendor release do c&oacute;digo,
	    <makevar>PORTREVISION</makevar> &eacute; redefinido a 0 (ou removido
	    do <filename>Makefile</filename>).</para>

	  <programlisting>PORTNAME=	gtkmumble
PORTVERSION=	0.2
PORTEPOCH=	1</programlisting>

	  <para><makevar>PKGNAME</makevar> torna-se
	    <literal>gtkmumble-0.2,1</literal></para>

	  <para>A pr&oacute;xima release &eacute; 0.3. Desde
	    <makevar>PORTEPOCH</makevar> nunca diminuiu, as vari&aacute;veis
	     vers&atilde;o s&atilde;o agora:</para>
	    
	  <programlisting>PORTNAME=	gtkmumble
PORTVERSION=	0.3
PORTEPOCH=	1</programlisting>

	  <para><makevar>PKGNAME</makevar> torna-se
	    <literal>gtkmumble-0.3,1</literal></para>

          <note>
            <para>Se <makevar>PORTEPOCH</makevar> foi redefinido
              a <literal>0</literal> com esta melhoria, alguem que tinha
              instalado o pacote <literal>gtkmumble-0.10_1</literal> n&atilde;o detectaria
              o pacote <literal>gtkmumble-0.3</literal> como mais novo, desde
              <literal>3</literal> &eacute; ainda numericmente menor que
              <literal>10</literal>.</para>
	  </note>
        </sect3>
      </sect2>

      <sect2>
        <title><makevar>PKGNAMEPREFIX</makevar> e <makevar>PKGNAMESUFFIX</makevar></title>

	<para>Duas vari&aacute;veis opcionais, <makevar>PKGNAMEPREFIX</makevar> e
	  <makevar>PKGNAMESUFFIX</makevar>, s&atilde;o combinadas com
	  <makevar>PORTNAME</makevar> e
	  <makevar>PORTVERSION</makevar> ao 
          form <makevar>PKGNAME</makevar> assim
          <literal>${PKGNAMEPREFIX}${PORTNAME}${PKGNAMESUFFIX}-${PORTVERSION}</literal>.
          Certifique-se que este conforme ao nossa orienta&ccedil;&atilde;o <link
          linkend="porting-pkgname"> para um bom nome de
          pacote</link>.  Em particular, voce n&atilde;o est&aacute; permitido a usar um
          h&iacute;fen (<literal>-</literal>) em
          <makevar>PORTVERSION</makevar>.  Tamb&eacute;m, se o nome do pacote
          tem a <replaceable>language-</replaceable> ou o
          <replaceable>-compiled.specifics</replaceable> part, use
          <makevar>PKGNAMEPREFIX</makevar> e
          <makevar>PKGNAMESUFFIX</makevar>, respectivamentes.  N&atilde;o fa&ccedil;a-os
          parte do <makevar>PORTNAME</makevar>.</para>
      </sect2>

    <sect2 id="porting-pkgname">
      <title>Conven&ccedil;&otilde;es do Nomeamento do Pacote</title>

      <para>Os seguintes s&atilde;o as conven&ccedil;&otilde;es que voce deve seguir nomeando seus
        pacotes.  Isto &eacute; ter nosso diret&oacute;rio de pacote f&aacute;cil de scan, como
        h&aacute; j&aacute; muitos e muitos de pacotes e usu&aacute;rios are going to
        turn away se eles ferirem seus olhos!</para>

      <para>O nome do pacote deve parecer como
        <filename><replaceable><optional>language<optional>_region</optional></optional>-name<optional><optional>-</optional>compiled.specifics</optional>-version.numbers</replaceable></filename>.</para>

      <para>O nome do pacote &eacute; definido como
        <literal>${PKGNAMEPREFIX}${PORTNAME}${PKGNAMESUFFIX}-${PORTVERSION}</literal>.
        Certifique-se de definir as vari&aacute;veis to conform a aquele fornato.</para>

      <orderedlist>
        <listitem>
          <para>FreeBSD strives suportar a lingua nativa de seus usu&aacute;rios.
            A parte <replaceable>language-</replaceable> deve ser a abrevia&ccedil;&atilde;o
            de duas letras da lingua natural definida pelo ISO-639 se
            o port &eacute; especifico a uma certa lingua.  Exemplos s&atilde;o
            <literal>ja</literal> para Japones, <literal>ru</literal> para
            Russo, <literal>vi</literal> para Vietnames,
            <literal>zh</literal> para Chines, <literal>ko</literal> para
            Koreano e <literal>de</literal> para Alem&atilde;o.</para>

	  <para>Se o port &eacute; especifica a certa regi&atilde;o within the
            language area, adicione as duas letras do c&oacute;digo do pa&iacute;s bem assim.
            Examples are <literal>en_US</literal> for US English and
            <literal>fr_CH</literal> para Swiss French.</para>

          <para>A parte <replaceable>language-</replaceable> deve
            ser definida na vari&aacute;vel <makevar>PKGNAMEPREFIX</makevar>.</para>
        </listitem>

        <listitem>
          <para>A primeira letra da parte do <filename>nome</filename>
            deve ser lowercase.  (O resto do nome pode conter
            letras capitais, assim use sua pr&oacute;pria descri&ccedil;&atilde;o quando voce est&aacute;
            convertendo um nome de software que tem algumas letras capitais nela.)
            H&aacute; uma tradi&ccedil;&atilde;o de nameamento de m&oacute;dulos <literal>perl 5</literal> por
            prepending <literal>p5-</literal> e convertendo o separador
            dois-pontos a um h&iacute;fen; por exemplo, o
            m&oacute;dulo <literal>Data::Dumper</literal> torna-se
            <literal>p5-Data-Dumper</literal>.  Se o software em quest&atilde;o
            tem n&uacute;meros, h&iacute;fens, ou underscores em seu nome, voce pode inclui-los
            bem assim (como <literal>kinput2</literal>).</para>
        </listitem>

        <listitem>
          <para>Se o port pode ser construido com diferentes <link
              linkend="porting-masterdir">hardcoded defaults</link> (normalmente
            parte do nome do diret&oacute;rio na familia do ports), a
            parte <replaceable>-compiled.specifics</replaceable> deve state
            the compiled-in defaults (o h&iacute;fen &eacute; opcional).  Exemplos s&atilde;o
            tamanho de papel e unidades de fontes.</para>

          <para>A parte <replaceable>-compiled.specifics</replaceable>
            deve ser definido na vari&aacute;vel
            <makevar>PKGNAMESUFFIX</makevar>.</para>
        </listitem>

        <listitem>
          <para>A string da vers&atilde;o deve seguir um dash
            (<literal>-</literal>) e ser um separada-po-periodo lista de
            inteiros e single lowercase alphabetics.  Em particular,
            n&atilde;o &eacute; permissivel ter um outro dash dentro da string
            da vers&atilde;o.  A &uacute;nica exece&ccedil;&atilde;o &eacute; a string
            <literal>pl</literal> (meaning <quote>patchlevel</quote>), qual pode ser
            usada <emphasis>somente</emphasis> quando n&atilde;o h&aacute; numeros de vers&atilde;o
            maior e menor no software.  Se a vers&atilde;o
            do software tem strings como <quote>alpha</quote>, <quote>beta</quote>, <quote>rc</quote>, ou <quote>pre</quote>, pegue
            a primeira letra e coloque-a imediatamente depois de um periodo.
            Se a string da vers&atilde;o continua depois daqueles nomes, os
            numeros devem seguir o alfabeto somente sem um periodo extra
            entre eles.</para>

          <para>A id&eacute;ia &eacute; faze-lo mais f&aacute;cil para sortir os ports considerando
            a string da vers&atilde;o.  Em particular, certifique-se que o numero da vers&atilde;o
            dos componentes est&atilde;o sempre delimitados por um periodo, e
            se a data &eacute; parte  da string, use o formato
            <literal><replaceable>yyyy</replaceable>.<replaceable>mm</replaceable>.<replaceable>dd</replaceable></literal>
            , n&atilde;o
            <literal><replaceable>dd</replaceable>.<replaceable>mm</replaceable>.<replaceable>yyyy</replaceable></literal>
            ou a n&atilde;o-Y2K compliant
            <literal><replaceable>yy</replaceable>.<replaceable>mm</replaceable>.<replaceable>dd</replaceable></literal>
            format.</para>
        </listitem>
      </orderedlist>

      <para>Aqui est&aacute; alguns exemplos (reais) em como converter o nome
        assim chamado pelos autores do software a um nome de pacote
         suitable:</para>

      <informaltable frame="none">
        <tgroup cols="6">
          <thead>
            <row>
              <entry>Distribution Name</entry>
              <entry><makevar>PKGNAMEPREFIX</makevar></entry>
              <entry><makevar>PORTNAME</makevar></entry>
              <entry><makevar>PKGNAMESUFFIX</makevar></entry>
              <entry><makevar>PORTVERSION</makevar></entry>
              <entry>Reason</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>mule-2.2.2</entry>
              <entry>(empty)</entry>
              <entry>mule</entry>
              <entry>(empty)</entry>
              <entry>2.2.2</entry>
              <entry>No changes required</entry>
            </row>

            <row>
              <entry>XFree86-3.3.6</entry>
              <entry>(empty)</entry>
              <entry>XFree86</entry>
              <entry>(empty)</entry>
              <entry>3.3.6</entry>
              <entry>No changes required</entry>
            </row>

            <row>
              <entry>EmiClock-1.0.2</entry>
              <entry>(empty)</entry>
              <entry>emiclock</entry>
              <entry>(empty)</entry>
              <entry>1.0.2</entry>
              <entry>No uppercase names for single programs</entry>
            </row>

            <row>
              <entry>rdist-1.3alpha</entry>
              <entry>(empty)</entry>
              <entry>rdist</entry>
              <entry>(empty)</entry>
              <entry>1.3.a</entry>
              <entry>No strings like <literal>alpha</literal>
                allowed</entry>
            </row>

            <row>
              <entry>es-0.9-beta1</entry>
              <entry>(empty)</entry>
              <entry>es</entry>
              <entry>(empty)</entry>
              <entry>0.9.b1</entry>
              <entry>No strings like <literal>beta</literal>
                allowed</entry>
            </row>

            <row>
              <entry>mailman-2.0rc3</entry>
              <entry>(empty)</entry>
              <entry>mailman</entry>
              <entry>(empty)</entry>
              <entry>2.0.r3</entry>
              <entry>No strings like <literal>rc</literal>
                allowed</entry>
            </row>

            <row>
              <entry>v3.3beta021.src</entry>
              <entry>(empty)</entry>
              <entry>tiff</entry>
              <entry>(empty)</entry>
              <entry>3.3</entry>
              <entry>What the heck was that anyway?</entry>
            </row>

            <row>
              <entry>tvtwm</entry>
              <entry>(empty)</entry>
              <entry>tvtwm</entry>
              <entry>(empty)</entry>
              <entry>pl11</entry>
              <entry>Version string always required</entry>
            </row>

            <row>
              <entry>piewm</entry>
              <entry>(empty)</entry>
              <entry>piewm</entry>
              <entry>(empty)</entry>
              <entry>1.0</entry>
              <entry>Version string always required</entry>
            </row>

            <row>
              <entry>xvgr-2.10pl1</entry>
              <entry>(empty)</entry>
              <entry>xvgr</entry>
              <entry>(empty)</entry>
              <entry>2.10.1</entry>
              <entry><literal>pl</literal> allowed only when no
                major/minor version numbers</entry>
            </row>

            <row>
              <entry>gawk-2.15.6</entry>
              <entry>ja-</entry>
              <entry>gawk</entry>
              <entry>(empty)</entry>
              <entry>2.15.6</entry>
              <entry>Japanese language version</entry>
            </row>

            <row>
              <entry>psutils-1.13</entry>
              <entry>(empty)</entry>
              <entry>psutils</entry>
              <entry>-letter</entry>
              <entry>1.13</entry>
              <entry>Papersize hardcoded at package build time</entry>
            </row>

            <row>
              <entry>pkfonts</entry>
              <entry>(empty)</entry>
              <entry>pkfonts</entry>
              <entry>300</entry>
              <entry>1.0</entry>
              <entry>Package for 300dpi fonts</entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>

      <para>Se h&aacute; absolutamnete nenhum tra&ccedil;o da informa&ccedil;&atilde;o da vers&atilde;o no
        fonte original e ele &eacute; unlikely original que o autor sempre liberar&aacute;
        uma outra vers&atilde;o, s&oacute; defina a string da vers&atilde;o a
        <literal>1.0</literal> (como o <literal>piewm</literal> exemplo acima).  Caso contr&aacute;rio, pergunte
        o autor do original ou use a string da data
        (<literal><replaceable>yyyy</replaceable>.<replaceable>mm</replaceable>.<replaceable>dd</replaceable></literal>)
	as the version.</para>
    </sect2>
    </sect1>

    <sect1 id="makefile-categories">
      <title>Categoriza&ccedil;&atilde;o</title>

      <sect2>
        <title><makevar>CATEGORIAS</makevar></title>

        <para>Quando um pacote &eacute; criado, ele &eacute; colocado baixo de
          <filename>/usr/ports/packages/All</filename> e links s&atilde;o feitos de
          um ou mais subdiret&oacute;rios do
          <filename>/usr/ports/packages</filename>.  Os nomes destes
          subdiret&oacute;rios s&atilde;o especificados pela vari&aacute;vel
          <makevar>CATEGORIES</makevar>.  It is intended to fazer a vida mais f&aacute;cil
          para os usu&aacute;rios quando ele est&aacute; andando na pilha de pacotes no
          site FTP ou CDROM.  Por favor take a look at the existing <link
            linkend="porting-categories">categories</link> and pick the ones
          that are suitable para seu port.</para>

        <para>Esta lista tamb&eacute;m determina onde na arvore do ports o port  est&aacute;
          importado.  Se voc&ecirc; colocar mais que uma categoria aqui, it &eacute; assumed
          that os arquivos do port ser&atilde;o colocados no subdiret&oacute;rio com o nome na
          primeira categoria.  Veja a se&ccedil;&atilde;o <link
            linkend="porting-categories">categories</link> para mais
          discuss&otilde;es sobre como escolher as categorias certas.</para>

        <para>Se seu port realmente pertence a algo que &eacute; diferente de
          todos os existentes, voc&ecirc; pode at&eacute; criar uma novo nome da categoria.  Nesse
          caso, por favor envie um mail para os &a.ports; para propor uma nova
          categoria.</para>
      </sect2>

      <sect2 id="porting-categories">
        <title>Lista atual das categorias</title>

        <para>Primeiro, esta &eacute; a lista atual de categorias dos ports.  Aquelas
          marcadas com um asterisco (<literal>*</literal>) s&atilde;o
          categorias&mdash; <emphasis>virtuais</emphasis> aquelas que n&atilde;o teem
          um subdiret&oacute;rio correspondente na arvore do ports.</para>

        <note>
          <para>Para categorias n&atilde;o-virtuais, voc&ecirc; encontrar&aacute; uma
            descri&ccedil;&atilde;o de uma-linha no arquivo <filename>pkg/COMMENT</filename> naquele
            subdiret'rrio (ex.,
            <filename>archivers/pkg/COMMENT</filename>).</para>
        </note>

        <informaltable frame="none">
          <tgroup cols="2">
            <thead>
              <row>
                <entry>Category</entry>
                <entry>Description</entry>
              </row>
            </thead>

            <tbody>
              <row>
                <entry><filename>accessibility*</filename></entry>
                <entry>Ports to help disabled users.</entry>
              </row>

              <row>
                <entry><filename>afterstep*</filename></entry>
                <entry>Ports to support the AfterStep window manager.</entry>
              </row>

              <row>
                <entry><filename>arabic</filename></entry>
                <entry>Arabic language support.</entry>
              </row>

              <row>
                <entry><filename>archivers</filename></entry>
                <entry>Archiving tools.</entry>
              </row>

              <row>
                <entry><filename>astro</filename></entry>
                <entry>Astronomical ports.</entry>
              </row>

              <row>
                <entry><filename>audio</filename></entry>
                <entry>Sound support.</entry>
              </row>

              <row>
                <entry><filename>benchmarks</filename></entry>
                <entry>Benchmarking utilities.</entry>
              </row>

              <row>
                <entry><filename>biology</filename></entry>
                <entry>Biology-related software.</entry>
              </row>

              <row>
                <entry><filename>cad</filename></entry>
                <entry>Computer aided design tools.</entry>
              </row>

              <row>
                <entry><filename>chinese</filename></entry>
                <entry>Chinese language support.</entry>
              </row>

              <row>
                <entry><filename>comms</filename></entry>
                <entry>Communication software.  Mostly software to talk to
                  your serial port.</entry>
              </row>

              <row>
                <entry><filename>converters</filename></entry>
                <entry>Character code converters.</entry>
              </row>

              <row>
                <entry><filename>databases</filename></entry>
                <entry>Databases.</entry>
              </row>

              <row>
                <entry><filename>deskutils</filename></entry>
                <entry>Things that used to be on the desktop before
                  computers were invented.</entry>
              </row>

              <row>
                <entry><filename>devel</filename></entry>
                <entry>Development utilities.  Do not put libraries here just
                  because they are libraries&mdash;unless they truly do not
                  belong anywhere else, they should not be in this
                  category.</entry>
              </row>

	      <row>
		<entry><filename>dns</filename></entry>
		<entry>DNS-related software.</entry>
	      </row>
	      
              <row>
                <entry><filename>editors</filename></entry>
                <entry>General editors.  Specialized editors go in the section
                  for those tools (e.g., a mathematical-formula editor will go
                  in <filename>math</filename>).</entry>
              </row>

              <row>
                <entry><filename>elisp*</filename></entry>
                <entry>Emacs-lisp ports.</entry>
              </row>

              <row>
                <entry><filename>emulators</filename></entry>
                <entry>Emulators for other operating systems.  Terminal
                  emulators do <emphasis>not</emphasis> belong
                  here&mdash;X-based ones should go to
                  <filename>x11</filename> and text-based ones to either
                  <filename>comms</filename> or <filename>misc</filename>,
                  depending on the exact functionality.</entry>
              </row>

              <row>
                <entry><filename>finance</filename></entry>
                <entry>Monetary, financial and related applications.</entry>
              </row>

              <row>
                <entry><filename>french</filename></entry>
                <entry>French language support.</entry>
              </row>

              <row>
                <entry><filename>ftp</filename></entry>
                <entry>FTP client and server utilities.  If your
                  port speaks both FTP and HTTP, put it in
                  <filename>ftp</filename> with a secondary
                  category of <filename>www</filename>.</entry>
              </row>

              <row>
                <entry><filename>games</filename></entry>
                <entry>Games.</entry>
              </row>

              <row>
                <entry><filename>german</filename></entry>
                <entry>German language support.</entry>
              </row>

              <row>
                <entry><filename>gnome*</filename></entry>
                <entry>Ports from the GNU Object Model Environment (GNOME)
                  Project.</entry>
              </row>

              <row>
                <entry><filename>graphics</filename></entry>
                <entry>Graphics utilities.</entry>
              </row>

              <row>
                <entry><filename>haskell*</filename></entry>
                <entry>Software related to the Haskell language.</entry>
              </row>

              <row>
                <entry><filename>hebrew</filename></entry>
                <entry>Hebrew language support.</entry>
              </row>

              <row>
                <entry><filename>hungarian</filename></entry>
                <entry>Hungarian language support.</entry>
              </row>

              <row>
                <entry><filename>ipv6*</filename></entry>
                <entry>IPv6 related software.</entry>
              </row>

              <row>
                <entry><filename>irc</filename></entry>
                <entry>Internet Relay Chat utilities.</entry>
              </row>

              <row>
                <entry><filename>japanese</filename></entry>
                <entry>Japanese language support.</entry>
              </row>

              <row>
                <entry><filename>java</filename></entry>
                <entry>Software related to the Java language.</entry>
              </row>

              <row>
                <entry><filename>kde*</filename></entry>
                <entry>Ports from the K Desktop Environment (KDE)
                  Project.</entry>
              </row>

              <row>
                <entry><filename>korean</filename></entry>
                <entry>Korean language support.</entry>
              </row>

              <row>
                <entry><filename>lang</filename></entry>
                <entry>Programming languages.</entry>
              </row>

              <row>
                <entry><filename>linux*</filename></entry>
                <entry>Linux applications and support utilities.</entry>
              </row>

              <row>
                <entry><filename>lisp*</filename></entry>
                <entry>Software related to the Lisp language.</entry>
              </row>

              <row>
                <entry><filename>mail</filename></entry>
                <entry>Mail software.</entry>
              </row>

              <row>
                <entry><filename>math</filename></entry>
                <entry>Numerical computation software and other utilities
                  for mathematics.</entry>
              </row>

              <row>
                <entry><filename>mbone</filename></entry>
                <entry>MBone applications.</entry>
              </row>

              <row>
                <entry><filename>misc</filename></entry>
                <entry>Miscellaneous utilities&mdash;basically things that
                  do not belong anywhere else.  This is the only category
                  that should not appear with any other non-virtual category.
                  If you have <literal>misc</literal> with something else in
                  your <makevar>CATEGORIES</makevar> line, that means you can
                  safely delete <literal>misc</literal> and just put the port
                  in that other subdirectory!</entry>
              </row>

              <row>
                <entry><filename>multimedia</filename></entry>
                <entry>Multimedia software.</entry>
              </row>

              <row>
                <entry><filename>net</filename></entry>
                <entry>Miscellaneous networking software.</entry>
              </row>

              <row>
                <entry><filename>news</filename></entry>
                <entry>USENET news software.</entry>
              </row>

              <row>
                <entry><filename>offix*</filename></entry>
                <entry>Ports from the OffiX suite.</entry>
              </row>

              <row>
                <entry><filename>palm</filename></entry>
                <entry>Software support for the Palm(tm) series.</entry>
              </row>

              <row>
                <entry><filename>parallel*</filename></entry>
                <entry>Applications dealing with parallelism in computing.</entry>
              </row>

              <row>
                <entry><filename>pear*</filename></entry>
                <entry>Ports related to the Pear PHP framework.</entry>
              </row>

              <row>
                <entry><filename>perl5*</filename></entry>
                <entry>Ports that require <literal>perl</literal> version 5 to run.</entry>
              </row>

              <row>
                <entry><filename>picobsd</filename></entry>
                <entry>Ports to support PicoBSD.</entry>
              </row>

              <row>
                <entry><filename>plan9*</filename></entry>
                <entry>Various programs from Plan9.</entry>
              </row>

	      <row>
		<entry><filename>polish</filename></entry>
		<entry>Polish language support.</entry>
	      </row>

              <row>
                <entry><filename>portuguese</filename></entry>
                <entry>Portuguese language support.</entry>
              </row>

              <row>
                <entry><filename>print</filename></entry>
                <entry>Printing software.  Desktop publishing tools
                  (previewers, etc.) belong here too.</entry>
              </row>

              <row>
                <entry><filename>python*</filename></entry>
                <entry>Software related to the Python language.</entry>
              </row>

              <row>
                <entry><filename>ruby*</filename></entry>
                <entry>Software related to the Ruby language.</entry>
              </row>

              <row>
                <entry><filename>russian</filename></entry>
                <entry>Russian language support.</entry>
              </row>

              <row>
                <entry><filename>science</filename></entry>
                <entry>Scientific ports that do not fit into other
                  categories such as <filename>astro</filename>,
                  <filename>biology</filename> and
                  <filename>math</filename>.</entry>
              </row>

              <row>
                <entry><filename>security</filename></entry>
                <entry>Security utilities.</entry>
              </row>

              <row>
                <entry><filename>shells</filename></entry>
                <entry>Command line shells.</entry>
              </row>

              <row>
                <entry><filename>sysutils</filename></entry>
                <entry>System utilities.</entry>
              </row>

              <row>
                <entry><filename>tcl76*</filename></entry>
                <entry>Ports that use Tcl version 7.6 to run.</entry>
              </row>

              <row>
                <entry><filename>tcl80*</filename></entry>
                <entry>Ports that use Tcl version 8.0 to run.</entry>
              </row>

              <row>
                <entry><filename>tcl81*</filename></entry>
                <entry>Ports that use Tcl version 8.1 to run.</entry>
              </row>

              <row>
                <entry><filename>tcl82*</filename></entry>
                <entry>Ports that use Tcl version 8.2 to run.</entry>
              </row>

              <row>
                <entry><filename>tcl83*</filename></entry>
                <entry>Ports that use Tcl version 8.3 to run.</entry>
              </row>

              <row>
                <entry><filename>textproc</filename></entry>
                <entry>Text processing utilities.  It does not include
                  desktop publishing tools, which go to <filename>print</filename>.</entry>
              </row>

              <row>
                <entry><filename>tk42*</filename></entry>
                <entry>Ports that use Tk version 4.2 to run.</entry>
              </row>

              <row>
                <entry><filename>tk80*</filename></entry>
                <entry>Ports that use Tk version 8.0 to run.</entry>
              </row>

              <row>
                <entry><filename>tk81*</filename></entry>
                <entry>Ports that use Tk version 8.1 to run.</entry>
              </row>

              <row>
                <entry><filename>tk82*</filename></entry>
                <entry>Ports that use Tk version 8.2 to run.</entry>
              </row>

              <row>
                <entry><filename>tk83*</filename></entry>
                <entry>Ports that use Tk version 8.3 to run.</entry>
              </row>

              <row>
                <entry><filename>tkstep80*</filename></entry>
                <entry>Ports that use TkSTEP version 8.0 to run.</entry>
              </row>

              <row>
                <entry><filename>ukrainian</filename></entry>
                <entry>Ukrainian language support.</entry>
              </row>

              <row>
                <entry><filename>vietnamese</filename></entry>
                <entry>Vietnamese language support.</entry>
              </row>

              <row>
                <entry><filename>windowmaker*</filename></entry>
                <entry>Ports to support the WindowMaker window
                  manager.</entry>
              </row>

              <row>
                <entry><filename>www</filename></entry>
                <entry>Software related to the World Wide Web.  HTML language
                  support belongs here too.</entry>
              </row>

              <row>
                <entry><filename>x11</filename></entry>
                <entry>The X Window System and friends.  This category is only
                  for software that directly supports the window system.  Do not
                  put regular X applications here.  If your port is an X
                  application, define <makevar>USE_XLIB</makevar> (implied by
                  <makevar>USE_IMAKE</makevar>) and put it in the appropriate
                  categories.  Also, many of them go into other
                  <filename>x11-*</filename> categories (see below).</entry>
              </row>

              <row>
                <entry><filename>x11-clocks</filename></entry>
                <entry>X11 clocks.</entry>
              </row>

              <row>
                <entry><filename>x11-fm</filename></entry>
                <entry>X11 file managers.</entry>
              </row>

              <row>
                <entry><filename>x11-fonts</filename></entry>
                <entry>X11 fonts and font utilities.</entry>
              </row>

              <row>
                <entry><filename>x11-servers</filename></entry>
                <entry>X11 servers.</entry>
              </row>

              <row>
                <entry><filename>x11-toolkits</filename></entry>
                <entry>X11 toolkits.</entry>
              </row>

              <row>
                <entry><filename>x11-wm</filename></entry>
                <entry>X11 window managers.</entry>
              </row>

              <row>
                <entry><filename>zope*</filename></entry>
                <entry>Zope support.</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>
      </sect2>

      <sect2>
        <title>Escolhendo a categoria certa</title>

        <para>Como muitas das categorias coincidem, voc&ecirc; frequentemente tem que escolher
          qual das categorias deve ser a categoria prim&aacute;ria de seu port.
          H&aacute; v&aacute;rias regras que governam esta quest&atilde;o.  Aqui est&aacute; a lista de
          prioridades, em diminuindo a ordem de precedencia:</para>

        <itemizedlist>
          <listitem>
            <para>Categorias espec&iacute;fica de lingua sempre vem primeiro.  Por
              exemplo, se seu port instala fontes X11 Japonesas, ent&atilde;o sua
              linha de <makevar>CATEGORIES</makevar> leria <filename>japanese
                x11-fonts</filename>.</para>
          </listitem>

          <listitem>
            <para>Categorias espec&iacute;ficas conquistam as menos-espec&iacute;ficas.  Para
              instancia, um editor HTML deve ser listado como <filename>www
                editors</filename>, n&atilde;o the other way around.  Tamb&eacute;m, voc&ecirc; n&atilde;o
              precisa listar <filename>net</filename> quando o port pertence a
              quaisquer do <filename>irc</filename>, <filename>mail</filename>,
              <filename>mbone</filename>, <filename>news</filename>,
              <filename>security</filename>, ou <filename>www</filename>.</para>
          </listitem>

          <listitem>
            <para><filename>x11</filename> &eacute; usado como uma categoria secund&aacute;ria somente
              quando a categoria prim&aacute;ria &eacute; uma lingua natural.  Em particular,
              voc&ecirc; n&atilde;o deve colocar <filename>x11</filename> na linha de categoria
              para aplica&ccedil;&otilde;es do X.</para>
          </listitem>

          <listitem>
            <para><application>Emacs</application> modes devem ser
	      colocados na mesma categoria do ports como a aplica&ccedil;&atilde;o
	      suportada pelo o mode, n&atilde;o em
	      <filename>editors</filename>.  Por exemplo, um
	      <application>Emacs</application> mode para editar arquivos
	      fontes de algumas linguagens de programa&ccedil;&atilde;o deve entrar em
	      <filename>lang</filename>.
              </para>
          </listitem>

          <listitem>
            <para>Se seu port realmente n&atilde;o pertence a nenhum local mais, coloque-o em
              <filename>misc</filename>.</para>
          </listitem>
        </itemizedlist>

        <para>Se voc&ecirc; n&atilde;o est&aacute; certo sobre que categoria, por favor coloque um coment&aacute;rio para
          que effect em seu &man.send-pr.1; submission so n&oacute;s podemos
          discut&iacute;-lo antes que n&oacute;s o importemos.  Se voc&ecirc; &eacute; um committer, envie uma nota
          para o &a.ports; assim n&oacute;s podemos discut&iacute;-lo primeiro&mdash;muito frequentemente novos
          ports s&atilde;o importados a categoria errada somente para ser movidos para certa.</para>
      </sect2>
    </sect1>

    <sect1 id="makefile-distfiles">
      <title>Os arquivos de distribui&ccedil;&atilde;o</title>

      <para>A segunda parte do <filename>Makefile</filename> descreve os
	arquivos que tem que ser obtidos em ordem para construir o port, e de onde
	eles podem ser obtidos.</para>

      <sect2>
        <title><makevar>DISTNAME</makevar></title>

        <para><makevar>DISTNAME</makevar> &eacute; o nome do port assim
          chamado pelos autores do software.
          <makevar>DISTNAME</makevar> defaults to
          <literal>${PORTNAME}-${PORTVERSION}</literal>, so override it se necess&aacute;rio.
          <makevar>DISTNAME</makevar> &eacute; somente usado em dois lugares.
          Primeiro, a lista do arquivo de distribui&ccedil;&atilde;o
          (<makevar>DISTFILES</makevar>) defaults to
          <makevar>${DISTNAME}</makevar><makevar>${EXTRACT_SUFX}</makevar>.
          Segundo, o arquivo de distribui&ccedil;&atilde;o &eacute; experado para extrair dentro de um
          subdiret&oacute;rio chamado <makevar>WRKSRC</makevar>, qual defaults
          a <filename>work/<makevar>${DISTNAME}</makevar></filename>.</para>

	<note>
          <para><makevar>PKGNAMEPREFIX</makevar> e
            <makevar>PKGNAMESUFFIX</makevar> n&atilde;o afeta
            <makevar>DISTNAME</makevar>.  Tamb&eacute;m note que quando
            <makevar>WRKSRC</makevar> &eacute; igual ao
            <filename>work/<makevar>${PORTNAME}-${PORTVERSION}</makevar></filename>
            while o arquivo fonte original &eacute; chamado algo outro que
            <makevar>${PORTNAME}-${PORTVERSION}${EXTRACT_SUFX}</makevar>,
            voc&ecirc; deve provavelmente deixar <makevar>DISTNAME</makevar>
            alone&mdash; voc&ecirc; est&aacute; melhor definindo
            <makevar>DISTFILES</makevar> que tendo que definir ambos
            <makevar>DISTNAME</makevar> e <makevar>WRKSRC</makevar>
            (and possibly <makevar>EXTRACT_SUFX</makevar>).</para>
	</note>
      </sect2>

      <sect2>
        <title><makevar>MASTER_SITES</makevar></title>

        <para>Record a parte do diret&oacute;rio do FTP/HTTP-URL apontando no
          original tarball em <makevar>MASTER_SITES</makevar>.  N&atilde;o esque&ccedil;a
          the trailing slash (<filename>/</filename>)!</para>

        <para>Os macros do <command>make</command> tentar&atilde;o usar esta
          especifica&ccedil;&atilde;o para grabbing o arquivo de distribui&ccedil;&atilde;o com
          <makevar>FETCH</makevar> se eles n&atilde;o podem encontra-lo j&aacute; no
          sistema.</para>

        <para>It is recommended que voc&ecirc; coloque multiplos sites nesta lista,
          preferencialmente de continentes diferentes.  Isto proteger&aacute; contra
          problemas de rede de area-distantes, e n&oacute;s estamos at&eacute; planejando adicionar suporte
          para determinar automaticamente o mais pr&oacute;ximo master site e fetching
          de l&aacute;!</para>

        <para>Se o original tarball &eacute; parte de um dos arquivos populares
          como X-contrib, GNU, ou Perl CPAN, voce pode ser capaz
          referenciar a aqueles sites em uma forma f&aacute;cil e compacta usando
          <makevar>MASTER_SITE_<replaceable>*</replaceable></makevar>
          (ex., <makevar>MASTER_SITE_XCONTRIB</makevar> e
          <makevar>MASTER_SITE_PERL_GNU</makevar>).  Simplesmente defina
          <makevar>MASTER_SITES</makevar> a uma dessas vari&aacute;veis e 
          <makevar>MASTER_SITE_SUBDIR</makevar> ao path com o
          arquivo.  Aqui est&aacute; um exemplo:</para>

        <programlisting>MASTER_SITES=         ${MASTER_SITE_XCONTRIB}
MASTER_SITE_SUBDIR=   applications</programlisting>

        <para>Estas vari&aacute;veis s&atilde;o definidas em
          <filename>/usr/ports/Mk/bsd.sites.mk</filename>.  H&aacute;
          novos arquivos adicionados todo o tempo, assim certifique-se de verificar a
          ultima vers&atilde;o deste arquivo antes do envio de um port.</para>

        <para>O usu&aacute;rio pode tamb&eacute;m definir as vari&aacute;veis <makevar>MASTER_SITE_*</makevar>
          em <filename>/etc/make.conf</filename> para override nossas
          escolhas, e usar seus mirrors favoritos destes arquivos populares
          ao inv&eacute;s.</para>
      </sect2>

      <sect2>
	<title><makevar>EXTRACT_SUFX</makevar></title>

	<para>Se voc&ecirc; tem um arquivo de ditribui&ccedil;&atilde;o, e ele usa um antigo sufixo para
	  indicar o mecanismo de compress&atilde;o, defina
	  <makevar>EXTRACT_SUFX</makevar>.</para>
	
	<para>Por exemplo, se o arquivo de distribui&ccedil;&atilde;o foi chamado
	  <filename>foo.tgz</filename> ao inv&eacute;s do mais normal
	  <filename>foo.tar.gz</filename>, voc&ecirc; escreveria:</para>

	<programlisting>DISTNAME=      foo
EXTRACT_SUFX=  .tgz</programlisting>

	<para>As vari&aacute;veis <makevar>USE_BZIP2</makevar> e <makevar>USE_ZIP</makevar>
	  automaticamente defina <makevar>EXTRACT_SUFX</makevar> a
	  <literal>.bz2</literal> ou <literal>.zip</literal> como necess&aacute;rio.  Se
	  neither destes s&atilde;o definidos ent&atilde;o <makevar>EXTRACT_SUFX</makevar>
	  defaults to <literal>.tar.gz</literal>.</para>

	<para>Voc&ecirc; nunca precisou definir ambos <makevar>EXTRACT_SUFX</makevar> e
	  <makevar>DISTFILES</makevar>.</para>
      </sect2>

      <sect2>
	<title><makevar>DISTFILES</makevar></title>

	<para>Algumas vezes os nomes dos arquivos para ser obtidos tem que n&atilde;o
	  parecer com o nome do port.  Por exemplo, ele pode ser
	  chamado <filename>source.tar.gz</filename> ou similar.  Em outros
	  casos os c&oacute;digos fontes da aplica&ccedil;&atilde;o pode be em v&aacute;rios arquivos
	  diferentes, todo do qual tem que ser obtido.</para>

	<para>Se este &eacute; o caso, defina <makevar>DISTFILES</makevar> para ser uma
	  lista separada de espa&ccedil;o de todos os arquivos que tem que ser
	  obtidos.</para>

	<programlisting>DISTFILES=     source1.tar.gz source2.tar.gz</programlisting>

	<para>Se n&atilde;o explicitamente definido, <makevar>DISTFILES</makevar> defaults to
	  <literal>${DISTNAME}${EXTRACT_SUFX}</literal>.</para>
      </sect2>

      <sect2>
	<title><makevar>EXTRACT_ONLY</makevar></title>

	<para>Se somente alguns dos <makevar>DISTFILES</makevar> tem que ser
	  extraidos&mdash;por exemplo, um deles &eacute; o c&oacute;digo fonte, enquanto
	  um outro &eacute; um documento uncompressed&mdash;lista os nomes de arquivos que
	  tem que ser extraido em <makevar>EXTRACT_ONLY</makevar>.</para>

	<programlisting>DISTFILES=     source.tar.gz manual.html
EXTRACT_ONLY=  source.tar.gz</programlisting>

	<para>Se <emphasis>nenhum</emphasis> dos <makevar>DISTFILES</makevar>
	  deve ser uncompressed ent&atilde;o defina <makevar>EXTRACT_ONLY</makevar> a
	  string vazia.</para>

	<programlisting>EXTRACT_ONLY=</programlisting>
      </sect2>

      <sect2 id="porting-patchfiles">
        <title><makevar>PATCHFILES</makevar></title>

        <para>Se seu port precisa algums patches adicionais que est&atilde;o dispon&iacute;veis
          por FTP ou HTTP, defina <makevar>PATCHFILES</makevar> aos nomes dos
          arquivos e <makevar>PATCH_SITES</makevar> a URL do
          diret&oacute;rio que os cont&eacute;m (o formato &eacute;  o mesmo assim
          <makevar>MASTER_SITES</makevar>).</para>

        <para>Se o patch n&atilde;o &eacute; relativo ao top da arvore do fonte
          (i.e., <makevar>WRKSRC</makevar>) porque ele cont&eacute;m algums pathnames
           extras, defina <makevar>PATCH_DIST_STRIP</makevar> accordingly. Para
          inst&acirc;ncia, se todos os pathnames no patch tem um extra
          <literal>foozolix-1.0/</literal> em frente dos nomes dos arquivos, ent&atilde;o defina
          <literal>PATCH_DIST_STRIP=-p1</literal>.</para>

        <para>N&atilde;o se preocupe se os patches est&atilde;o compressed; eles ser&atilde;o
          decompressed automaticamnte os nomes dos arquivos finalizados com
          <filename>.gz</filename> ou <filename>.Z</filename>.</para>

        <para>Se o patch &eacute; distribu&iacute;do com alguns outros arquivos, como
          documenta&ccedil;&atilde;o, em um gzip'd tarball, voc&ecirc; n&atilde;o pode somente usar
          <makevar>PATCHFILES</makevar>.  Se aquele &eacute; o caso, adicione o nome
          e a localiza&ccedil;&atilde;o do patch tarball ao
          <makevar>DISTFILES</makevar> e <makevar>MASTER_SITES</makevar>.
          Ent&atilde;o, use a vari&aacute;vel <makevar>EXTRA_PATCHES</makevar> para
          indicar aqueles arquivos e <filename>bsd.port.mk</filename>
          automaticamente aplicar&atilde;o-lhes para voc&ecirc;.  Em particular,
          <emphasis>n&atilde;o</emphasis> copie arquivos patch dentro do
          diret&oacute;rio&mdash; <makevar>PATCHDIR</makevar> aquele diret&oacute;rio pode
          n&atilde;o ser grav&aacute;vel.</para>

        <note>
          <para>O tarball ter&aacute; que ser extraido alongside the
            regular source by then, assim n&atilde;o h&aacute; necessidade para extrair explicitamente
            it se ele &eacute; um regular gzip'd ou compress'd tarball. Se voc&ecirc; fazer o
            latter, tome cuidado extra  para n&atilde;o overwrite alguma coisa que j&aacute;
            existe naquele diret&oacute;rio.  Tamb&eacute;m, n&atilde;o esque&ccedil;a de adicionar um comando para
            remover o patch copiado no <maketarget>pre-clean</maketarget>
            target.</para>
        </note>
      </sect2>

      <sect2 id="porting-master-sites-n">
	<title>Arquivos de distribu&ccedil;&atilde;o multipla ou patches de diferentes
	  sites e subdiret&oacute;rios
	  (<literal>MASTER_SITES:n</literal>)</title>

	<para>Esta se&ccedil;&atilde;o tinha informa&ccedil;&atilde;o sobre o mecanismo busca
	  conhecido como ambos <literal>MASTER_SITES:n</literal> e
	  <literal>MASTER_SITES_NN</literal>.  N&oacute;s referenciaremos a este
	  mecanismo assim <literal>MASTER_SITES:n</literal>
	  hereon.</para>

	<para>A little background first.  OpenBSD tem uma engenhosa caracteristica
	  dentro de ambas vari&aacute;veis <makevar>DISTFILES</makevar> e
	  <makevar>PATCHFILES</makevar>, ambos arquivos e
	  patches podem ser postfixed com identificadores <literal>:n</literal>
	  onde <literal>n</literal> ambos podem ser
	  <literal>[0-9]</literal> e denotar um grupo designa&ccedil;&atilde;o.
	  Por exemplo:</para>

	<programlisting>DISTFILES=      alpha:0 beta:1</programlisting>

	<para>No OpenBSD, o arquivo de distribui&ccedil;&atilde;o <filename>alpha</filename>
	  estar&aacute; associado com a vari&aacute;vel
	  <makevar>MASTER_SITES0</makevar> ao inv&eacute;s de nosso comum
	  <makevar>MASTER_SITES</makevar> e
	  <filename>beta</filename> com
	  <makevar>MASTER_SITES1</makevar>.</para>

	<para>Isto &eacute; uma caracter&iacute;stica muito interessante qual pode diminuir
	  aquela intermin&aacute;vel procura ao correto site para a obten&ccedil;&atilde;o.</para>

	<para>Just picture 2 files in <makevar>DISTFILES</makevar> e
	  20 sites em <makevar>MASTER_SITES</makevar>, os sites slow
	  as hell where <filename>beta</filename> est&aacute; carried by all
	  sites em <makevar>MASTER_SITES</makevar>, e
	  <filename>alpha</filename> pode somente ser encontrado no 20th
	  site.  It would be such a waste to verificar todos all of them se
	  maintainer knew this beforehand, would not it?  N&atilde;o &eacute; um bom
	  come&ccedil;o para aquele fim-de-semana agrad&aacute;vel!</para>

	<para>Agora que voc&ecirc; got the picture, s&oacute; imagine mais
	  <makevar>DISTFILES</makevar> e mais
	  <makevar>MASTER_SITES</makevar>.  Certamente nossos
	  <quote>distfiles survey meister</quote> would appreciate the
	  network strain relieve this would bring.</para>

	<para>Nas pr&oacute;ximas se&ccedil;&otilde;es, informa&ccedil;&atilde;o seguir&aacute; na
	  implementa&ccedil;&atilde;o FreeBSD desta id&eacute;ia.	N&oacute;s melhoramos um pouco o
	  conceito do OpenBSD.</para>

	<sect3>
	  <title>Informa&ccedil;&atilde;o Simplificada</title>

	  <para>Esta se&ccedil;&atilde;o lhe diz como preparar rapidamente fine
	    grained buscando de arquivos de distribu&ccedil;&atilde;o multipla e
	    patches de diferentes sites e subdiret&oacute;rios.  N&oacute;s
	    descrevemos aqui um caso simplificado
	    <literal>MASTER_SITES:n</literal> usage.  Isto ser&aacute;
	    suficiente para most scenarios.  Entretanto, se voc&ecirc; precisar
	    further informa&ccedil;&atilde;o, voc&ecirc; ter&aacute; que referir ao pr&oacute;xima
	    se&ccedil;&atilde;o.</para>

	  <para>Algumas aplica&ccedil;&otilde;es consiste de multiplos arquivos de distribu&ccedil;&atilde;o
	    que tem que ser obtidos deum numero de diferentes
	    sites.  Por exemplo,
	    <application>Ghostscript</application> consiste do
	    core do programa, e ent&atilde;o um grande numero de arquivos driver
	    que s&atilde;o usados dependendo da impressora do useu&aacute;rio.  Alguns
	    destes arquivos driver s&atilde;o fornecidos com o core, mas muitos
	    outros tem que ser obtidos dee uma variedade de diferentes
	    sites.</para>

	  <para>Para suportar isto, cada entrada em
	    <makevar>DISTFILES</makevar> pode ser seguido por um colon
	    e um <quote>tag name</quote>.  Cada site listado em
	    <makevar>MASTER_SITES</makevar> &eacute; ent&atilde;o seguido por um
	    colon, e a tag que indica quais arquivos de distribu&ccedil;&atilde;o
	    deve ser obtidos deste site.</para>

	  <para>Por exemplo, considere uma aplica&ccedil;&atilde;o com o fonte
	    dividido em duas partes, <filename>source1.tar.gz</filename>
	    e <filename>source2.tar.gz</filename>, qual tem que ser
	    obtidos de dois diferentes sites.  O
	    <filename>Makefile</filename> do port incluiria linhas como
	    <xref
	      linkend="ports-master-sites-n-example-simple-use-one-file-per-site">.</para>

	  <example
	    id="ports-master-sites-n-example-simple-use-one-file-per-site">
	    <title>Uso simplificado do <literal>MASTER_SITES:n</literal>
	      with 1 file per site</title>

	    <programlisting>MASTER_SITES=   ftp://ftp.example1.com/:source1 \
                ftp://ftp.example2.com/:source2
DISTFILES=      source1.tar.gz:source1 \
                source2.tar.gz:source2</programlisting>
	  </example>

	  <para>Arquivos de distribui&ccedil;&atilde;o multiplas podem ter a mesma tag.
	    Continuando o exemplo  anterior, suppose que havia um
	    terceiro distfile, <filename>source3.tar.gz</filename>, que
	    deve ser obtido de
	    <hostid>ftp.example2.com</hostid>.	O
	    <filename>Makefile</filename> ent&atilde;o seria escrito como
	    <xref
	      linkend="ports-master-sites-n-example-simple-use-more-than-one-file-per-site">.</para>

	  <example
	    id="ports-master-sites-n-example-simple-use-more-than-one-file-per-site">
	    <title>Uso simplificado do <literal>MASTER_SITES:n</literal>
	      com mais de 1 arquivo por site</title>

	    <programlisting>MASTER_SITES=   ftp://ftp.example1.com/:source1 \
                ftp://ftp.example2.com/:source2
DISTFILES=      source1.tar.gz:source1 \
                source2.tar.gz:source2 \
                source3.tar.gz:source2</programlisting>
	  </example>
	</sect3>

	<sect3>
	  <title>Informa&ccedil;&atilde;o detalhada</title>

	  <para>Okay, assim o exemplo da se&ccedil;&atilde;o anterior n&atilde;o refletia
	    suas necessidades?	 Nesta se&ccedil;&atilde;o n&oacute;s explicaremos em detalhes como
	    the fine grained fetching mechanism
	    <literal>MASTER_SITES:n</literal> works and how you can
	    modify your ports to use it.</para>

	  <orderedlist>
	    <listitem>
	      <para>Elementos podem ser postfixed com
		<literal>:<replaceable>n</replaceable></literal> onde
		<replaceable>n</replaceable> &eacute;
		<literal>[^:,]+</literal>, ex.,
		<replaceable>n</replaceable> pode conceitualmente ser qualquer
		string alfanumerica mas n&oacute;s o limitaremos a
		<literal>[a-zA-Z_][0-9a-zA-Z_]+</literal> por
		agora.</para>

	      <para>Alem do mais, comparamento de string &eacute; case sensitive;
		ex., <literal>n</literal> &eacute; diferente de
		<literal>N</literal>.</para>

	      <para>No entanto, as palavras seguintes  n&atilde;o podem ser usadas para
		postfixing purposes dedse que elas produzam um significado especial:
		<literal>default</literal>, <literal>all</literal> e
		<literal>ALL</literal> (elas s&atilde;o usadas internamente no
		item <xref
		  linkend="porting-master-sites-n-what-changes-in-port-targets">).
		Furthermore, <literal>DEFAULT</literal> is a special
		purpose word (verifique o item <xref
		  linkend="porting-master-sites-n-DEFAULT-group">).</para>
	    </listitem>

	    <listitem>
	      <para>Elementos postfixed com <literal>:n</literal>
		pertencem ao grupo <literal>n</literal>,
		<literal>:m</literal> pertencem ao grupo
		<literal>m</literal> e assim quarto.</para>
	    </listitem>

	    <listitem id="porting-master-sites-n-DEFAULT-group">
	      <para>Elementos sem um postfix s&atilde;o groupless, ex.,
		eles todos pertencem ao frupo especial
		<literal>DEFAULT</literal>.  Se voc&ecirc; postfix quaisquer
		elementos com <literal>DEFAULT</literal>, voc&ecirc; est&aacute; s&oacute;
		sendo redundante unless voc&ecirc; quer ter um elemento
		pertencendo a ambos <literal>DEFAULT</literal> e outros
		grupos ao mesmo tempo (verifique o item <xref
		  linkend="porting-master-sites-n-comma-operator">).</para>

	      <para>Os exemplos seguintes s&atilde;o equivalentes mas o
		primeiro deles &eacute; preferido:</para>

	      <programlisting>MASTER_SITES=   alpha

MASTER_SITES=   alpha:DEFAULT</programlisting>
	    </listitem>

	    <listitem>
	      <para>Grupos n&atilde;o s&atilde;o exclusivos, um elemento pode pertencer a
		v&aacute;rios diferentes grupos ao mesmo tempo e um grupo
		pode tamb&eacute;m ter tamb&eacute;m v&aacute;rios elementos diferentes ou
		nenhum em todos.  Elementos repetidos com o mesmo grupo
		ser&aacute; simplesmente aquilo, elementos repetidos.</para>
	    </listitem>

	    <listitem id="porting-master-sites-n-comma-operator">
	      <para>Quando voc&ecirc; quer um elemento perten&ccedil;a a v&aacute;rios
		grupos ao mesmo tempo, voc&ecirc; pode usar uma operador
		virgula (<literal>,</literal>).</para>

	      <para>Ao inv&eacute;s de repetir-lo v&aacute;rias vezes, cada vez
		com um diferente postfix, n&oacute;s podemos listar v&aacute;rios grupos
		de uma vez no unico postfix.  Para instancia,
		<literal>:m,n,o</literal> marca um elemento que
		pertence ao group <literal>m</literal>,
		<literal>n</literal> e <literal>o</literal>.</para>

	      <para>Todos os exemplos seguintes s&atilde;o equivalentes mas o
		ultimo &eacute; preferido:</para>

	      <programlisting>MASTER_SITES=   alpha alpha:SOME_SITE

MASTER_SITES=   alpha:DEFAULT alpha:SOME_SITE

MASTER_SITES=   alpha:SOME_SITE,DEFAULT

MASTER_SITES=   alpha:DEFAULT,SOME_SITE</programlisting>
	    </listitem>

	    <listitem>
	      <para>Todos sites com um given group s&atilde;o sortidos
		conforme o <makevar>MASTER_SORT_AWK</makevar>.  Todos
		grupos com <makevar>MASTER_SITES</makevar> e
		<makevar>PATCH_SITES</makevar> s&atilde;o sortidos bem
		assim.</para>
	    </listitem>

	    <listitem id="porting-master-sites-n-group-semantics">
	      <para>Grupos semantics podem ser usados em quaisquer das
		seguintes vari&aacute;veis <makevar>MASTER_SITES</makevar>,
		<makevar>PATCH_SITES</makevar>,
		<makevar>MASTER_SITE_SUBDIR</makevar>,
		<makevar>PATCH_SITE_SUBDIR</makevar>,
		<makevar>DISTFILES</makevar>, e
		<makevar>PATCHFILES</makevar> conforme a
		seguinte sintaxe:</para>

	      <orderedlist>
		<listitem>
		  <para>Todos elementos <makevar>MASTER_SITES</makevar>,
		    <makevar>PATCH_SITES</makevar>,
		    <makevar>MASTER_SITE_SUBDIR</makevar> e
		    <makevar>PATCH_SITE_SUBDIR</makevar> tem que
		    ser terminados com o caractere barra invertida
		    <literal>/</literal>.  Se quaisquer elementos
		    pertecem a quaisquer grupos, o grupo postfix
		    <literal>:<replaceable>n</replaceable></literal>
		    tem que vir a direta depois do terminator
		    <literal>/</literal>.  O mecanismo
		    <literal>MASTER_SITES:n</literal> depende da
		    existencia do terminator
		    <literal>/</literal> para evitar confusing elementos
		    onde uma <literal>:n</literal> &eacute; uma parte valida do
		    elemento com ocurrences onde
		    <literal>:n</literal> denota o grupo
		    <literal>n</literal>.  Para propositos de compatibilidade,
		    desde o <literal>/</literal> terminator n&atilde;o foi
		    necess&aacute;rio antes em ambos elementos
		    <makevar>MASTER_SITE_SUBDIR</makevar> e
		    <makevar>PATCH_SITE_SUBDIR</makevar>, se
		    o postfix immediate precedindo caractere n&atilde;o &eacute;
		    uma <literal>/</literal> ent&atilde;o <literal>:n</literal>
		    ser&aacute; considerada uma parte valida do elemento
		    ao inv&eacute;s de um grupo postfix even se um elemento &eacute;
		    postfixed com <literal>:n</literal>.  Veja ambos
		    <xref
		      linkend="ports-master-sites-n-example-detailed-use-master-site-subdir">
		    and <xref
		      linkend="ports-master-sites-n-example-detailed-use-complete-example-master-sites">.</para>

		  <example id="ports-master-sites-n-example-detailed-use-master-site-subdir">
		    <title>Uso detalhado do
		      <literal>MASTER_SITES:n</literal> em
		      <makevar>MASTER_SITE_SUBDIR</makevar></title>

		    <programlisting>MASTER_SITE_SUBDIR=     old:n new/:NEW</programlisting>

		    <itemizedlist>
		      <listitem>
			<para>Diret&oacute;rios com grupo
			  <literal>DEFAULT</literal> -> old:n</para>
		      </listitem>

		      <listitem>
			<para>Diret&oacute;rios com grupo
			  <literal>NEW</literal> -> new</para>
		      </listitem>
		    </itemizedlist>
		  </example>

		  <example
		    id="ports-master-sites-n-example-detailed-use-complete-example-master-sites">
		      <title>Uso detalhado do
			<literal>MASTER_SITES:n</literal> com operador
			virgula, multiplos arquivos, multiplos sites e
			multiplos subdiret&oacute;rios</title>

		    <programlisting>MASTER_SITES=   http://site1/%SUBDIR%/ http://site2/:DEFAULT \
                http://site3/:group3 http://site4/:group4 \
                http://site5/:group5 http://site6/:group6 \
                http://site7/:DEFAULT,group6 \
                http://site8/%SUBDIR%/:group6,group7 \
                http://site9/:group8
DISTFILES=      file1 file2:DEFAULT file3:group3 \
                file4:group4,group5,group6 file5:grouping \
                file6:group7
MASTER_SITE_SUBDIR=     directory-trial:1 directory-n/:groupn \
                        directory-one/:group6,DEFAULT \
                        directory</programlisting>

		    <para>O exemplo anterior resulta no
		      seguinte fine grained fetching.	Sites s&atilde;o
		      listados  na ordem exata que eles ser&atilde;o
		      usados.</para>

		    <itemizedlist>
		      <listitem>
			<para><filename>file1</filename> ser&aacute;
			  buscado de</para>

			<itemizedlist>
			  <listitem>
			    <para><makevar>MASTER_SITE_OVERRIDE</makevar></para>
			  </listitem>

			  <listitem>
			    <para>http://site1/directory/</para>
			  </listitem>

			  <listitem>
			    <para>http://site1/directory-one/</para>
			  </listitem>

			  <listitem>
			    <para>http://site1/directory-trial:1/</para>
			  </listitem>

			  <listitem>
			    <para>http://site2/</para>
			  </listitem>

			  <listitem>
			    <para>http://site7/</para>
			  </listitem>

			  <listitem>
			    <para><makevar>MASTER_SITE_BACKUP</makevar></para>
			  </listitem>
			</itemizedlist>
		      </listitem>

		      <listitem>
			<para><filename>file2</filename> ser&aacute;
			  buscado exatamente assim
			  <filename>file1</filename> desde que eles
			  ambos perten&ccedil;am ao mesmo grupo</para>

			<itemizedlist>
			  <listitem>
			    <para><makevar>MASTER_SITE_OVERRIDE</makevar></para>
			  </listitem>

			  <listitem>
			    <para>http://site1/directory/</para>
			  </listitem>

			  <listitem>
			    <para>http://site1/directory-one/</para>
			  </listitem>

			  <listitem>
			    <para>http://site1/directory-trial:1/</para>
			  </listitem>

			  <listitem>
			    <para>http://site2/</para>
			  </listitem>

			  <listitem>
			    <para>http://site7/</para>
			  </listitem>

			  <listitem>
			    <para><makevar>MASTER_SITE_BACKUP</makevar></para>
			  </listitem>
			</itemizedlist>
		      </listitem>

		      <listitem>
			<para><filename>file3</filename> ser&aacute;
			  buscado de</para>

			<itemizedlist>
			  <listitem>
			    <para><makevar>MASTER_SITE_OVERRIDE</makevar></para>
			  </listitem>

			  <listitem>
			    <para>http://site3/</para>
			  </listitem>

			  <listitem>
			    <para><makevar>MASTER_SITE_BACKUP</makevar></para>
			  </listitem>
			</itemizedlist>
		      </listitem>

		      <listitem>
			<para><filename>file4</filename> ser&aacute;
			  buscado de</para>

			<itemizedlist>
			  <listitem>
			    <para><makevar>MASTER_SITE_OVERRIDE</makevar></para>
			  </listitem>

			  <listitem>
			    <para>http://site4/</para>
			  </listitem>

			  <listitem>
			    <para>http://site5/</para>
			  </listitem>

			  <listitem>
			    <para>http://site6/</para>
			  </listitem>

			  <listitem>
			    <para>http://site7/</para>
			  </listitem>

			  <listitem>
			    <para>http://site8/directory-one/</para>
			  </listitem>

			  <listitem>
			    <para><makevar>MASTER_SITE_BACKUP</makevar></para>
			  </listitem>
			</itemizedlist>
		      </listitem>

		      <listitem>
			<para><filename>file5</filename> ser&aacute;
			  buscado de</para>

			<itemizedlist>
			  <listitem>
			    <para><makevar>MASTER_SITE_OVERRIDE</makevar></para>
			  </listitem>

			  <listitem>
			    <para><makevar>MASTER_SITE_BACKUP</makevar></para>
			  </listitem>
			</itemizedlist>
		      </listitem>

		      <listitem>
			<para><filename>file6</filename> ser&aacute;
			  buscado de</para>

			<itemizedlist>
			  <listitem>
			    <para><makevar>MASTER_SITE_OVERRIDE</makevar></para>
			  </listitem>

			  <listitem>
			    <para>http://site8/directory-one/</para>
			  </listitem>

			  <listitem>
			    <para><makevar>MASTER_SITE_BACKUP</makevar></para>
			  </listitem>
			</itemizedlist>
		      </listitem>
		    </itemizedlist>
		  </example>
		</listitem>
	      </orderedlist>
	    </listitem>

	    <listitem>
	      <para>Como eu fa&ccedil;o um grupo das vari&aacute;veis especiais de
		<filename>bsd.sites.mk</filename>, ex.,
		<makevar>MASTER_SITE_SOURCEFORGE</makevar>?</para>

	      <para>Veja <xref
		  linkend="ports-master-sites-n-example-detailed-use-master-site-sourceforge">.</para>

	      <example
		id="ports-master-sites-n-example-detailed-use-master-site-sourceforge">
		<title>Uso detalhado do
		  <literal>MASTER_SITES:n</literal> com
		  <makevar>MASTER_SITE_SOURCEFORGE</makevar></title>

		<programlisting>MASTER_SITES=   http://site1/ ${MASTER_SITE_SOURCEFORGE:S/$/:sourceforge,TEST/}
DISTFILES=      something.tar.gz:sourceforge</programlisting>
	      </example>

	      <para><filename>something.tar.gz</filename> ser&aacute;
		buscado de todos sites com
		<makevar>MASTER_SITE_SOURCEFORGE</makevar>.</para>
	    </listitem>

	    <listitem>
	      <para>Como eu uso isto com vari&aacute;veis
		<makevar>PATCH*</makevar>?</para>

	      <para>Todos exemplos onde feitps com
		vari&aacute;veis <makevar>MASTER*</makevar> mas eles funciar&atilde;o
		exatamente o mesmo para as <makevar>PATCH*</makevar> assim
		pode ser vistas em <xref
		  linkend="ports-master-sites-n-example-detailed-use-patch-sites">.</para>

	      <example
		id="ports-master-sites-n-example-detailed-use-patch-sites">
		<title>Uso simplificado do
		  <literal>MASTER_SITES:n</literal> com
		  <makevar>PATCH_SITES</makevar>.</title>

		<programlisting>PATCH_SITES=    http://site1/ http://site2/:test
PATCHFILES=     patch1:test</programlisting>
	      </example>
	    </listitem>
	  </orderedlist>
	</sect3>

	<sect3>
	  <title>What does change for ports?  What does not?</title>

	  <orderedlist numeration="lowerroman">
	    <listitem>
	      <para>Todos pots atuais restam o mesmo.  O
		<literal>MASTER_SITES:n</literal> feature code &eacute; somente
		ativado  se h&aacute; elementos postfixed com
		<literal>:<replaceable>n</replaceable></literal> como
		elementos conforme as regras de sintaxe aforementioned,
		especialmente como aprasentadas no item <xref
		  linkend="porting-master-sites-n-group-semantics">.</para>
	    </listitem>

	    <listitem id="porting-master-sites-n-what-changes-in-port-targets">
	      <para>Os port targets restantes o mesmo:
		<maketarget>checksum</maketarget>,
		<maketarget>makesum</maketarget>,
		<maketarget>patch</maketarget>,
		<maketarget>configure</maketarget>,
		<maketarget>build</maketarget>, etc.  Com obvias
		exce&ccedil;&otilde;es de <maketarget>do-fetch</maketarget>,
		<maketarget>fetch-list</maketarget>,
		<maketarget>master-sites</maketarget> and
		<maketarget>patch-sites</maketarget>.</para>

	      <itemizedlist>
		<listitem>
		  <para><maketarget>do-fetch</maketarget>: deploys the
		    novo agrupamento postfixed
		    <makevar>DISTFILES</makevar> e
		    <makevar>PATCHFILES</makevar> com their matching
		    group elements com ambos
		    <makevar>MASTER_SITES</makevar> e
		    <makevar>PATCH_SITES</makevar> qual usa matching
		    group elements com ambos
		    <makevar>MASTER_SITE_SUBDIR</makevar> and
		    <makevar>PATCH_SITE_SUBDIR</makevar>.  Verifique <xref
		      linkend="ports-master-sites-n-example-detailed-use-complete-example-master-sites">.</para>
		</listitem>

		<listitem>
		  <para><maketarget>fetch-list</maketarget>: funciona
		    como o antigo <maketarget>fetch-list</maketarget> com
		    a exce&ccedil;&atilde;o que ele agrupa s&oacute; como
		    <maketarget>do-fetch</maketarget>.</para>
		</listitem>

		<listitem>
		  <para><maketarget>master-sites</maketarget> e
		    <maketarget>patch-sites</maketarget>:
		    (incompat&iacute;veis com vers&otilde;es mais antigas) somente retorna os
		    elementos do grupo <literal>DEFAULT</literal>;  in
		    fact, eles executam targets
		    <maketarget>master-sites-default</maketarget> e
		    <maketarget>patch-sites-default</maketarget>
		    respectivamente.</para>

		  <para>Al&eacute;m disso, usando a target either
		    <maketarget>master-sites-all</maketarget> ou
		    <maketarget>patch-sites-all</maketarget> &eacute;
		    preferido verificando diretamente either
		    <maketarget>MASTER_SITES</maketarget> ou
		    <maketarget>PATCH_SITES</maketarget>.  Tamb&eacute;m,
		    verificando diretamente n&atilde;o &eacute; guarantidp que funcione em quaisquer
		    vers&otilde;es futuras.  Verifique o item <xref
		      linkend="porting-master-sites-n-new-port-targets-master-sites-all">
		    para mais informa&ccedil;&otilde;es nestes novos port
		    targets.</para>
		</listitem>

	      </itemizedlist>
	    </listitem>

	    <listitem>
	      <para>New port targets</para>

	      <orderedlist>
		<listitem>
		  <para>H&aacute;
		    <maketarget>master-sites-<replaceable>n</replaceable></maketarget>
		    e
		    <maketarget>patch-sites-<replaceable>n</replaceable></maketarget>
		    targets qual listar&aacute; os elementos do
		    respectivo grupo <replaceable>n</replaceable>
		    within <makevar>MASTER_SITES</makevar> e
		    <makevar>PATCH_SITES</makevar> respectivamente.  Por
		    exemplo, ambos
		    <maketarget>master-sites-DEFAULT</maketarget> e
		    <maketarget>patch-sites-DEFAULT</maketarget>
		    retornar&aacute; os elementos do grupo
		    <literal>DEFAULT</literal>,
		    <maketarget>master-sites-test</maketarget> e
		    <maketarget>patch-sites-test</maketarget> do grupo
		    <literal>test</literal>, e thereon.</para>
		</listitem>

		<listitem id="porting-master-sites-n-new-port-targets-master-sites-all">
		  <para>H&aacute; novos targets
		    <maketarget>master-sites-all</maketarget> e
		    <maketarget>patch-sites-all</maketarget> qual faz
		    o trabalho do antigos
		    <maketarget>master-sites</maketarget> e
		    <maketarget>patch-sites</maketarget>.  Eles
		    retornam os elementos de todos os grupos assim se todos eles
		    pertenciam ao mesmo grupo com o caveat that eles
		    lista assim muitos
		    <makevar>MASTER_SITE_BACKUP</makevar> e
		    <makevar>MASTER_SITE_OVERRIDE</makevar> assim h&aacute;
		    grupos definidos com either
		    <makevar>DISTFILES</makevar> ou
		    <makevar>PATCHFILES</makevar>;  respectivamente para
		    <maketarget>master-sites-all</maketarget> e
		    <maketarget>patch-sites-all</maketarget>.</para>
		</listitem>
	      </orderedlist>
	    </listitem>
	  </orderedlist>
	</sect3>
      </sect2>

      <sect2>
        <title><makevar>DIST_SUBDIR</makevar></title>

        <para>N&atilde;o deixe seu port abarrotar
          <filename>/usr/ports/distfiles</filename>.  Se seu port necessita de um
          muitos arquivos serem buscados, ou contem um arquivo que tem o nome que
          pode conflitar com outros ports (ex.,
          <filename>Makefile</filename>), define <makevar>DIST_SUBDIR</makevar>
          ao nome do port (<literal>${PORTNAME}</literal> ou
          <literal>${PKGNAMEPREFIX}${PORTNAME}</literal>
          deve funcionar bem).  Isto mudar&aacute;
          <makevar>DISTDIR</makevar> do default
          <filename>/usr/ports/distfiles</filename> a
          <filename>/usr/ports/distfiles/<makevar>DIST_SUBDIR</makevar></filename>,
          e in effect colocar&aacute; tudo que &eacute; necess&aacute;rio para seu port dentro
          daquele subdiret&oacute;rio.</para>

        <para>Ele tamb&eacute;m look at the subdiret&oacute;rio com o mesmo nome no
          backup master site em <filename>ftp.FreeBSD.org</filename>.
          (Defindo explicitamente <makevar>DISTDIR</makevar> em seu
          <makevar>Makefile</makevar> n&atilde;o accomplish this, assim por favor use
          <makevar>DIST_SUBDIR</makevar>.)</para>

        <note>
          <para>Isto n&atilde;o afeta o <makevar>MASTER_SITES</makevar> voc&ecirc;
            define em seu <filename>Makefile</filename>.</para>
        </note>
      </sect2>
    </sect1>

      <sect1 id="makefile-maintainer">
        <title><makevar> MANTEDOR</makevar></title>

        <para>Defina seu endere&ccedil;o de mail aqui.  Por favor.  <!-- smiley
          --><emphasis>:-)</emphasis></para>

        <para>Para uma descri&ccedil;&atilde;o detalhada das responsabilidades dos mantedores,
          consulte a se&ccedil;&atilde;o <ulink url="../developers-handbook/policies.html#POLICIES-MAINTAINER">Makefiles o
           MANTEDOR</ulink>.</para>

        <para>Note que somente um &uacute;nico endere&ccedil;o sem coment&aacute;rio part &eacute;
          permitido como um valor <makevar>MAINTAINER</makevar>.</para>

        <para>Se o mantedor de um port n&atilde;o responder a um pedido de atualiza&ccedil;&atilde;o
          de um usu&aacute;rio ap&oacute;s duas semanas (excluindo principais feriados
          p&uacute;blicos), ent&atilde;o that is considered a maintainer timeout, and the
          update pode ser feito sem aprova&ccedil;&atilde;o expl&iacute;cita do mantedor.  Se o
          mantedor n&atilde;o responder dentro de tr&ecirc;s meses, ent&atilde;o esse
          mantedor &eacute; considerado ausente without leave, e pode ser
          substitu&iacute;do como o mantedor do particular port em quest&atilde;o.
          Exce&ccedil;&otilde;es a isto s&atilde;o qualquer coisa mantida pelos &a.portmgr;, ou
          o &a.security-officer;.  Nenhum desautorizado commits pode ser
          feito aos ports mantidos por aqueles grupos.</para>

        <para>O &a.portmgr;  reserva o direito para revogar ou sobrescrever
          qualquer maintainership por qualquer raz&atilde;o, e o &a.security-officer;
          reserva o direito para revogar ou sobrescrever maintainership por
          raz&otilde;es da seguran&ccedil;a.</para>
      </sect1>

      <sect1 id="makefile-comment">
        <title><makevar>COMENT&Aacute;RIO</makevar></title>

        <para>Esta &eacute; uma descri&ccedil;&atilde;o de um-linha do port.
          <emphasis>Por favor</emphasis> n&atilde;o inclua o nome do pacote (ou
          o n&uacute;mero vers&atilde;o do software) no coment&aacute;rio.  O coment&aacute;rio
          deve come&ccedil;ar com um capital, e o final sem um per&iacute;odo.  Aqui
          est&aacute; um exemplo:</para>

        <programlisting>COMMENT=       A cat chasing a mouse all over the screen</programlisting>

        <para>A vari&aacute;vel COMMENT deve imediatamente seguir a vari&aacute;vel MAINTAINER
          no <filename>Makefile</filename>.</para>
      </sect1>

      <sect1 id="makefile-depend">
        <title>Depend&ecirc;ncias</title>

        <para>Muitos ports dependem de outros ports.  H&aacute; cinco vari&aacute;veis que
          voc&ecirc; pode usar para assegurar de que todos necess&aacute;rios bits estar&atilde;o na
          m&aacute;quina do usu&aacute;rio.  H&aacute; tamb&eacute;m algum vari&aacute;veis da dependencia pre-suportadas
          para casos comuns, mais alguns mais para controlar o comportamento
          das depend&ecirc;ncias.</para>

        <sect2>
          <title><makevar>LIB_DEPENDS</makevar></title>

          <para>Esta vari&aacute;vel especifica as bibliotecas que compartilhadas este port
            depende.  &Eacute; uma lista de 
            <replaceable>lib</replaceable>:<replaceable>dir</replaceable><optional><replaceable>:target</replaceable></optional>
            tuples onde <replaceable>lib</replaceable>  &eacute; o nome da
            biblioteca compartilhada, <replaceable>dir</replaceable> &eacute; o
            diret&oacute;rio em qual escontrar&aacute; caso n&atilde;o est&aacute; dispon&iacute;vel, e
            <replaceable>target</replaceable> &eacute; o target para chamar naquele
            diret&oacute;rio.  Por exemplo, <programlisting> LIB_DEPENDS=
              jpeg.9:${PORTSDIR}/graphics/jpeg:install</programlisting>
            verificar&aacute; para ver se h&aacute; uma biblioteca compartilhada jpeg com vers&atilde;o principal 9, e
            desceer dentro do subdiret&oacute;rio <filename>graphics/jpeg</filename>
            da sua &aacute;rvore do ports para construir e instala-lo se n&atilde;o se encontrar.
            The <replaceable>target</replaceable> part pode ser omitida se
            for igual a <makevar>DEPENDS_TARGET</makevar> (qual defaults para
            <literal>instalar</literal>).</para>

          <note>
            <para>A parte <replaceable>lib</replaceable> &eacute; um argumento dado
              ao <command>ldconfig -r | grep -wF</command>.  N&atilde;o haver&aacute; nenhumas
              express&otilde;es regulares nesta vari&aacute;vel.</para>
          </note>

          <para>A depend&ecirc;ncia &eacute; verificada duas vezes, uma vez dentro do
            <maketarget>extract</maketarget> target e ent&atilde;o dentro do
            <maketarget>install</maketarget> target.  Tamb&eacute;m, o nome da
            depend&ecirc;ncia &eacute; colocado dentro do pacote assim que
            &man.pkg.add.1; o instalar&aacute; automaticamente se
            n&atilde;o estiver no sistema do usu&aacute;rio.</para>
        </sect2>

        <sect2>
          <title><makevar>RUN_DEPENDS</makevar></title>

          <para>Esta vari&aacute;vel especifica execut&aacute;veis ou arquivos que este port depende
            durante o tempo-de-execu&ccedil;&atilde;o.  &Eacute; uma lista de
            <replaceable>path</replaceable>:<replaceable>dir</replaceable><optional><replaceable>:target</replaceable></optional>
            tuples onde <replaceable>path</replaceable> &eacute; o nome do
            execut&aacute;vel ou arquivo, <replaceable>dir</replaceable> &eacute; o
            diret&oacute;rio em qual encontrar&aacute;-lo em caso que n&atilde;o est&aacute; dispon&iacute;vel, e
            <replaceable>target</replaceable> &eacute; o target para chamar naquele
            diret&oacute;rio.  Se o <replaceable>path</replaceable>  come&ccedil;ar com uma barra
            (<literal>/</literal>), ele &eacute; tratado como um arquivo e sua existencia
            &eacute; testada com <command>test -e</command>; otherwise, it is
            assumed ser um execut&aacute;vel, e <command>which -s</command> &eacute;
            usado para determinar se o programa existe no path
            de busca do usu&aacute;rio.</para>

          <para>Por exemplo,</para>

            <programlisting>RUN_DEPENDS=   ${LOCALBASE}/etc/innd:${PORTSDIR}/news/inn \
               wish8.0:${PORTSDIR}/x11-toolkits/tk80</programlisting>

          <para>verificar&aacute; se o arquivo ou o diret&oacute;rio
            <filename>/usr/local/etc/innd</filename> existe, e construir e
            instala-lo do subdiret&oacute;rio <filename>news/inn</filename> da
            arvore ports se ele n&atilde;o &eacute; encontrado.  Ver&aacute; tamb&eacute;m se um
            execut&eacute;vel chamado <command>wish8.0</command> est&aacute; em seu path
            de procura, e descer&aacute; dentro do subdiret&oacute;rio <filename>x11-toolkits/tk80</filename>
            da sua arvore ports para construir e instala-lo se ele n&atilde;o &eacute;
            encontrado.</para>

          <note>
            <para> Neste caso, <command>innd</command>  &eacute; realmente um
              execut&aacute;vel; se um execut&aacute;vel estiver em um lugar que n&atilde;o esperado
              estra em um path normal de procura de usu&aacute;rio, voc&ecirc; deve usar o
              pathname completo.</para>
          </note>

          <para>TA depend&ecirc;ncia &eacute; verificada dentro do
            <maketarget>install</maketarget> target.  Tamb&eacute;m, o nome da
            depend&ecirc;ncia &eacute; colocado dentro do pacote assim que
            &man.pkg.add.1; o instalar&aacute; automaticamente se ele n&atilde;o
            estiver no sistema do usu&aacute;rio.  A parte <replaceable>target</replaceable>
            pode ser omitida se for a mesma que
            <makevar>DEPENDS_TARGET</makevar>.</para>
        </sect2>

        <sect2>
          <title><makevar>BUILD_DEPENDS</makevar></title>

          <para>Esta vari&aacute;vel especifica execut&aacute;veis ou arquivos que este port
            necessita para construir.  Como <makevar>RUN_DEPENDS</makevar>, &eacute; uma
            lista de
            <replaceable>path</replaceable>:<replaceable>dir</replaceable><optional><replaceable>:target</replaceable></optional>
            tuples. Por exemplo, <programlisting> BUILD_DEPENDS=
              unzip:${PORTSDIR}/archivers/unzip</programlisting> verificar&aacute;
            para ver se h&aacute; um execut&aacute;vel chamado <command>unzip</command>, e descer&aacute;
            dentro do subdiret&oacute;rio <filename>archivers/unzip</filename> da sua
            arvore ports para construir e instala-lo se ele n&atilde;o for encontrado.</para>

          <note>
            <para><quote>build</quote> aqui significa tudo da extra&ccedil;&atilde;o a
              compila&ccedil;&atilde;o.  A depend&ecirc;ncia &eacute; verificada dentro do
              <maketarget>extract</maketarget> target.  A parte
              <replaceable>target</replaceable> pode ser omitida se
              for a mesma que <makevar>DEPENDS_TARGET</makevar></para>
          </note>
        </sect2>

        <sect2>
          <title><makevar>FETCH_DEPENDS</makevar></title>

          <para>Esta vari&aacute;vel especifica execut&aacute;veis ou arquivos que este port
            necessita para buscar.  Como os dois anteriores, &eacute; uma lista de
            <replaceable>path</replaceable>:<replaceable>dir</replaceable><optional><replaceable>:target</replaceable></optional>
            tuples.  Por exemplo, <programlisting> FETCH_DEPENDS=
              ncftp2:${PORTSDIR}/net/ncftp2</programlisting> verificar&aacute; por um
            execut&aacute;vel chamado <command>ncftp2</command>, e descer&aacute; dentro do
            subdiret&oacute;rio <filename>net/ncftp2</filename> de sua arvore ports
            para construir e instala-lo se ele n&atilde;o for encontrado.</para>

          <para>A depend&ecirc;ncia &eacute; verificada dentro do
            <maketarget>fetch</maketarget> target.  A parte
            <replaceable>target</replaceable>  pode ser omitida se for
            a mesma que <makevar>DEPENDS_TARGET</makevar>.</para>
        </sect2>

        <sect2>
          <title><makevar>DEPENDS</makevar></title>

          <para>Se h&aacute; uma depend&ecirc;ncia em que n&atilde;o caia das
            quatro categorias acima, ou seu port necessita ter o fonte dos
            outros port extra&iacute;dos em adi&ccedil;&atilde;o para te-lo instalado,
            ent&atilde;o use esta vari&aacute;vel.  Esta &eacute; a lista de
            <replaceable>dir</replaceable><optional><replaceable>:target</replaceable></optional>,
            assim n&atilde;o h&aacute; nada para verificar, ao contr&aacute;rio das quatro anteriores.  A parte
            <replaceable>target</replaceable> pode ser omitida se ele for o
            mesmo que <makevar>DEPENDS_TARGET</makevar>.</para>
        </sect2>

        <sect2>
	<title><makevar>USE_<replaceable>*</replaceable></makevar></title>

	<para>Um n&uacute;mero de vari&aacute;veis existem em ordem para encapsular
	  depend&ecirc;ncias em comum que muitos ports tem.</para>

	<table frame="none">
	  <title>As vari&aacute;veis <makevar>USE_<replaceable>*</replaceable></makevar>
	    </title>

	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Vari&aacute;vel</entry>

		<entry>Significado</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry><makevar>USE_BZIP2</makevar></entry>

		<entry>Os tarballs do port s&atilde;o comprimidos com
		  <command>bzip2</command>.</entry>
	      </row>

	      <row>
		<entry><makevar>USE_ZIP</makevar></entry>

		<entry>Os tarballs do port s&atilde;o comprimidos com
		  <command>zip</command>.</entry>
	      </row>

	      <row>
		<entry><makevar>USE_GMAKE</makevar></entry>

		<entry>O port necessita <command>gmake</command> para
		  construir.</entry>

	      </row>

	      <row>
		<entry><makevar>USE_PERL5</makevar></entry>

		<entry>O port necessita <literal>perl 5</literal> para construir e instalar.  Veja
		  <xref linkend="using-perl">  para as vari&aacute;veis adicionais que
		  podem ser definidas relacionando ao <literal>perl</literal>.</entry>
	      </row>

	      <row>
		<entry><makevar>USE_X_PREFIX</makevar></entry>

		<entry>O port instala na <makevar>X11BASE</makevar>
		   melhor que <makevar>PREFIX</makevar>.  Veja 
		  <xref linkend="using-x11"> para as vari&aacute;veis adicionais que 
		  podem ser definidas relacionando ao X11.</entry>
	      </row>

	      <row>
		<entry><makevar>USE_AUTOMAKE</makevar></entry>

		<entry>O port usa GNU <command>automake</command> como parte
		  de seu processo de constru&ccedil;&atilde;o.  Veja <xref linkend="using-automake">
		  para as vari&aacute;veis adicionais que podem ser definidas relacionando ao
		  <command>automake</command>.</entry>
	      </row>

	      <row>
		<entry><makevar>USE_AUTOCONF</makevar></entry>

		<entry>O port usa GNU <command>autoconf</command> como parte
		  de seu processo de constru&ccedil;&atilde;o.  Veja <xref linkend="using-automake">
		  para as vari&aacute;veis adicionais que podem ser definidas relacionando ao
		  <command>autoconf</command>.</entry>
	      </row>

	      <row>
		<entry><makevar>USE_LIBTOOL</makevar></entry>

		<entry>O port usa GNU <command>libtool</command> como parte
		  its build process.  See <xref linkend="using-automake"> para
		  as vari&aacute;veis adicionais que podem ser definidas relacionando ao
		  <command>libtool</command>.</entry>
	      </row>

	      <row>
		<entry><makevar>GMAKE</makevar></entry>

		<entry>O path completo para <command>gmake</command>  se n&atilde;o est&aacute;
		  no <envar>PATH</envar>.</entry>
	      </row>

	      <row>
		<entry><makevar>USE_BISON</makevar></entry>

		<entry>O port usa <command>bison</command> para
		  constru&ccedil;&atilde;o.</entry>
	      </row>

	      <row>
		<entry><makevar>NO_INSTALL_MANPAGES</makevar></entry>

		<entry>N&atilde;o usa o <maketarget>install.man</maketarget>
		  target.</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</table>

          <para>Defina <literal>USE_XLIB=yes</literal> se seu port necessita
            o X Window System para ser instalado (&eacute; implicado pelo
            <makevar>USE_IMAKE</makevar>).  Defina
            <literal>USE_GMAKE=yes</literal> se seu port necessita GNU
            <command>make</command> ao inv&eacute;s do BSD <command>make</command>.
            Define <literal>USE_AUTOCONF=yes</literal> se seu port necessita
            GNU autoconf para ser executado.  Define <literal>USE_QT=yes</literal> se
            seu port usa o ultimo qt toolkit.  Use
            <literal>USE_PERL5=yes</literal> se seu port necessita vers&atilde;o 5
            da linguagem <literal>perl</literal>.  (O ultimo &eacute; especialmente importante desde que
            algumas vers&otilde;es do FreeBSD tem <literal>perl5</literal> como parte da base do sistema
            enquanto outras n&atilde;o.)</para>
        </sect2>

        <sect2>
          <title>Notas em depend&ecirc;ncias</title>

          <para>Como mencionado acima, the default target para chamar quando uma
            depend&ecirc;ncia &eacute; necess&aacute;ria &eacute; <maketarget>DEPENDS_TARGET</maketarget>.
            It defaults to <literal>install</literal>.  Esta &eacute; uma vari&aacute;vel
            do usu&aacute;rio; nunca &eacute; definida em um
            <filename>Makefile</filename> do port.  Se seu port necessita um meio especial
            para manusear uma depend&ecirc;ncia, use a parte <literal>:target</literal> do
            the <makevar>*_DEPENDS</makevar> variables instead of redefining
            <makevar>DEPENDS_TARGET</makevar>.</para>

          <para>Quando voc&ecirc; digita <command>make clean</command>, suas depend&ecirc;ncias
            est&atilde;o automaticamente limpadas tamb&eacute;m.  Se voc&ecirc; n&atilde;o deseja que isto aconte&ccedil;a,
            defina a vari&aacute;vel <makevar>NOCLEANDEPENDS</makevar> em seu
            ambiente.</para>

          <para>Depender de um outro port incondicionalmente, use a
            vari&aacute;vel <makevar>${NONEXISTENT}</makevar> assim o primeiro campo 
            do <makevar>BUILD_DEPENDS</makevar> ou
            <makevar>RUN_DEPENDS</makevar>.  Use isto somente quando voc&ecirc; necessita
            obter o fonte de outro port.  Voc&ecirc; pode frequentemente economizar
            tempo de compila&ccedil;&atilde;o especificando a target tamb&eacute;m.  Por
            exemplo

            <programlisting>BUILD_DEPENDS=   ${NONEXISTENT}:${PORTSDIR}/graphics/jpeg:extract</programlisting>

            will always descend to the <literal>jpeg</literal> port and extract it.</para>

          <para>N&atilde;o use <makevar>DEPENDS</makevar>  a menos que n&atilde;o h&aacute; nenhum outro
            meio que o comportamento que voc&ecirc; quer possa ser realizado.  Causar&aacute; a
            outro port ser sempre construido (e instalado, por default), e a
            depend&ecirc;ncia entrar&aacute; nos pacotes tamb&eacute;m.  Se isto for realmente
            o que voc&ecirc; necessita, voc&ecirc; deve provavelmente escrev&ecirc;-lo assim
            <literal>BUILD_DEPENDS</literal> e
            <literal>RUN_DEPENDS</literal> ao inv&eacute;s &mdash; ao memos a
            inten&ccedil;&atilde;o ser&aacute; limpar.</para>
        </sect2>

     <sect2>
      <title>Depend&ecirc;ncias opcionais</title>
      
      <para>Algumas aplica&ccedil;&otilde;es grandes podem ser constru&iacute;das em um n&uacute;mero de
	configura&ccedil;&otilde;es, adicionando a funcionalidade se one of a number of
	bibliotecas ou de aplica&ccedil;&otilde;es estiver dispon&iacute;vel. Desde que n&atilde;o todos os usu&aacute;rios
	querem aquelas bibliotecas ou aplica&ccedil;&otilde;es, o sistema de ports
	fornece os ganchos que o autor do port possa usar se decidir qual
	configura&ccedil;&atilde;o deve ser constru&iacute;da. Suportando isto corretamente
	far&aacute; usu&aacute;rios felizes, e fornece eficazmente 2 ou mais ports pelo
	pre&ccedil;o de um.</para>
	
      <para>O mais f&aacute;cil deste para usar &eacute;
	<makevar>WITHOUT_X11</makevar>.  Se o port puder ser constru&iacute;do ambos
	com e sem suporte ao X, ent&atilde;o ele deve normalmente ser constru&iacute;do
	com suporte ao X. Se <makevar>WITHOUT_X11</makevar> &eacute; definido,
	ent&atilde;o a vers&atilde;o que n&atilde;o tem suporte ao X deve ser
	construida.</para>
	
      <para>V&aacute;rias partes do GNOME t&ecirc;m tais bot&otilde;es, embora s&atilde;o
	ligeiramente mais dif&iacute;ceis de se usar. As vari&aacute;veis para usar no
	<filename>Makefile</filename> s&atilde;o <makevar>WANT_*</makevar>
	e <makevar>HAVE_*</makevar>. Se a aplica&ccedil;&atilde;o possa ser
	construida ambos com ou sem uma das depend&ecirc;ncias listadas
	abaixo, ent&atilde;o o <filename>Makefile</filename> deve definir
	<makevar>WANT_PKG</makevar>, e deve construir a vers&atilde;o que
	usa <makevar>PKG</makevar> se <makevar>HAVE_PKG</makevar>
	for definido.</para>
	
      <para>A vari&aacute;vel <makevar>WANT_*</makevar> atualmente
	suporta esta maneira s&atilde;o <makevar>WANT_GLIB</makevar>,
	<makevar>WANT_GTK</makevar>, <makevar>WANT_ESOUND</makevar>,
	<makevar>WANT_IMLIB</makevar>, e
	<makevar>WANT_GNOME</makevar>.</para>
      </sect2>
    </sect1>

    <sect1 id="makefile-wrkdir">
      <title>Especificando o diret&oacute;rio de funcionamento</title>

      <para>Cada port &eacute; extra&iacute;do dentro a um diret&oacute;rio de funcionamento, qual tem que ser
	grav&aacute;vel.  O sistema de ports sup&otilde;e que os
	<makevar>DISTFILES</makevar> unpack dentro um diret&oacute;rio chamado
	<literal>${DISTNAME}</literal>.  Em outras palavras, se voc&ecirc;
	definiu:</para>

      <programlisting>PORTNAME=      foo
PORTVERSION=   1.0</programlisting>

      <para>ent&atilde;o os arquivos de distribui&ccedil;&atilde;o do port cont&eacute;m um diret&oacute;rio top-level,
	<filename>foo-1.0</filename>, e o resto dos arquivos est&atilde;o situados
	sob aquele diret&oacute;rio.</para>

      <para>H&aacute; um n&uacute;mero de vari&aacute;veis que voc&ecirc; pode definir se aquilo n&atilde;o for
	o caso.</para>

      <sect2>
	<title><makevar>WRKSRC</makevar></title>

	<para>A vari&aacute;vel lista o nome do diret&oacute;rio que &eacute; criado quando
	  os distfiles da aplica&ccedil;&atilde;o s&atilde;o extra&iacute;dos.  Se nosso exemplo anterior
	  extra&iacute;do em um diret&oacute;rio chamado <filename>foo</filename> (e n&atilde;o
	  <filename>foo-1.0</filename>) voc&ecirc; escreveria:</para>

	<programlisting>WRKSRC=      ${WRKDIR}/foo</programlisting>

	<para>ou possivelmente</para>

	<programlisting>WRKSRC=      ${WRKDIR}/${PORTNAME}</programlisting>
      </sect2>

      <sect2>
	<title><makevar>NO_WRKSUBDIR</makevar></title>

	<para>Se o port n&atilde;o extrair dentro de um subdiret&oacute;rio em tudo ent&atilde;o
	  vc&ecirc; deve definir <makevar>NO_WRKSUBDIR</makevar> a indicar
	  aquele.</para>

	<programlisting>NO_WRKSUBDIR= yes</programlisting>
      </sect2>
    </sect1>

    <sect1 id="conflicts">
      <title><makevar>CONFLITOS</makevar></title>

        <para>Se seu pacote n&atilde;o puder coexistir com outros pacotes
          (por causa de conflitos de arquivos, runtime incompatibilidade, etc.),
          liste os outros nomes dos pacotes  na vari&aacute;vel
          <makevar>CONFLICTS</makevar>. Voc&ecirc; pode usar shell globs como <literal>*</literal> e
          <literal>?</literal> aqui.  Os nomes dos pacotes devem ser
          enumerados da mesma maneira que aparecem em
          <filename>/var/db/pkg</filename>.
       </para>
    </sect1>

      <sect1 id="makefile-build">
        <title>Mecanismos de Constru&ccedil;&atilde;o</title>

        <para>Se seu pacote usa GNU <command>make</command>, defina
          <literal>USE_GMAKE=yes</literal>.  Se seu pacote usa
          <command>configure</command>, defina
          <literal>HAS_CONFIGURE=yes</literal>.  Se seu pacote usa GNU
          <command>configure</command>, defina
          <literal>GNU_CONFIGURE=yes</literal> (this implies
          <literal>HAS_CONFIGURE</literal>).  Se voc&ecirc; quiser dar alguns argumentos
          extras para <command>configure</command> (o default lista de argumentos
          <literal>--prefix=&dollar;{PREFIX}</literal> para GNU
          <command>configure</command> e vazia para n&atilde;o-GNU
          <command>configure</command>), defina aqueles argumentos extras em
          <makevar>CONFIGURE_ARGS</makevar>.  Se seu pacote usar o GNU
          <command>autoconf</command>, defina
          <literal>USE_AUTOCONF=yes</literal>.  Isto implica
          <makevar>GNU_CONFIGURE</makevar>, e far&aacute;
          <command>autoconf</command> ser executado antes de
          <command>configure</command>.</para>

	<note>
	  <para>Se seu pacote usa GNU <command>configure</command>, e
	    o arquivo execut&aacute;vel resultante tem um <quote>estranho</quote> nome
	    como
	    <filename>i386-portbld-freebsd4.7-</filename><replaceable>appname</replaceable>,
	    voc&ecirc; necessitar&aacute; adicionalmente sobrescrever a vari&aacute;vel
	    <makevar>CONFIGURE_TARGET</makevar> para especificar o
	    target na maneira necess&aacute;ria pelos scripts gerados pelos recentes
	    vers&otilde;es do <command>autoconf</command>.  Adicione a seguinte linha
	    imediatamente ap&oacute;s a linha <literal>GNU_CONFIGURE=yes</literal>
	    em seu <filename>Makefile</filename>:</para>

	  <para>
	    <literal>CONFIGURE_TARGET=--build=${MACHINE_ARCH}-portbld-freebsd${OSREL}</literal>
	    </para>
	</note>

        <para>Se seu pacote for uma aplica&ccedil;&atilde;o X que cria o
          <filename>Makefile</filename>s de <filename>Imakefile</filename>s
          usando <command>imake</command>, ent&atilde;o defina
          <literal>USE_IMAKE=yes</literal>.  Isto far&aacute; o est&aacute;gio
          de configurar para automaticamente fazer um <command>xmkmf -a</command>.  Se o
          <option>-a</option> flag for um problema para seu port, defina
          <literal>XMKMF=xmkmf</literal>. Se seu port usa
          <command>imake</command> mas n&atilde;o compreende o
          <maketarget>install.man</maketarget> target,
          <literal>NO_INSTALL_MANPAGES=yes</literal> deve ser definido. Em
          adi&ccedil;&atilde;o, o autor do port original deve ser shot. <!--
          smiley --><emphasis>:-&gt;</emphasis></para>

        <para>Se seu fonte do port <filename>Makefile</filename> tem
          algo mais do que <maketarget>all</maketarget> assim a constru&ccedil;&atilde;o principal
          target, defina <makevar>ALL_TARGET</makevar> accordingly.  Mesmo vai
          para <maketarget>install</maketarget> e
          <makevar>INSTALL_TARGET</makevar>.</para>
      </sect1>
    </chapter>

    <chapter id="special">
      <title>Considera&ccedil;&otilde;es especiais</title>

      <para>H&aacute; algumas mais coisas que voc&ecirc; tem que take into account quando voc&ecirc;
        cria um port.  Esta se&ccedil;&atilde;o explica o mais comum daquelas.</para>

      <sect1 id="porting-shlibs">
        <title>Bibliotecas Compartilhadas</title>

        <para>Se seu port instala uma ou mais bibliotecas compartilhadas, defina um
          <makevar>INSTALLS_SHLIB</makevar> make variable, qual instruir&aacute;
          um <filename>bsd.port.mk</filename> a executar
          <literal>&dollar;{LDCONFIG} -m</literal> no diret&oacute;rio onde a
          nova biblioteca for instalada (geralmente
          <filename><makevar>PREFIX</makevar>/lib</filename>) durante
          <maketarget>post-install</maketarget> target para registra-lo dentro
          do cache da biblioteca compartilhada.  Esta vari&aacute;vel, quando definida, tamb&eacute;m
          facilitar&aacute; a adi&ccedil;&atilde;o de um apropriado
          <literal>@exec /sbin/ldconfig -m</literal> e
          <literal>@unexec /sbin/ldconfig -R</literal> pair dentro de seu
          aerquivo <filename>pkg-plist</filename>, assim que um usu&aacute;rio que instalou
          o pacote possa come&ccedil;ar usar a biblioteca compartilhada imediatamente e
          a desinstala&ccedil;&atilde;o n&atilde;o far&aacute; o sistema ainda acreditar que a
          biblioteca est&aacute; l&aacute;.</para>

        <para>Se voc&ecirc; necessitar, voc&ecirc; pode sobrescrever a default location onde a nova
          biblioteca for instalada definindo <makevar>LDCONFIG_DIRS</makevar>
          make variable, qual deve conter uma lista de diret&oacute;rios dentro da qual
          as bibliotecas compartilhadas ser&atilde;o instaladas.  Por exemplo se seu port
          instala bibliotecas compartilhadas dentro dos
          diret&oacute;rios <filename><makevar>PREFIX</makevar>/lib/foo</filename> e
          <filename><makevar>PREFIX</makevar>/lib/bar</filename>
          voc&ecirc; pode usar as seguintes em seu
          <filename>Makefile</filename>:</para>

        <programlisting>INSTALLS_SHLIB= yes
LDCONFIG_DIRS=  %%PREFIX%%/lib/foo %%PREFIX%%/lib/bar</programlisting>

        <para>Note que indice de <makevar>LDCONFIG_DIRS</makevar> &eacute; passado
          atrav&eacute;s do &man.sed.1; s&oacute; como o resto do <filename>pkg-plist</filename>,
          assim  substitui&ccedil;&otilde;es do <makevar>PLIST_SUB</makevar> tamb&eacute;m aplica aqui.  &Eacute;
          recomendado que voc&ecirc; use <literal>%%PREFIX%%</literal> para
          <makevar>PREFIX</makevar>, <literal>%%LOCALBASE%%</literal> para
          <makevar>LOCALBASE</makevar> e <literal>%%X11BASE%%</literal> para
          <makevar>X11BASE</makevar>.</para>
      </sect1>

    <sect1 id="porting-restrictions">
      <title>Ports com restri&ccedil;&otilde;es de distribui&ccedil;&atilde;o</title>

      <para>As licen&ccedil;as variam, e algumas delas colocam restri&ccedil;&otilde;es em como a
	aplica&ccedil;&atilde;o pode ser empacotada, whether it possa ser vendido por lucro, e assim
	por diante.</para> 

      <important>
	<para> &Eacute; sua responsabilidade como um porter ler os termos de
	  licenciamento do software e certificar-se que o projeto FreeBSD
	  n&atilde;o segura respons&aacute;vel por viola-los redistribuindo o
	  fonte ou bin&aacute;rios compilados either via FTP ou CDROM. Se em d&uacute;vida,
	  por favor contate o &a.ports;.</para>
      </important>
      
      <para>Nas situa&ccedil;&otilde;es como esta, as seguintes vari&aacute;veis pode ser definidas.  Em
	adi&ccedil;&atilde;o, <filename>ports/LEGAL</filename> deve tam&eacute;m ser
	atualizado.</para>

      <sect2>
	<title><makevar>NO_PACKAGE</makevar></title>

	<para>Esta vari&aacute;vel indica que n&oacute;s n&atilde;o podemos gerar um pacote
	  bin&aacute;rio da aplica&ccedil;&atilde;o.  Entretanto, arquivos
	  <makevar>DISTFILES</makevar> do port podem ser livremente distribu&iacute;dos.</para>

	<para><makevar>NO_PACKAGE</makevar>  deve tamb&eacute;m ser usado se o pacote
	  bin&aacute;rio n&atilde;o for geralmente &uacute;til, e a aplica&ccedil;&atilde;o deve sempre
	  ser compilada do c&oacute;digo fonte.  Por exemplo, se a aplica&ccedil;&atilde;o
	  tiver a informa&ccedil;&atilde;o da configura&ccedil;&atilde;o em que &eacute; espec&iacute;fico do local hard codicado
	  dentro dele no tempo de compilar.</para>

	<para><makevar>NO_PACKAGE</makevar> deve ser definido a uma string
	  descrevendo a raz&atilde;o porque o pacote n&atilde;o deve ser
	  gerado.</para>
      </sect2>

      <sect2>
	<title><makevar>NO_CDROM</makevar></title>

	<para>Esta vari&aacute;vel indica que embora sejamos permitidos n&oacute;s gerar
	  pacotes bin&aacute;rios, n&atilde;o estamos permitidos n&oacute;s p&ocirc;r aqueles pacotes, ou
	  os <makevar>DISTFILES</makevar> do port, no CDROM para revenda.  Os
	  <makevar>DISTFILES</makevar> ainda ser&aacute; dispon&iacute;vel via FTP.</para>

	<para><makevar>NO_PACKAGE</makevar> e <makevar>NO_CDROM</makevar>
	  pode ser definida simultaneamente.</para>
      </sect2>

      <sect2>
	<title><makevar>RESTRICTED</makevar></title>

	<para>Defina esta vari&aacute;vel se a licen&ccedil;a da aplica&ccedil;&atilde;o tamb&eacute;m nos pro&iacute;be
	  de espelhar os <makevar>DISTFILES</makevar> das aplica&ccedil;&otilde;es via
	  FTP.</para>

	<para>Tamb&eacute;m defina esta se a licen&ccedil;a da aplica&ccedil;&atilde;o tem restri&ccedil;&otilde;es
	  gerais em quem pode usar, ex. a aplica&ccedil;&atilde;o &eacute; para
	  uso n&atilde;o-comercial somente.</para>
      </sect2>

      <sect2>
	<title><makevar>RESTRICTED_FILES</makevar></title>

	<para>Se somnete alguns dos arquivos de distribui&ccedil;&atilde;o s&atilde;o restritos ent&atilde;o defina
	  esta vari&aacute;vel para lista-los.  It defaults to <literal>${DISTFILES}
	    ${PATCHFILES}</literal>.</para>
      </sect2>
    </sect1>

    <sect1 id="using-perl">
      <title>Usando o <literal>perl</literal></title>

      <table frame="none">
	<title>Vari&aacute;veis para os ports que usam o <literal>perl</literal></title>

	<tgroup cols="2">
	  <thead>
	    <row>
	      <entry>Vari&aacute;vel</entry>
	      
	      <entry>Significado</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><makevar>USE_PERL5</makevar></entry>

	      <entry>Diz que o port usa <literal>perl 5</literal> para construir e executar.</entry>
	    </row>

	    <row>
	      <entry><makevar>PERL_CONFIGURE</makevar></entry>

	      <entry>Configure usando MakeMaker do Perl.  Implica
	        <makevar>USE_PERL5</makevar>.</entry>
	    </row>
	  </tbody>
	</tgroup>

	<tgroup cols="2">
	  <thead>
	    <row>
	      <entry>Vari&aacute;veis somente Leitura</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><makevar>PERL_VERSION</makevar></entry>
	      
	      <entry>A vers&atilde;o completa do <literal>perl</literal> instalado (ex.,
		<literal>5.00503</literal>).</entry>
	    </row>
	    
	    <row>
	      <entry><makevar>PERL_VER</makevar></entry>
	      
	      <entry>A vers&atilde;o curta do <literal>perl</literal> instalado(ex.,
		<literal>5.005</literal>).</entry>
	    </row>

            <row>
              <entry><makevar>PERL_LEVEL</makevar></entry>

              <entry>A vers&atilde;o instalada do <literal>perl</literal> como um inteiro da forma <literal>MNNNPP</literal>
                (ex., <literal>500503</literal>).</entry>
	    </row>
	    
	    <row>
	      <entry><makevar>PERL_ARCH</makevar></entry>
	      
	      <entry>Onde o <literal>perl</literal> armazena bibliotecas dependente da arquitetura.
		Defaults to <literal>${ARCH}-freebsd</literal>.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>
    </sect1>

    <sect1 id="using-x11">
      <title>Usando o X11</title>

      <table frame="none">
	<title>Vari&aacute;veis para os ports  que usam o X</title>

	<tgroup cols="2">
	  <tbody>
	    <row>
	      <entry><makevar>USE_X_PREFIX</makevar></entry>

	      <entry>O port instala em <makevar>X11BASE</makevar>, n&atilde;o em
		<makevar>PREFIX</makevar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>USE_XLIB</makevar></entry>

	      <entry>O port usa as bibliotecas do X.</entry>
	    </row>

	    <row>
	      <entry><makevar>USE_MOTIF</makevar></entry>

	      <entry>O port usa o toolkit Motif.  Implica
		<makevar>USE_XPM</makevar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>USE_IMAKE</makevar></entry>
	      
	      <entry>O port usa <command>imake</command>.  Implica
		<makevar>USE_X_PREFIX</makevar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>XMKMF</makevar></entry>
	      
	      <entry>Define o path do <command>xmkmf</command> se n&atilde;o no
		<envar>PATH</envar>.  Defaults to <literal>xmkmf
		  -a</literal>.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>
    </sect1>

    <sect1 id="using-automake">
      <title>Usando o <command>automake</command>, <command>autoconf</command>,
	e <command>libtool</command></title>

      <table frame="none">
	<title>Vari&aacute;veis para os ports que usam o automake, autoconf ou
	  libtool</title>

	<tgroup cols="2">
	  <thead>
	    <row>
	      <entry>Vari&aacute;vel</entry>

	      <entry>Significado</entry>
	    </row>
	  </thead>

	  <tbody>
	    <row>
	      <entry><makevar>USE_AUTOMAKE</makevar></entry>

	      <entry>O port usa o <command>automake</command>.  Implica
		<makevar>USE_AUTOCONF</makevar> e
		<literal><makevar>USE_AUTOMAKE_VER</makevar>?=14</literal>.</entry>
	      </row>
		
	    <row>
	      <entry><makevar>AUTOMAKE</makevar></entry>

	      <entry>O path completo para o <command>automake</command> se n&atilde;o est&aacute;
		no <envar>PATH</envar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>USE_AUTOMAKE_VER</makevar></entry>

	      <entry>O port usa o <command>automake</command>.  Valores v&aacute;lidos
		para esta vari&aacute;vel s&atilde;o <literal>14</literal> e
		<literal>15</literal>, e define as
		vari&aacute;veis <makevar>AUTOMAKE_DIR</makevar> e
		<makevar>ACLOCAL_DIR</makevar>
		apropriadamente.</entry>
	    </row>

	    <row>
	      <entry><makevar>AUTOMAKE_ARGS</makevar></entry>

	      <entry>Um ou mais argumentos da linha de comando para passar ao
		<makevar>AUTOMAKE</makevar> se o
		<makevar>USE_AUTOMAKE_VER</makevar> &eacute; definido.</entry>
	    </row>

	    <row>
	      <entry><makevar>AUTOMAKE_ENV</makevar></entry>

	      <entry>Uma ou mais vari&aacute;veis de ambiente para definir (e seus
		valores) antes da execu&ccedil;&atilde;o <makevar>AUTOMAKE</makevar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>ACLOCAL</makevar></entry>

	      <entry>Define o path do GNU <command>aclocal</command> se
		ele n&atilde;o est&aacute; no <envar>PATH</envar>.  O default &eacute; definido
		de acordo com vari&aacute;vel
		<makevar>USE_AUTOMAKE_VER</makevar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>ACLOCAL_DIR</makevar></entry>
	      
	      <entry>Define ao path do GNU <command>aclocal</command>
		shared directory.  O default &eacute; definido de acordo com a
		vari&aacute;vel <makevar>USE_AUTOMAKE_VER</makevar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>AUTOMAKE_DIR</makevar></entry>

	      <entry>Define ao path do GNU <command>automake</command>
		shared directory.  O default &eacute; definido de acordo com a
		vari&aacute;vel <makevar>USE_AUTOMAKE_VER</makevar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>USE_AUTOCONF_VER</makevar></entry>

	      <entry>Especifica que o port use <command>autoconf</command>.
		O valor default &eacute; 213.</entry>
	    </row>

	    <row>
	      <entry><makevar>USE_AUTOCONF</makevar></entry>

	      <entry>Especifica que o port use <command>autoconf</command>.
		Implica <literal>GNU_CONFIGURE</literal> e
		<literal>USE_AUTOCONF_VER?=213</literal>.</entry>
	    </row>

	    <row>
	      <entry><makevar>AUTOCONF</makevar></entry>

	      <entry>Define ao path do GNU <command>autoconf</command> se ele
		n&atilde;o est&aacute; no <envar>PATH</envar>.  O default est&aacute; definido
		de acordo com a vari&aacute;vel
		<makevar>USE_AUTOCONF_VER</makevar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>AUTOCONF_ARGS</makevar></entry>

	      <entry>Argumentos da linha de comando para passar ao
		<command>autoconf</command>.</entry>
	    </row>

	    <row>
	      <entry><makevar>AUTOCONF_ENV</makevar></entry>

	      <entry>Define estes pares
		<literal><replaceable>vari&aacute;vel</replaceable>=<replaceable>valor</replaceable></literal> 
		no ambiente antes da execu&ccedil;&atilde;o do
		<command>autoconf</command>.</entry>
	    </row>

	    <row>
	      <entry><makevar>AUTOHEADER</makevar></entry>

	      <entry>Define ao path do GNU <command>autoheader</command> se
		ele n&atilde;o est&aacute; no <envar>PATH</envar>.  O default est&aacute; definido
		de acordo com <makevar>USE_AUTOCONF_VER</makevar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>AUTORECONF</makevar></entry>

	      <entry>Define ao path do GNU <command>autoreconf</command> se
		ele n&atilde;o est&aacute; no <envar>PATH</envar>.  O default est&aacute; definido
		de acordo com <makevar>USE_AUTOCONF_VER</makevar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>AUTOSCAN</makevar></entry>

	      <entry>Define ao path do GNU <command>autoscan</command> se ele
		n&atilde;o est&aacute; no <envar>PATH</envar>.  O default est&aacute; definido
		de acordo com <makevar>USE_AUTOCONF_VER</makevar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>AUTOIFNAMES</makevar></entry>

	      <entry>Define ao path do GNU <command>autoifnames</command> se
		ele n&atilde;o est&aacute; definido no <envar>PATH</envar>.  O default est&aacute; definido
		de acordo com <makevar>USE_AUTOCONF_VER</makevar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>USE_LIBTOOL</makevar></entry>

	      <entry>O port usa <command>libtool</command>.  Implica
		<makevar>GNU_CONFIGURE</makevar>.</entry>
	      </row>
	    
	    <row>
	      <entry><makevar>LIBTOOL</makevar></entry>

	      <entry>Define ao path do <command>libtool</command> se ele n&atilde;o
		est&aacute; definido no <envar>PATH</envar>.</entry>
	    </row>
	    
	    <row>
	      <entry><makevar>LIBTOOLFILES</makevar></entry>

	      <entry>Os arquivos ao patch para <command>libtool</command>.
		Defaults to <literal>aclocal.m4</literal> se
		<makevar>USE_AUTOCONF</makevar> est&aacute; definido,
		<literal>configure</literal> caso contr&aacute;rio.</entry>
	    </row>

	    <row>
	      <entry><makevar>LIBTOOLFLAGS</makevar></entry>

	      <entry>Adicionais flags to passar ao
		<command>ltconfig</command>.  Defaults ao
		<literal>--disable-ltlibs</literal>.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>
    </sect1>

    <sect1 id="using-gnome">
      <title>Usando o GNOME</title>

      <para>O projeto FreeBSD/GNOME usa um sistema chamado
	<literal>GNOMENG</literal> para definir quais componentes do GNOME um
	particular port usa. Uma
	<ulink url="http://www.FreeBSD.org/gnome/docs/porting.html">compreensiva
	lista destas vari&aacute;veis</ulink> existe com a homepage do
	projeto do FreeBSD/GNOME.</para>

    </sect1>

    <sect1 id="using-kde">
      <title>Usando o KDE</title>

      <table frame="none">
	<title>Vari&aacute;veis para os ports que usam o KDE</title>

	<tgroup cols="2">
	  <tbody>
	    <row>
	      <entry><makevar>USE_QT_VER</makevar></entry>

	      <entry>O port usa o toolkit do Qt.  Poss&iacute;veis valores s&atilde;o
		<literal>1</literal>, <literal>2</literal> e
		<literal>3</literal>;  cada um especifica a vers&atilde;o principal
		do Qt para uso.  Defina ambos <makevar>MOC</makevar> e
		<makevar>QTCPPFLAGS</makevar>aos valores default
		apropriados.</entry>
	    </row>

	    <row>
	      <entry><makevar>USE_KDELIBS_VER</makevar></entry>

	      <entry>O port usa bibliotecas do KDE.  Poss&iacute;veis valores s&atilde;o
		<literal>1</literal>, <literal>2</literal> e
		<literal>3</literal>;  cada um especifica a vers&atilde;o principal
		do KDE para uso.  Implica <makevar>USE_QT_VER</makevar>
		da vers&atilde;o apropriada.</entry>
	    </row>

	    <row>
	      <entry><makevar>USE_KDEBASE_VER</makevar></entry>

	      <entry>O port usa a base do KDE.  Poss&iacute;veis valores s&atilde;o
		<literal>1</literal>, <literal>2</literal> e
		<literal>3</literal>;  cada um especifica a vers&atilde;o principal
		de KDE para uso.  Implica <makevar>USE_KDELIBS_VER</makevar>
		da vers&atilde;o apropriada.</entry>
	    </row>

	    <row>
	      <entry><makevar>MOC</makevar></entry>

	      <entry>Defina ao path do <command>moc</command>.
		Default set de acordo com o valor do
		<makevar>USE_QT_VER</makevar>.</entry>
	    </row>

	    <row>
	      <entry><makevar>QTCPPFLAGS</makevar></entry>

	      <entry>Defina o <makevar>CPPFLAGS</makevar> para usar quando
		processando o c&oacute;digo Qt.  Default set de acordo com
		<makevar>USE_QT_VER</makevar> value.</entry>
	    </row>
	  </tbody>
	</tgroup>
      </table>

    </sect1>

    <sect1 id="using-bison">
      <title>Usando Bison</title>

      <para></para>
    </sect1>

    <sect1 id="using-java">
      <title>Usando Java</title>

      <para></para>
    </sect1>

    <sect1 id="using-python">
      <title>Usando Python</title>

      <para></para>
    </sect1>

    <sect1 id="using-emacs">
      <title>Usando Emacs</title>

      <para></para>
    </sect1>

    <sect1 id="using-ruby">
      <title>Usando Ruby</title>

      <para></para>
    </sect1>
    </chapter>

<!--

    <chapter>
      <title>ELF support</title>

      <para>Since FreeBSD changed to an ELF binary format shortly after
        3.0-RELEASE, we need to convert many ports that build shared
        libraries to support ELF.  Complicating this task is that a 3.0
        system can run as both ELF and a.out, and we wish to unofficially
        support the 2.2 branch as long as possible.  Below are the guidelines on
        how to convert a.out only ports to support both a.out and ELF
        compilation.</para>

      <para>Some part of this list is only applicable during the conversion,
        but will be left here for a while for reference in case you have come
        across some old port you wish to upgrade.</para>

      <sect1>
        <title>Moving a.out libraries out of the way</title>

        <para>Any a.out libraries should be moved out of
          <filename>/usr/local/lib</filename> and similar to an
          <filename>aout</filename> subdirectory.  (If you do not move them out
          of the way, ELF ports will happily overwrite a.out libraries.) The
          <maketarget>move-aout-libs</maketarget> target in the 3.0-CURRENT
          <filename>src/Makefile</filename> (called from
          <maketarget>aout-to-elf</maketarget>) will do this for you.  It will
          only move a.out libs so it is safe to call it on a system with both
          ELF and a.out libs in the standard directories.</para>
      </sect1>

      <sect1>
        <title>Format</title>

        <para>The ports tree will build packages in the format the machine is
          in.  This means a.out for 2.2 and a.out or ELF for 3.0 depending on
          what <command>`objformat`</command> returns.  Also, once users move
          a.out libraries to a subdirectory, building a.out libraries will be
          unsupported.  (I.e., it may still work if you know what you are
          doing, but you are on your own.)</para>

        <note>
          <para>If a port only works for a.out, set
            <makevar>BROKEN_ELF</makevar> to a string describing the reason
            why.  Such ports will be skipped during a build on an ELF
            system.</para>
        </note>
      </sect1>

      <sect1>
        <title><makevar>PORTOBJFORMAT</makevar></title>

        <para><filename>bsd.port.mk</filename> will set
          <makevar>PORTOBJFORMAT</makevar> to <literal>aout</literal> or
          <literal>elf</literal> and export it in the environments
          <envar>CONFIGURE_ENV</envar>, <envar>SCRIPTS_ENV</envar> and
          <envar>MAKE_ENV</envar>.  (It is always going to be
          <literal>aout</literal> in 2.2-STABLE).  It is also passed to
          <maketarget>PLIST_SUB</maketarget> as
          <literal>PORTOBJFORMAT=${PORTOBJFORMAT}</literal>.  (See comment on
          <literal>ldconfig</literal> lines below.)</para>

        <para>The variable is set using this line in
          <filename>bsd.port.mk</filename>:</para>

        <programlisting>PORTOBJFORMAT!= test -x /usr/bin/objformat && /usr/bin/objformat || echo aout</programlisting>

        <para>Ports' make processes should use this variable to decide what to
          do.  However, if the port's <filename>configure</filename> script
          already automatically detects an ELF system, it is not necessary to
          refer to <makevar>PORTOBJFORMAT</makevar>.</para>
      </sect1>

      <sect1>
        <title>Building shared libraries</title>

        <para>The following are differences in handling shared libraries for
          a.out and ELF.</para>

        <itemizedlist>
          <listitem>
            <para>Shared library versions</para>

            <para>An ELF shared library should be called
              <filename>libfoo.so.<replaceable>M</replaceable></filename>
              where <replaceable>M</replaceable> is the single version number,
              and an a.out library should be called
              <filename>libfoo.so.<replaceable>M</replaceable>.<replaceable>N</replaceable></filename>
              where <replaceable>M</replaceable> is the major version and
              <replaceable>N</replaceable> is the minor version number.
              Do not mix those; <emphasis>never</emphasis> install an ELF
              shared library called
              <filename>libfoo.so.<replaceable>N</replaceable>.<replaceable>M</replaceable></filename>
              or an a.out shared library (or symlink) called
              <filename>libfoo.so.<replaceable>N</replaceable></filename>.</para>
          </listitem>

          <listitem>
            <para>Linker command lines</para>

            <para>Assuming <command>cc -shared</command> is used rather than
              <command>ld</command> directly, the only difference is that you
              need to add
              <option>-Wl,-<replaceable>soname,libfoo.so.M</replaceable></option>
              on the command line for ELF.</para>
            </listitem>
        </itemizedlist>

        <para>You need to install a symlink from
          <filename>libfoo.so</filename> to
          <filename>libfoo.so.<replaceable>N</replaceable></filename> to make
          ELF linkers happy.  Since it should be listed in
          <filename>pkg-plist</filename> too, and it won't hurt in the a.out case
          (some ports even require the link for dynamic loading), you should
          just make this link regardless of the setting of
          <makevar>PORTOBJFORMAT</makevar>.</para>
      </sect1>

      <sect1>
        <title><makevar>LIB_DEPENDS</makevar></title>

        <para>All port <filename>Makefile</filename>s are edited to remove minor numbers from
          <makevar>LIB_DEPENDS</makevar>, and also to have the regexp support
          removed.  (E.g., <literal>foo\\.1\\.\\(33|40\\)</literal> becomes
          <literal>foo.2</literal>.)  They will be matched using <command>grep
            -wF</command>.</para>
      </sect1>

      <sect1>
        <title><filename>pkg-plist</filename></title>

        <para><filename>pkg-plist</filename> should contain the short (ELF) shlib
          names if the a.out minor number is zero, and the long (a.out) names
          otherwise.  <filename>bsd.port.mk</filename> will automatically add
          <literal>.0</literal> to the end of short shlib lines if
          <makevar>PORTOBJFORMAT</makevar> equals <literal>aout</literal>, and
          will delete the minor number from long shlib names if
          <makevar>PORTOBJFORMAT</makevar> equals
          <literal>elf</literal>.</para>

        <para>In cases where you really need to install shlibs with two
          versions on an ELF system or those with one version on an a.out
          system (for instance, ports that install compatibility libraries for
          other operating systems), define the variable
          <makevar>NO_FILTER_SHLIBS</makevar>.  This will turn off the editing
          of <filename>pkg-plist</filename> mentioned in the previous
          paragraph.</para>
      </sect1>

      <sect1>
        <title><literal>ldconfig</literal></title>

        <para>The <literal>ldconfig</literal> line in <filename>Makefile</filename>s should
          read:</para>

        <programlisting>${SETENV} OBJFORMAT=${PORTOBJFORMAT} ${LDCONFIG} -m ....</programlisting>

        <para>In <filename>pkg-plist</filename> it should read;</para>

        <programlisting>@exec /usr/bin/env OBJFORMAT=%%PORTOBJFORMAT%% /sbin/ldconfig -m ...
@unexec /usr/bin/env OBJFORMAT=%%PORTOBJFORMAT%% /sbin/ldconfig -R</programlisting>

        <para>This is to ensure that the correct <command>ldconfig</command>
          will be called depending on the format of the package, not the
          default format of the system.</para>
      </sect1>
    </chapter>

-->

    <chapter id="porting-masterdir">
      <title><makevar>MASTERDIR</makevar></title>

      <para>Se seu port necessita construir vers&otilde;es ligeiramente diferentes dos
        pacotes tendo uma vari&aacute;vel (por exemplo, resolu&ccedil;&atilde;o, ou tamanho do
        papel) pegue valores diferentes, crie um subdiret&oacute;rio por pacote para
        faze-lo mais facilmente aos usu&aacute;rios ver o que fazer, mas tentar compartilhar assim varios
        arquivos quanto poss&iacute;vel entre os ports.  Tipicamente voc&ecirc; somente necessita um muito curto
        <filename>Makefile</filename> em tudo mas um dos diret&oacute;rios se voc&ecirc;
        usar vari&aacute;veis inteligentes.  No &uacute;nico <filename>Makefile</filename>,
        voc&ecirc; pode usar <makevar>MASTERDIR</makevar> para especificar o diret&oacute;rio
        onde o resto dos arquivos est&atilde;o.  Tamb&eacute;m, use uma vari&aacute;vel como parte do
        <link linkend="porting-pkgname"><makevar>PKGNAMESUFFIX</makevar></link> assim
        os pacotes ter&atilde;o nomes diferentes.</para>

      <para>Isto ser&aacute; demonstrado melhor por um exemplo.  Isto &eacute; parte  do
        <filename>japanese/xdvi300/Makefile</filename>;</para>

      <programlisting>PORTNAME=       xdvi
PORTVERSION=    17
PKGNAMEPREFIX=  ja-
PKGNAMESUFFIX=  ${RESOLUTION}
 :
# default
RESOLUTION?=   300
.if ${RESOLUTION} != 118 && ${RESOLUTION} != 240 && \
       ${RESOLUTION} != 300 && ${RESOLUTION} != 400
       @${ECHO} "Error: invalid value for RESOLUTION: \"${RESOLUTION}\""
       @${ECHO} "Possible values are: 118, 240, 300 (default) and 400."
       @${FALSE}
.endif</programlisting>

      <para><filename role="package">japanese/xdvi300</filename>  tem tamb&eacute;m todos os regular
        patches, arquivos do pacote, etc.  Se voc&ecirc; digita <command>make</command>
        l&aacute;, ele pegar&aacute; o valor default para a resolu&ccedil;&atilde;o (300) e
        construir&aacute; o port normalmente.</para>

      <para>Assim para outras resolu&ccedil;&otilde;es, este &eacute; o <emphasis>inteiro</emphasis>
        <filename>xdvi118/Makefile</filename>:</para>

      <programlisting>RESOLUTION=     118
MASTERDIR=      ${.CURDIR}/../xdvi300

.include "${MASTERDIR}/Makefile"</programlisting>

      <para>(<filename>xdvi240/Makefile</filename> e
        <filename>xdvi400/Makefile</filename> s&atilde;o similares).  A
        defini&ccedil;&atilde;o <makevar>MASTERDIR</makevar> diz ao
        <filename>bsd.port.mk</filename> que a defini&ccedil;&atilde;o regular de
        subdiret&oacute;rios como <makevar>FILESDIR</makevar> e
        <makevar>SCRIPTDIR</makevar> are ser encontrado abaixo de
        <filename>xdvi300</filename>.  A linha <literal>RESOLUTION=118</literal>
        sobreescrever&aacute; a linha <literal>RESOLUTION=300</literal> em
        <filename>xdvi300/Makefile</filename> e o port ser&aacute; construido com a
        resolu&ccedil;&atilde;o definida a 118.</para>
    </chapter>

    <chapter id="shared">
      <title>Vers&otilde;es da biblioteca compartilhada</title>

      <para>Por favor leia nossa <ulink url="../developers-handbook/policies-shlib.html">pol&iacute;tica na
         biblioteca compartilhada versioning</ulink>  para compreender o que fazer com
        vers&otilde;es da biblioteca compartilhada em geral.  N&atilde;o blindly assume software
        authors know  sabe o que est&aacute; fazendo; muitos deles n&atilde;o.  &Eacute; muito
        importante que estes detalhes s&atilde;o cuidadosamente considerados, assim n&oacute;s temos
        quite a unique situation onde n&oacute;s estamos tentando ter d&uacute;zias de
        pares de software potencialmente incompat&iacute;veis co-existindo.  Importa&ccedil;&otilde;es
        de ports descuidadas tem causado grandes problemas considerando bibliotecas compartilhadas no
        passado (sempre queria saber por que o port <filename>jpeg-6b</filename> tem uma
        vers&atilde;o da biblioteca compartilhada de 9?). Se em d&uacute;vida, envie uma mensagem ao
        &a.ports;.  Na maioria das vezes, seu trabalho termina determinando a correta
        vers&atilde;o da biblioteca compartilhada e fazendo patches apropriados para
        implement&aacute;-lo.</para>

<!--
      <para>However, if there is a port which is a different version of the
        same software already in the tree, the situation is much more complex.
        In short, the FreeBSD implementation does not allow the user to
        specify to the linker which version of shared library to link against
        (the linker will always pick the highest numbered version).  This
        means, if there is a <filename>libfoo.so.3.2</filename> and
        <filename>libfoo.so.4.0</filename> in the system, there is no way to
        tell the linker to link a particular application to
        <filename>libfoo.so.3.2</filename>.  It is essentially completely
        overshadowed in terms of compilation-time linkage.  In this case, the
        only solution  is to rename the <emphasis>base</emphasis> part of the
        shared library.  For instance, change
        <filename>libfoo.so.4.0</filename> to
        <filename>libfoo4.so.1.0</filename> so both version 3.2 and 4.0 can be
        linked from other ports.</para>
-->
    </chapter>

    <chapter id="porting-manpages">
      <title>Manpages</title>

      <para>As vari&aacute;veis <makevar>MAN[1-9LN]</makevar> automaticamente adicionar&atilde;o
        quaisquer manpages ao <filename>pkg-plist</filename> (isto significa que voc&ecirc;
        <emphasis>n&atilde;o</emphasis> tem que listar manpages no
        <filename>pkg-plist</filename>&mdash;veja <link
          linkend="porting-plist">gerando PLIST</link> para mais).  Tamb&eacute;m
        faz o est&aacute;gio de instalar automaticamente compressa ou descompressa manpages
        dependendo das defini&ccedil;&otilde;es do <makevar>NOMANCOMPRESS</makevar> no
        <filename>/etc/make.conf</filename>.</para>

      <para>Se seu port tenta instalar nomes multiplos para manpages usando
        symlinks ou hardlinks, voc&ecirc; tem que usar a vari&aacute;vel <makevar>MLINKS</makevar>
        para identificar estes.  O link instalado pelo seu port ser&aacute;
        destru&iacute;do e recriado pelo <filename>bsd.port.mk</filename>
        para certificar-se que ele indica ao arquivo correto.  Quaisquer manpages
        listadas em MLINKS n&atilde;o tem que ser listada no
        <filename>pkg-plist</filename>.</para>

      <para>Para especificar whether o manpages s&atilde;o comprimidas na instala&ccedil;&atilde;o,
        use a vari&aacute;vel <makevar>MANCOMPRESSED</makevar>. Esta vari&aacute;vel pode
        ter tr&ecirc;s valores, <literal>yes</literal>, <literal>no</literal> e
        <literal>maybe</literal>. <literal>yes</literal> significa que manpages est&atilde;o
        j&aacute; instaladas comprimidas, <literal>no</literal> significa  que elas
        n&atilde;o est&atilde;o, e <literal>maybe</literal> significa que o software j&aacute; cumpre
        o valor do <makevar>NOMANCOMPRESS</makevar> assim
        <filename>bsd.port.mk</filename> n&atilde;o tem que fazer nada
        especial.</para>

      <para>O <makevar>MANCOMPRESSED</makevar> &eacute; automaticamente dfinido a
        <literal>yes</literal> se <makevar>USE_IMAKE</makevar> &eacute; definido e
        <makevar>NO_INSTALL_MANPAGES</makevar> n&atilde;o &eacute; definido, e para
        <literal>no</literal> ao contr&aacute;rio.  Voc&ecirc; n&atilde;o tem que defini-lo explicitamnete
        ao menos que o default n&atilde;o &eacute; suitable para seu port.</para>

      <para>Se seu port anchors its man tree em outro algum lugar que
        <makevar>PREFIX</makevar>, voc&ecirc; pode usar o
        <makevar>MANPREFIX</makevar> para defini-lo.  Tamb&eacute;m, se somente manpages em
        certain sections go in a non-standard place, como alguns ports do
        m&oacute;dulos <literal>perl</literal>, voc&ecirc; pode definir paths do man individual usando
        <makevar>MAN<replaceable>sect</replaceable>PREFIX</makevar> (onde
        <replaceable>sect</replaceable> &eacute; um de <literal>1-9</literal>,
        <literal>L</literal> ou <literal>N</literal>).</para>

      <para>Se seus manpages forem aos subdiret&oacute;rios de lingua-espec&iacute;fica, defina o
        nome das linguas ao <makevar>MANLANG</makevar>.  O valor desta
        vari&aacute;vel defaults to <literal>""</literal> (ex., somente
        Ingl&ecirc;s).</para>

      <para>Aqui est&aacute; um exemplo que colocamos eles todos juntos.</para>

      <programlisting>MAN1=          foo.1
MAN3=          bar.3
MAN4=          baz.4
MLINKS=        foo.1 alt-name.8
MANLANG=       "" ja
MAN3PREFIX=    ${PREFIX}/share/foobar
MANCOMPRESSED= yes</programlisting>

      <para>Teste estados que seis arquivos s&atilde;o instalados por este port;</para>

          <programlisting>${PREFIX}/man/man1/foo.1.gz
${PREFIX}/man/ja/man1/foo.1.gz
${PREFIX}/share/foobar/man/man3/bar.3.gz
${PREFIX}/share/foobar/man/ja/man3/bar.3.gz
${PREFIX}/man/man4/baz.4.gz
${PREFIX}/man/ja/man4/baz.4.gz</programlisting>

      <para>Adicionalmente <filename>${PREFIX}/man/man8/alt-name.8.gz</filename>
        pode or n&atilde;o ser instalado por seu port.  Regardless, um
        symlink ser&aacute; criado para juntar o manpage foo(1) e
        manpage alt-name(8).</para>

    </chapter>

    <chapter id="porting-motif">
      <title>Ports que necessitam Motif</title>

      <para>H&aacute; muitos programas que necessitam um biblioteca do Motif (dispon&iacute;vel
        de diversos commercial vendors, enquanto h&aacute; um clone livre relatado
        para ser capaz de executar muitas aplica&ccedil;&otilde;es no
        <filename role="package">x11-toolkits/lesstif</filename>) para compilar.  Desde que ele &eacute; um
        popular toolkit e suas licen&ccedil;as normalmente permitem redistribui&ccedil;&atilde;o dos
        bin&aacute;rios linkados estaticamente, n&oacute;s temos feito clausulas especiais para
        manusear ports que necessitam o Motif de um modo que n&oacute;s podemos facilmente compilar
        bin&aacute;rios linkados either din&acirc;micamente (para pessoas que est&atilde;o compilando do
        port) ou estaticamente (para pessoas que distribuem pacotes).</para>

      <sect1 id="motif-use">
        <title><makevar>USE_MOTIF</makevar></title>

        <para>Se seu port necessita o Motif, defina esta vari&aacute;vel no
          <filename>Makefile</filename>.  Isto impedir&aacute; pessoas que n&atilde;o possui uma c&oacute;pia do Motif
          de mesmo que tentando constru&iacute;-lo.</para>
      </sect1>

      <sect1 id="motif-lib">
        <title><makevar>MOTIFLIB</makevar></title>

        <para>Esta vari&aacute;vel ser&aacute; definida pelo <filename>bsd.port.mk</filename> para
          ser a refer&ecirc;ncia apropriada a biblioteca do Motif.  Por favor patch o
          fonte para usar isto onde quer que a biblioteca do Motif est&aacute; refer&ecirc;nciada no
          <filename>Makefile</filename> ou
          <filename>Imakefile</filename>.</para>

        <para>H&aacute; dois casos comuns:</para>

        <itemizedlist>
          <listitem>
            <para>Se o port refere a biblioteca do Motif assim
              <literal>-lXm</literal> em seu <filename>Makefile</filename> ou
              <filename>Imakefile</filename>, simplesmente substitua
              <literal>&dollar;{MOTIFLIB}</literal> para ele.</para>
          </listitem>

          <listitem>
            <para>Se o port usa <literal>XmClientLibs</literal> em seu
              <filename>Imakefile</filename>, mude-o para
              <literal>&dollar;{MOTIFLIB} &dollar;{XTOOLLIB}
                &dollar;{XLIB}</literal>.</para>
          </listitem>

        </itemizedlist>

        <para>Note que <makevar>MOTIFLIB</makevar> (geralmente) expande a
          <literal>-L/usr/X11R6/lib -lXm</literal> ou
          <literal>/usr/X11R6/lib/libXm.a</literal>, assim n&atilde;o h&aacute; nenhuma necessidade
          para adicionar <literal>-L</literal> ou <literal>-l</literal> na frente.</para>
      </sect1>
    </chapter>

    <chapter id="x11-fonts">
      <title>Fontes do X11</title>

      <para>Se seu port instala fontes para o X Window System, coloque-os em
        <filename><makevar>X11BASE</makevar>/lib/X11/fonts/local</filename>.
        Este diret&oacute;rio &eacute; novo para <application>XFree86 3.3.3</application>.  Se n&atilde;o existir,
        por favor crie-o, e print out um mensagem urging o usu&aacute;rio para atualizar
        suas <application>XFree86</application> para 3.3.3 ou mais nova, ou ao menos adicione
        este diret&oacute;rio ao path da fonte em <filename>/etc/XF86Config</filename>.</para>
    </chapter>

    <chapter id="porting-info">
      <title>Arquivos Info</title>

      <para>Se seu pacote necessitar instalar arquivos GNU info, eles devem ser
        listados na vari&aacute;vel <makevar>INFO</makevar> (sem o trailing
        <literal>.info</literal>), e apropriada instala&ccedil;&atilde;o/desinstala&ccedil;&atilde;o
        code ser&aacute; automaticamente adicionado ao tempor&aacute;rio
        <filename>pkg-plist</filename> antes da registra&ccedil;&atilde;o do pacote.</para>
    </chapter>

    <chapter id="pkg-files">
      <title>Os arquivos <filename>pkg-<replaceable>*</replaceable></filename></title>

      <para>H&aacute; alguns truques que n&oacute;s n&atilde;o mencionamos ainda sobre os
        arquivos <filename>pkg-<replaceable>*</replaceable></filename>
        que vem acess&iacute;vel &agrave;s vezes.</para>

      <sect1 id="porting-message">
        <title><filename>pkg-message</filename></title>

        <para>Se voc&ecirc; necessitar indicar uma mensagem ao instalador, voc&ecirc; pode colocar 
          a mensagem em <filename>pkg-message</filename>.  Esta capability &eacute;
          frequentemente &uacute;til mostrar as etapas adicionais da instala&ccedil;&atilde;o a ser feitas
          ap&oacute;s um &man.pkg.add.1; ou mostrar informa&ccedil;&atilde;o de
          licenceamento.</para>

        <note>
          <para>O arquivo <filename>pkg-message</filename> n&atilde;o precisa ser
            adicionado ao <filename>pkg-plist</filename>.  Tamb&eacute;m, n&atilde;o come&ccedil;ar&aacute;
            automaticamente printed se o usu&aacute;rio est&aacute; usando o port, n&atilde;o o
            pacote, assim voc&ecirc; deve provavelmente mostra-lo do target
            <maketarget>post-install</maketarget> voc&ecirc; mesmo.</para>
        </note>
      </sect1>

      <sect1 id="pkg-install">
        <title><filename>pkg-install</filename></title>

        <para>Se seu port necessitar executar comandos quando o pacote bin&aacute;rio
          est&aacute; instalado com &man.pkg.add.1;  voc&ecirc; pode fazer isto atrav&eacute;s do
          script <filename>pkg-install</filename>.  Este script
          automaticamente ser&aacute; adicionado ao pacote, e ser&aacute; executado duas vezes pelo
          &man.pkg.add.1;.  A primeira vez como
          <literal>&dollar;{SH} pkg-install &dollar;{PKGNAME}
          PRE-INSTALL</literal>  e a segunda vez como
          <literal>&dollar;{SH} pkg-install &dollar;{PKGNAME} POST-INSTALL</literal>. 
          <literal>&dollar;2</literal>  podem ser testados para determinar qual modo
          o script est&aacute; sendo executado.  A vari&aacute;vel ambiental
          <envar>PKG_PREFIX</envar> ser&aacute; definida o diret&oacute;rio de instala&ccedil;&atilde;o do
          pacote.  Veja &man.pkg.add.1; para
          informa&ccedil;&atilde;o adicional.</para>

        <note>
          <para>Este script n&atilde;o &eacute; executado automaticamente se voc&ecirc; instala o port
            com <command>make install</command>.  Se voc&ecirc; est&aacute; dependendo dele
            ser executado, voc&ecirc; ter&aacute; que explicitamente cham&aacute;-lo de seu <filename>Makefile</filename>
            port.</para>
        </note>
      </sect1>

      <sect1 id="pkg-deinstall">
        <title><filename>pkg-deinstall</filename></title>

        <para>Este script executa quando um pacote &eacute; removido.</para>

        <para>
          Este script ser&aacute; executado duas vezes pelo &man.pkg.delete.1;.
          A primeira vez como <literal>&dollar;{SH} pkg-install &dollar;{PKGNAME}
          DEINSTALL</literal>  e a segunda vez como
          <literal>&dollar;{SH} pkg-install &dollar;{PKGNAME} POST-DEINSTALL</literal>.
        </para>
      </sect1>

      <sect1 id="pkg-req">
        <title><filename>pkg-req</filename></title>

        <para>Se seu port precisa determinar se ele deve instalar ou n&atilde;o, voc&ecirc;
          pode criar um script das <quote>necessidades</quote> do <filename>pkg-req</filename>.
          Ser&aacute; invocado automaticamente no
          tempo de instala&ccedil;&atilde;o/desinstala&ccedil;&atilde;o para determinar se ou n&atilde;o
          a instala&ccedil;&atilde;o/desinstala&ccedil;&atilde;o deve proseguir.</para>

        <para>O script ser&aacute; executado no tempo instala&ccedil;&atilde;o pelo
          &man.pkg.add.1; como
          <literal>pkg-req &dollar;{PKGNAME} INSTALL</literal>.
          No tempo da desinstala&ccedil;&atilde;o ser&aacute; executado pelo
          &man.pkg.delete.1; como
          <literal>pkg-req &dollar;{PKGNAME} DEINSTALL</literal>.</para>
      </sect1>

      <sect1 id="porting-plist">
        <title>Mudando o <filename>pkg-plist</filename> baseado nas
          vari&aacute;veis do make</title>

        <para>Alguns ports, particularmente os ports <literal>p5-</literal>,
          precisam mudar seus <filename>pkg-plist</filename> dependendo de
          que op&ccedil;&otilde;es eles s&atilde;o configurados com (ou vers&atilde;o do
          <literal>perl</literal>, neste caso do ports
          <literal>p5-</literal>).  Para fazer isto f&aacute;cil, quaisquer instancias no
          <filename>pkg-plist</filename> do <literal>%%OSREL%%</literal>,
          <literal>%%PERL_VER%%</literal>, e
          <literal>%%PERL_VERSION%%</literal> ser&aacute; substituida
          apropriadamente.  O valor de <literal>%%OSREL%%</literal> &eacute; a
          revis&atilde;so num&eacute;rica do sistema operacional (ex.,
          <literal>2.2.7</literal>).  <literal>%%PERL_VERSION%%</literal> &eacute;
          o numero da vers&atilde;o completa do <literal>perl</literal> (ex.,
          <literal>5.00502</literal>) e <literal>%%PERL_VER%%</literal>
          &eacute; o numero da vers&atilde;o do <literal>perl</literal> menos
          o patchlevel (ex., <literal>5.005</literal>).</para>

        <para>Se voc&ecirc; precisar fazer outras substitui&ccedil;&otilde;es, voc&ecirc; pode definir a
          vari&aacute;vel <makevar>PLIST_SUB</makevar> com uma lista de pares 
          <literal><replaceable>VAR</replaceable>=<replaceable>VALUE</replaceable></literal>
          e exemplos de
          <literal>%%<replaceable>VAR</replaceable>%%</literal> ser&aacute;
          substitu&iacute;da com o <replaceable>VALUE</replaceable> no
          <filename>pkg-plist</filename>.</para>

        <para>Por exemplo, se voc&ecirc; tiver um port que instale muitos arquivos no
          subdiret&oacute;rio da espec&iacute;fica-vers&atilde;o, voc&ecirc; pode colocaralgo como

          <programlisting>OCTAVE_VERSION= 2.0.13
PLIST_SUB=      OCTAVE_VERSION=${OCTAVE_VERSION}</programlisting>

          no <filename>Makefile</filename> e usar
          <literal>%%OCTAVE_VERSION%%</literal> onde quer que a vers&atilde;o apare&ccedil;a
          no <filename>pkg-plist</filename>.  Essa maneira, quando voc&ecirc; upgrade o port,
          n&atilde;o ter&aacute; que mudar d&uacute;zias (ou em alguns casos, centenas) de
          linhas no <filename>pkg-plist</filename>.</para>

        <para>Esta substitui&ccedil;&atilde;o (assim bem como adi&ccedil;&atilde;o de alguns <link
          linkend="porting-manpages">manual pages</link>) ser&atilde;o feitas entre
          o <maketarget>pre-install</maketarget> e
          <maketarget>do-install</maketarget> targets, lendo de
          <makevar>PLIST</makevar> e escrevendo ao <makevar>TMPPLIST</makevar>
          (default:
          <filename><makevar>WRKDIR</makevar>/.PLIST.mktmp</filename>).  Assim se
          seu port construir <makevar>PLIST</makevar> on the fly, fa&ccedil;a assim ou
          antes de <maketarget>pre-install</maketarget>.  Tamb&eacute;m, se seu port
          precisa de editar o arquivo resultante, fa&ccedil;a assim que o
          <maketarget>post-install</maketarget> a um arquivo chamado
          <makevar>TMPPLIST</makevar>.</para>
      </sect1>

      <sect1 id="pkg-names">
        <title id="porting-pkgfiles">Mudando os nomes dos
          arquivos <filename>pkg-<replaceable>*</replaceable></filename></title>

        <para>Todos os nomes dos arquivos <filename>pkg-<replaceable>*</replaceable></filename>
          s&atilde;o definidos usando vari&aacute;veis assim voc&ecirc; pode mud&aacute;-las em seu
          <filename>Makefile</filename> se mprecisar ser.  Isto &eacute; especialmente &uacute;til
          quando voc&ecirc; est&aacute; compartilhando os mesmos arquivos <filename>pkg-<replaceable>*</replaceable></filename>
          entre diversos ports ou ter que escrever a um dos arquivos acima (veja
          <link linkend="porting-wrkdir">escrevendo a outros lugares que
          <makevar>WRKDIR</makevar></link> for porque ele &eacute; uma m&aacute; id&eacute;ia escrever
          diretamente dentro do subdiret&oacute;rio <filename>pkg-<replaceable>*</replaceable></filename>).</para>

        <para>Aqui est&aacute; uma lista de nomes de vari&aacute;veis e seus valores
          default.  (<makevar>PKGDIR</makevar> defaults to
          <makevar>${MASTERDIR}</makevar>.)</para>

        <informaltable frame="none">
          <tgroup cols="2">
            <thead>
              <row>
                <entry>Vari&aacute;vel</entry>
                <entry>Valor Default</entry>
              </row>
            </thead>

            <tbody>
              <row>
                <entry><makevar>DESCR</makevar></entry>
                <entry><literal>${PKGDIR}/pkg-descr</literal></entry>
              </row>

              <row>
                <entry><makevar>PLIST</makevar></entry>
                <entry><literal>${PKGDIR}/pkg-plist</literal></entry>
              </row>

              <row>
                <entry><makevar>PKGINSTALL</makevar></entry>
                <entry><literal>${PKGDIR}/pkg-install</literal></entry>
              </row>

              <row>
                <entry><makevar>PKGDEINSTALL</makevar></entry>
                <entry><literal>${PKGDIR}/pkg-deinstall</literal></entry>
              </row>

              <row>
                <entry><makevar>PKGDEINSTALL</makevar></entry>
                <entry><literal>${PKGDIR}/pkg-deinstall</literal></entry>
              </row>

              <row>
                <entry><makevar>PKGREQ</makevar></entry>
                <entry><literal>${PKGDIR}/pkg-req</literal></entry>
              </row>

              <row>
                <entry><makevar>PKGMESSAGE</makevar></entry>
                <entry><literal>${PKGDIR}/pkg-message</literal></entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>

        <para>Por favor mude estas vari&aacute;veis melhor que sobrescrevendo
          <makevar>PKG_ARGS</makevar>.  Se voc&ecirc; mudar
          <makevar>PKG_ARGS</makevar>, aqueles arquivos n&atilde;o ser&atilde;o corretamente
          instalados sobre <filename>/var/db/pkg</filename> instale de um
          port.</para>
      </sect1>
    </chapter>

  <chapter id="testing">
    <title>Testando seu port</title>

      <sect1 id="testing-portlint">
        <title>Portlint</title>

        <para>Verifique seu trabalho com o <link
            linkend="porting-portlint"><command>portlint</command></link>
           antes que voc&ecirc; o envie ou commit.</para>
      </sect1>


      <sect1 id="porting-prefix">
        <title><makevar>PREFIX</makevar></title>

        <para>Tente fazer seu port instalar relativo ao
          <makevar>PREFIX</makevar>.  (O valor desta vari&aacute;vel se&aacute; definida
          ao <makevar>LOCALBASE</makevar> (default
          <filename>/usr/local</filename>), ao menos
          <makevar>USE_X_PREFIX</makevar> ou <makevar>USE_IMAKE</makevar> &eacute;
          definido, em qual caso ele ser&aacute; <makevar>X11BASE</makevar> (default
          <filename>/usr/X11R6</filename>).</para>

        <para>N&atilde;o hard-coding <filename>/usr/local</filename> ou
          <filename>/usr/X11R6</filename> qualquer lugar no fonte far&aacute; o
          port muito mais flexivel e capaz de atender as necessidades dos outros
          locais.  Para ports do X que usam <command>imake</command>, isto &eacute;
          autom&aacute;tico; caso contr&aacute;rio, isto pode frequentemente ser feito simplesmente
          substituindo as ocorr&ecirc;ncias de <filename>/usr/local</filename> (ou
          <filename>/usr/X11R6</filename> para ports do X que n&atilde;o usam imake)
          nos v&aacute;rios <filename>scripts/Makefile</filename>s no port para ler
          <makevar>PREFIX</makevar>, assim esta vari&aacute;vel &eacute; automaticamente passada
          abaixo a todo est&aacute;gio do processo de constru&ccedil;&atilde;o e instala&ccedil;&atilde;o.</para>

	<para>Certifique-se que sua aplica&ccedil;&atilde;o n&atilde;o est&aacute; instalando coisas em 
	<filename>/usr/local</filename> ao inv&eacute;s de <makevar>PREFIX</makevar>.
	Um teste r&aacute;pido para isto &eacute; fazer isto:</para>

	<screen>&prompt.root; <userinput>make clean; make package PREFIX=/var/tmp/<replaceable>port-name</replaceable></userinput></screen>
	
	<para>Se qualquer coisa for instalada fora do <makevar>PREFIX</makevar>, 
	fazendo o processo da cria&ccedil;&atilde;o do pacote queixar&aacute; que ele
	n&atilde;o pode encontrar os arquivos.</para>

	<!-- XXX This paragraph is confusing and poorly indented. -->
	<para>Isto n&atilde;o testa a exist&ecirc;ncia de refer&ecirc;ncias internas,
	ou corrige o uso de <makevar>LOCALBASE</makevar> a  refer&ecirc;ncias ao
	files from other ports.  Testing the installation in
	<filename>/var/tmp/<replaceable>port-name</replaceable></filename>
	para fazer que enquanto voc&ecirc; tenha-o instalado faria aquilo.</para>

        <para>N&atilde;o defina <makevar>USE_X_PREFIX</makevar> ao menos que seu port
          verdadeiramente necessite-o (ex., ele linka contra libs do X ou ele precisa
          referenciar arquivos em <makevar>X11BASE</makevar>).</para>

        <para>A vari&aacute;vel <makevar>PREFIX</makevar> pode ser reassigned em seu
          <filename>Makefile</filename> ou no ambiente do usu&aacute;rio.
          Entretanto, ele &eacute; fortemente desencorajado a ports individuais para definir esta
          vari&aacute;vel explicitamente no <filename>Makefile</filename>s.</para>

        <para>Tamb&eacute;m, refer aos programas/arquivos de outros ports com as
          vari&aacute;veis mencionadas acima, n&atilde;o explicita pathnames.  Por exemplo, se
          seu port necessita de um macro <literal>PAGER</literal> para ser o
          pathname completo do <command>less</command>, use a flag do compilador:

          <programlisting>-DPAGER=\"&dollar;{PREFIX}/bin/less\"</programlisting>

          ou

          <programlisting>-DPAGER=\"&dollar;{LOCALBASE}/bin/less\"</programlisting>

          se este &eacute; um port do X, ao inv&eacute;s de
          <literal>-DPAGER=\"/usr/local/bin/less\"</literal>. Esta maneira ele
          ter&aacute; um chance melhor de trabalho se o administrador do sistema
          moveu toda a arvore <filename>/usr/local</filename> em algum lugar mais.</para>
      </sect1>

      <sect1 id="testing-freshports">
	<title>Teste de sanidade do FreshPorts</title>

	<para>O <ulink url="http://www.FreshPorts.org/">FreshPorts</ulink> tem
	  uma caracterisca teste de sanidade qual automaticamente testa cada commit a
	  arvore do ports do FreeBSD.  Se subscribed to este servi&ccedil;o, voc&ecirc; ser&aacute;
	  notificado de quaisquer erros qual o FreshPorts detecta durante o teste de
	  sanidade de seus commits.</para>

	<para>Se voc&ecirc; desejar usar este servi&ccedil;o, tudo que voc&ecirc; necessita &eacute; uma
	  conta do FreshPorts.  Se seu endere&ccedil;o de email registrado &eacute;
	  <literal>@FreeBSD.org</literal>, voc&ecirc; ver&aacute; o link opt-in no
          no lado da m&atilde;o direta das p&aacute;guina da web.
	  Para aqueles como voc&ecirc; que j&aacute; tem uma conta do FreshPorts, mas n&atilde;o est&atilde;o
	  usando seu endere&ccedil;o de email <literal>@FreeBSD.org</literal>,
	  s&oacute; mude seu email para <literal>@FreeBSD.org</literal>, subscribe,
          ent&atilde;o mude-o de volta novamente.</para>
      </sect1>
  </chapter>

    <chapter id="port-upgrading">
      <title>Upgrading</title>

      <para>Quando voc&ecirc; notice que um port est&aacute; fora da data comparado ao ultima
        vers&atilde;o do autores originais, primeiro certifique-se que voc&ecirc; tenha o ultimo
        port.  Voc&ecirc; pode encontr&aacute;-los no
        diret&oacute;rio <filename>ports/ports-current</filename> dos sites espelhos do
        FTP.  Voc&ecirc; pode tamb&eacute;m usar <application>CVSup</application>  manter sua cole&ccedil;&atilde;o inteira dos ports
        up-to-date, como descrito no <ulink url="../handbook/synching.html#CVSUP-CONFIG">Handbook</ulink>.</para>

      <para>O pr&oacute;ximo passo &eacute; enviar um email aoe mantedor, se ele est&aacute;
        listado no <filename>Makefile</filename> do port.  Essa pessoa pode
        j&aacute; estar trabalhando em uma atualiza&ccedil;&atilde;o, ou ter uma raz&atilde;o para n&atilde;o upgrade o
        port exato agora (por causa de, por exemplo, problemas de estabilidade da nova
        vers&atilde;o).</para>

      <para>Se o mantedor pedir que voc&ecirc; fa&ccedil;a o melhoramento ou n&atilde;o h&aacute; qualquer
        such pessoa para come&ccedil;ar com, por favor fa&ccedil;a o upgrade e envie o
        diff recursivo (either unified ou contexto diff &eacute; muito bom, mas o port
        committers parecem preferir unified diff more) do novo e antigos
        diret&oacute;rios ports a n&oacute;s (ex., se seu port modificado &eacute;
        chamado <filename>superedit</filename> e o original est&aacute; em nossa arvore
        como <filename>superedit.bak</filename>, ent&atilde;o envie-nos o resultado do
        <command>diff -ruN superedit.bak superedit</command>).  Por favor examine
        a sa&iacute;da para certificar-se que todas as mudan&ccedil;as fa&ccedil;a sentido.  A melhor maneira
        para nos enviar o diff &eacute; incluindo ele atrav&eacute;s &man.send-pr.1; (categoria
        <literal>ports</literal>).  Se voc&ecirc; for o mantedor para o port,
	be sure para colocar <literal>[atualiza&ccedil;&atilde;o do mantedor]</literal> no come&ccedil;o
	da sua linha de sinopse e/ou defina a <quote>Class</quote> de seu PR
	ao <literal>maintainer-update</literal>.  Por favor mencione quaisquer arquivos 
	adicionados ou apagados na mensagem, as eles temm que ser explicitamente espec&iacute;ficado
	ao CVS quando fazendo um commit.  Se o diff &eacute; maior que 20KB,
	por favor comprima e uuencode ele; caso controrio, s&oacute; inclua-o no PR
	as is.</para>

      <important>
	<para> Se seu upgrade &eacute; motivado por interesses da segun&ccedil;a ou uma
	  falta s&eacute;ria no port committed atualmente, por favor notif&iacute;que
	  o &a.portmgr; para pedir imediata reconstru&ccedil;&atilde;o e
	  redistribui&ccedil;&atilde;o de seu pacote do port.  Usu&aacute;rios confiantes
	  do &man.pkg.add.1; caso contr&aacute;rio continuar&aacute; instalar a
	  vers&atilde;o antiga atrav&eacute;s do <command>pkg_add -r</command> por v&aacute;rias
	  semanas.</para>
      </important>

      <note>
        <para>Mais uma vez, por favor use &man.diff.1; e n&atilde;o &man.shar.1; para enviar
          atualizac&otilde;es a ports existente!</para>
      </note>
    </chapter>

    <chapter id="porting-dads">
      <title>Fazer e N&atilde;o Fazer</title>

      <para>Est&aacute; aqui uma lista de comuns fazer e n&atilde;o fazer que voc&ecirc; encontra durante
        o processo de porting.  Voc&ecirc; deve verificar seu pr&oacute;prio port against esta lista,
        but you can also check ports in the PR database that others have
        submitted.  Envie quaisquer coment&aacute;rios no ports que voc&ecirc; verificou assim descrito no
        <ulink url="../../articles/contributing/contrib-how.html#CONTRIB-GENERAL">Bug Reports e Coment&aacute;rio
          Geral</ulink>.  Verificando ports na base de dados do PR database ambos far&atilde;o
        it mais r&aacute;pido para n&oacute;s commit -los, e provar que voc&ecirc; sabe o que voc&ecirc; est&aacute;
        fazendo.</para>

      <sect1 id="dads-strip">
        <title>Bin&aacute;rios Stripping</title>

        <para>N&atilde;o strip bin&aacute;rios manualmente ao menos que voc&ecirc; tenha.  Todos bin&aacute;rios
          devem ser stripped, mas o macro <maketarget>INSTALL_PROGRAM</maketarget>
          instalar&aacute; e strip um bin&aacute;rio ap mesmo tempo (veja a pr&oacute;xima
          se&ccedil;&atilde;o).</para>

        <para>Se voc&ecirc; necessitar strip um arquivo, mas n&atilde;o deseje usar o
          macro <makevar>INSTALL_PROGRAM</makevar>,
          <makevar>${STRIP_CMD}</makevar> will strip seu programa.  Isto &eacute;
          feito tipicamente com o <literal>post-install</literal>
          target.  Por exemplo:</para>

        <programlisting>post-install:
        ${STRIP_CMD} ${PREFIX}/bin/xdl</programlisting>

        <para>Use o comando  &man.file.1; nos execut&aacute;veis instalados para
          verificar se o bin&aacute;rio est&aacute; stripped ou n&atilde;o.  Se ele n&atilde;o diz
          <literal>not stripped</literal>, ele est&aacute; stripped.  Adicionalmente,
          &man.strip.1; will not strip um programa anteoriormente previously stripped; ele
          ao inv&eacute;s sair&aacute; claramnete.</para>
      </sect1>

      <sect1 id="dads-install">
        <title>INSTALL_* macros</title>

        <para>Use os macros fornecidos em <filename>bsd.port.mk</filename>
          para assegurar modos corretos e ownership dos arquivos em seu pr&oacute;prio
          <maketarget>*-install</maketarget> targets.</para>

        <itemizedlist>
          <listitem>
            <para><makevar>INSTALL_PROGRAM</makevar> &eacute; um comando para instalar
              execut&aacute;veis bin&aacute;rios.</para>
          </listitem>

          <listitem>
            <para><makevar>INSTALL_SCRIPT</makevar> &eacute; um comando para instalar
              scripts execut&aacute;veis.</para>
          </listitem>

          <listitem>
            <para><makevar>INSTALL_DATA</makevar> &eacute; um comando para instalar
              dados compartilhaveis.</para>
          </listitem>

          <listitem>
            <para><makevar>INSTALL_MAN</makevar> &eacute; um comando para instalar
              manpages e outras documenta&ccedil;&otilde;es (ele n&atilde;o comprime
              qualquer coisa).</para>
          </listitem>
        </itemizedlist>

        <para>Estes s&atilde;o basicamente o comando <command>install</command> com
          todos flags apropriadas.  Veja abaixo para um exemplo em como
          us&aacute;-los.</para>
      </sect1>

      <sect1 id="porting-wrkdir">
        <title><makevar>WRKDIR</makevar></title>

        <para>N&atilde;o escreva qualquer coisa aos arquivos do lado de fora do
          <makevar>WRKDIR</makevar>.  <makevar>WRKDIR</makevar> &eacute; o &uacute;nico
         lugar que &eacute; garantido para ser grav&aacute;vel durante a constru&ccedil;&atilde;o do port (veja
          <ulink url="../handbook/ports-using.html#PORTS-CD">
          compilando ports do CDROM</ulink> para um
          exemplo de constru&ccedil;&atilde;o de ports de uma arvore somente-leitura).  Se voc&ecirc; necessitar
          modificar um dos arquivos <filename>pkg-<replaceable>*</replaceable></filename>,
           fa&ccedil;a assim <link
          linkend="porting-pkgfiles">redefinindo a vari&aacute;vel</link>, n&atilde;o
          escrevendo sobre ele.</para>
      </sect1>

      <sect1 id="porting-wrkdirprefix">
        <title><makevar>WRKDIRPREFIX</makevar></title>

        <para>Certifique-se que seu port honors <makevar>WRKDIRPREFIX</makevar>.
          A maioria dos ports n&atilde;o t&ecirc;m que preocupar-se sobre isto.  Em particular, se voc&ecirc;
          est&aacute; referindo a um <makevar>WRKDIR</makevar> de um outro port, note
          que a posi&ccedil;&atilde;o correta &eacute;
          <filename><makevar>WRKDIRPREFIX</makevar><makevar>PORTSDIR</makevar>/<replaceable>subdir</replaceable>/<replaceable>name</replaceable>/work</filename> not <filename><makevar>PORTSDIR</makevar>/<replaceable>subdir</replaceable>/<replaceable>name</replaceable>/work</filename> ou <filename><makevar>.CURDIR</makevar>/../../<replaceable>subdir</replaceable>/<replaceable>name</replaceable>/work</filename> or some such.</para>

        <para>Tamb&eacute;m, se voc&ecirc; est&aacute; definindo <makevar>WRKDIR</makevar> voc&ecirc; mesmo,
          certifique-se que voc&ecirc; prepend
          <literal>&dollar;{WRKDIRPREFIX}&dollar;{.CURDIR}</literal> in the
          front.</para>
      </sect1>

      <sect1 id="porting-versions">
        <title>Diferenciando sistemas operacionais e vers&otilde;es de OS</title>

        <para>Voc&ecirc; pode vir atrav&eacute;s do c&oacute;digo que necessita as modifica&ccedil;&otilde;es ou a compila&ccedil;&atilde;o
          condicional baseadas em que vers&atilde;o do Unix est&aacute; executando sobre.  Se
           voc&ecirc; necessitar fazer tais mudan&ccedil;as ao c&oacute;digo para a compila&ccedil;&atilde;o
          condicional, certifique-se que voc&ecirc; fez as mudan&ccedil;as tanto geral quanto poss&iacute;vel
          assim que n&oacute;s podemos back-port code aos sistemas FreeBSD 1.x e cross-port
          a outros sistemas BSD como 4.4BSD de CSRG, BSD/386, 386BSD,
          NetBSD, e OpenBSD.</para>

        <para>A maneira preferida para dizer 4.3BSD/Reno (1990) e novas vers&otilde;es
          do c&oacute;digo BSD code apart &eacute; usando o <literal>BSD</literal> macro
          definido no <filename>&lt;sys/param.h&gt;</filename>.  Hopefully that
          arquivo est&aacute; j&aacute; incluido; se n&atilde;o, adicione o c&oacute;digo:</para>

        <programlisting>#if (defined(__unix__) || defined(unix)) &amp;&amp; !defined(USG)
#include &lt;sys/param.h&gt;
#endif</programlisting>

        <para>ao lugar apropriado no arquivo <filename>.c</filename>.  N&oacute;s
          acreditamos que cada sistema que define estes dois s&iacute;mbolos tem
          <filename>sys/param.h</filename>.  Se voc&ecirc; encontrasse um sistema que
          n&atilde;o, n&oacute;s gostar&iacute;amos de saber.  Por favor envie o mail ao
          &a.ports;.</para>

        <para>Uma outra maneira &eacute; usar o estilo GNU Autoconf de fazer
          isto:</para>

        <programlisting>#ifdef HAVE_SYS_PARAM_H
#include &lt;sys/param.h&gt;
#endif</programlisting>

        <para>N&atilde;o se esque&ccedil;a de adicionar <literal>-DHAVE_SYS_PARAM_H</literal> ao
          <makevar>CFLAGS</makevar> no <filename>Makefile</filename> para
          este m&eacute;todo.</para>

        <para>Uma vez que voc&ecirc; tenha <filename>sys/param.h</filename> inclu&iacute;do, voc&ecirc; pode
          usar:</para>

        <programlisting>#if (defined(BSD) &amp;&amp; (BSD &gt;= 199103))</programlisting>

        <para>para detectar se o c&oacute;digo &eacute; being compilado em um c&oacute;digo base do  4.3 Net2
          ou mais novo (ex. FreeBSD 1.x, 4.3/Reno, NetBSD 0.9, 386BSD, BSD/386
          1.1 e acima).</para>

        <para>Use:</para>

        <programlisting>#if (defined(BSD) &amp;&amp; (BSD &gt;= 199306))</programlisting>

        <para>para detectar se o c&oacute;digo est&aacute; sendo compilado em um c&oacute;digo base do 4.4 ou
          mais novo (ex. FreeBSD 2.x, 4.4, NetBSD 1.0, BSD/386 2.0 ou
          acima).</para>

        <para>O valor  do macro <literal>BSD</literal> &eacute;
          <literal>199506</literal> para c&oacute;digo base do 4.4BSD-Lite2.  Isto &eacute;
          indicado para prop&oacute;sitos informacionais somente.  Ele n&atilde;o deve ser usado para
          distingui&ccedil;&atilde;o entre vers&otilde;es do FreeBSD baseado somente no 4.4-Lite vs.
          vers&otilde;es que tenham unido-se em mudan&ccedil;as do 4.4-Lite2.  O
          macro do <literal>__FreeBSD__</literal> deve ser usado ao inv&eacute;s.</para>

        <para>Use sparingly:</para>

        <itemizedlist>
          <listitem>
            <para><literal>__FreeBSD__</literal> &eacute; definido em todas vers&otilde;es do
              FreeBSD.  Use-o se a mudan&ccedil;a que voc&ecirc; est&aacute; fazendo 
              <emphasis>somente</emphasis> afetar&aacute; o FreeBSD.  Porting gotchas como
              o use de <literal>sys_errlist[]</literal> vs
              <function>strerror()</function> s&atilde;o Berkeley-isms, n&atilde;o mudan&ccedil;as do
              FreeBSD.</para>
          </listitem>

          <listitem>
            <para>No FreeBSD 2.x, <literal>__FreeBSD__</literal> &eacute; definido
              ser <literal>2</literal>.  Em mais novas vers&otilde;es, ele &eacute;
              <literal>1</literal>.  Ultaimas vers&otilde;es will bump it to match
              seu numero de vers&atilde;o principal.</para>
          </listitem>

          <listitem>
            <para>Se voc&ecirc; necessita dizer as diferen&ccedil;as entre um sistema
              FreeBSD 1.x e um sistema FreeBSD 2.x ou 3.x, usually a resposta certa
              &eacute; para usar os macros <literal>BSD</literal> descrito acima.  Se
              h&aacute; atualmente uma mudan&ccedil;a espec&iacute;fica de FreeBSD (tal como op&ccedil;&otilde;es
              especiais da biblioteca compartilhada ao usar <command>ld</command>) ent&atilde;o
              est&aacute; OK para usar <literal>__FreeBSD__</literal> e <literal>#if
                __FreeBSD__ &gt; 1</literal>  para detectar um FreeBSD 2.x e sistemas
              posteriores.  Se voc&ecirc; necessitar mais granularidade em detectar sistemas do
              FreeBSD desde 2.0-RELEASE voc&ecirc; pode usar o seguinte:</para>

            <programlisting>#if __FreeBSD__ &gt;= 2
#include &lt;osreldate.h&gt;
#    if __FreeBSD_version &gt;= 199504
         /* 2.0.5+ release specific code here */
#    endif
#endif</programlisting>
	  </listitem>
	</itemizedlist>

        <para>Nas centenas de ports que feitos, houve somente
          um ou dois casos onde <literal>__FreeBSD__</literal> devia
          ser usado.  S&oacute; porque um port anterior screwed up e usou-o
          no lugar errado n&atilde;o significa que voc&ecirc; deve fazer assim tamb&eacute;m.</para>
      </sect1>

      <sect1 id="freebsd-versions">
        <title>Valores de __FreeBSD_version</title>

		<informaltable frame="none">
		<tgroup cols="2">
		<thead>
		  <row>
		    <entry>Release</entry>
		    <entry><literal>__FreeBSD_version</literal></entry>
		  </row>
		</thead>

		<tbody>
		  <row>
		    <entry>2.0-RELEASE</entry>
		    <entry>119411</entry>
		  </row>

		  <row>
		    <entry>2.1-CURRENT</entry>
		    <entry>199501, 199503</entry>
		  </row>

		  <row>
		    <entry>2.0.5-RELEASE</entry>
		    <entry>199504</entry>
		  </row>

		  <row>
		    <entry>2.2-CURRENT antes do 2.1</entry>
		    <entry>199508</entry>
		  </row>

		  <row>
		    <entry>2.1.0-RELEASE</entry>
		    <entry>199511</entry>
		  </row>

		  <row>
		    <entry>2.2-CURRENT antes do 2.1.5</entry>
		    <entry>199512</entry>
		  </row>

		  <row>
		    <entry>2.1.5-RELEASE</entry>
		    <entry>199607</entry>
		  </row>

		  <row>
		    <entry>2.2-CURRENT antes do 2.1.6</entry>
		    <entry>199608</entry>
		  </row>

		  <row>
		    <entry>2.1.6-RELEASE</entry>
		    <entry>199612</entry>
		  </row>

		  <row>
		    <entry>2.1.7-RELEASE</entry>
		    <entry>199612</entry>
		  </row>

		  <row>
		    <entry>2.2-RELEASE</entry>
		    <entry>220000</entry>
		  </row>

		  <row>
		    <entry>2.2.1-RELEASE</entry>
		    <entry>220000 (nehuma mudan&ccedil;a)</entry>
		  </row>

		  <row>
		    <entry>2.2-STABLE after 2.2.1-RELEASE</entry>
		    <entry>220000 (nehuma mudan&ccedil;a)</entry>
		  </row>

		  <row>
		    <entry>2.2-STABLE depois do texinfo-3.9</entry>
		    <entry>221001</entry>
		  </row>

		  <row>
		    <entry>2.2-STABLE depois do top</entry>
		    <entry>221002</entry>
		  </row>

		  <row>
		    <entry>2.2.2-RELEASE</entry>
		    <entry>222000</entry>
		  </row>

		  <row>
		    <entry>2.2-STABLE depois do 2.2.2-RELEASE</entry>
		    <entry>222001</entry>
		  </row>

		  <row>
		    <entry>2.2.5-RELEASE</entry>
		    <entry>225000</entry>
		  </row>

		  <row>
		    <entry>2.2-STABLE depois do 2.2.5-RELEASE</entry>
		    <entry>225001</entry>
		  </row>

		  <row>
		    <entry>2.2-STABLE depois do ldconfig -R merge</entry>
		    <entry>225002</entry>
		  </row>

		  <row>
		    <entry>2.2.6-RELEASE</entry>
		    <entry>226000</entry>
		  </row>

		  <row>
		    <entry>2.2.7-RELEASE</entry>
		    <entry>227000</entry>
		  </row>

		  <row>
		    <entry>2.2-STABLE depois do 2.2.7-RELEASE</entry>
		    <entry>227001</entry>
		  </row>

		  <row>
		    <entry>2.2-STABLE depois do &man.semctl.2; change</entry>
		    <entry>227002</entry>
		  </row>

		  <row>
		    <entry>2.2.8-RELEASE</entry>
		    <entry>228000</entry>
		  </row>

		  <row>
		    <entry>2.2-STABLE depois do 2.2.8-RELEASE</entry>
		    <entry>228001</entry>
		  </row>

		  <row>
		    <entry>3.0-CURRENT antes da mudan&ccedil;a do &man.mount.2;</entry>
		    <entry>300000</entry>
		  </row>

		  <row>
		    <entry>3.0-CURRENT depois da mudan&ccedil;a do &man.mount.2;</entry>
		    <entry>300001</entry>
		  </row>

		  <row>
		    <entry>3.0-CURRENT depois da mudan&ccedil;a do &man.semctl.2;</entry>
		    <entry>300002</entry>
		  </row>

		  <row>
		    <entry>3.0-CURRENT depois da mudan&ccedil;a do arg do ioctl</entry>
		    <entry>300003</entry>
		  </row>

		  <row>
		    <entry>3.0-CURRENT depois da convers&atilde;o ELF</entry>
		    <entry>300004</entry>
		  </row>

		  <row>
		    <entry>3.0-RELEASE</entry>
		    <entry>300005</entry>
		  </row>

		  <row>
		    <entry>3.0-CURRENT depois do 3.0-RELEASE</entry>
		    <entry>300006</entry>
		  </row>

		  <row>
		    <entry>3.0-STABLE depois do 3/4 branch</entry>
		    <entry>300007</entry>
		  </row>

		  <row>
		    <entry>3.1-RELEASE</entry>
		    <entry>310000</entry>
		  </row>

		  <row>
		    <entry>3.1-STABLE depois do 3.1-RELEASE</entry>
		    <entry>310001</entry>
		  </row>

		  <row>
		    <entry>3.1-STABLE depois da mudan&ccedil;a da ordem do C++
		      constructor/destructor</entry>
		    <entry>310002</entry>
		  </row>

		  <row>
		    <entry>3.2-RELEASE</entry>
		    <entry>320000</entry>
		  </row>

		  <row>
		    <entry>3.2-STABLE</entry>
		    <entry>320001</entry>
		  </row>

		  <row>
		    <entry>3.2-STABLE depois das mudan&ccedil;as de incompatibilidade-bin&aacute;ria do
		      IPFW e socket</entry>
		    <entry>320002</entry>
		  </row>

		  <row>
		    <entry>3.3-RELEASE</entry>
		    <entry>330000</entry>
		  </row>

		  <row>
		    <entry>3.3-STABLE</entry>
		    <entry>330001</entry>
		  </row>

		  <row>
		    <entry>3.3-STABLE depois de adicionar &man.mkstemp.3;
		      a libc</entry>
		    <entry>330002</entry>
		  </row>

		  <row>
		    <entry>3.4-RELEASE</entry>
		    <entry>340000</entry>
		  </row>

		  <row>
		    <entry>3.4-STABLE</entry>
		    <entry>340001</entry>
		  </row>

		  <row>
		    <entry>3.5-RELEASE</entry>
		    <entry>350000</entry>
		  </row>

		  <row>
		    <entry>3.5-STABLE</entry>
		    <entry>350001</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois 3.4 branch</entry>
		    <entry>400000</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois da mun&ccedil;a no manuseamenteo do linker
		      din&acirc;mico</entry>
		    <entry>400001</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois das mudan&ccedil;as da ordem do C++
		      constructor/destructor</entry>
		    <entry>400002</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois do funcionamento do &man.dladdr.3;</entry>
		    <entry>400003</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois do conserto do bug do linker din&acirc;mico
		      __deregister_frame_info (tamb&eacute;m 4.0-CURRENT depois da integra&ccedil;&atilde;o
		      EGCS 1.1.2)
		    </entry>
		    <entry>400004</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois da mudan&ccedil;a do API do &man.suser.9;
		      (tamb&eacute;m 4.0-CURRENT ap&oacute;s newbus)</entry>
		    <entry>400005</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois da mudan&ccedil;a da registra&ccedil;&atilde;o do cdevsw</entry>
		    <entry>400006</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois da adi&ccedil;&atilde;o do so_cred a
		      credenciais do n&iacute;vel do socket</entry>
		    <entry>400007</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois da adi&ccedil;&atilde;o de um poll syscall
		      wrapper to libc_r</entry>
		    <entry>400008</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois das mudan&ccedil;a do tipo
		      <literal>dev_t</literal> do kernel ao ponteiro
		      <literal>struct specinfo</literal></entry>
		    <entry>400009</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois do conserto  de um furo
		      no &man.jail.2;</entry>
		    <entry>400010</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois da mudan&ccedil;a do tipo de dado
		      <literal>sigset_t</literal></entry>
		    <entry>400011</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois do cutover ao compilador
		      GCC 2.95.2</entry>
		    <entry>400012</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois de adicionar pluggable linux-mode
		      ioctl handlers</entry>
		    <entry>400013</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois de importar o OpenSSL</entry>
		    <entry>400014</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois da mudan&ccedil;a do C++ ABI no GCC 2.95.2
		      de -fvtable-thunks a -fno-vtable-thunks por
		      padr&atilde;o</entry>
		    <entry>400015</entry>
		  </row>

		  <row>
		    <entry>4.0-CURRENT depois de importar do OpenSSH</entry>
		    <entry>400016</entry>
		  </row>

		  <row>
		    <entry>4.0-RELEASE</entry>
		    <entry>400017</entry>
		  </row>

		  <row>
		    <entry>4.0-STABLE depois do 4.0-RELEASE</entry>
		    <entry>400018</entry>
		  </row>

		  <row>
		    <entry>4.0-STABLE depois da introdu&ccedil;&atilde;o do checksums
		      atrasado.</entry>
		    <entry>400019</entry>
		  </row>

		  <row>
		    <entry>4.0-STABLE depois da unir o c&oacute;digo libxpg4 dentro da
		      libc.</entry>
		    <entry>400020</entry>
		  </row>

		  <row>
		    <entry>4.0-STABLE depois de upgrading Binutils a 2.10.0, mudan&ccedil;as do
		      ELF branding, e tcsh na base do sistema.</entry>
		    <entry>400021</entry>
		  </row>

		  <row>
		    <entry>4.1-RELEASE</entry>
		    <entry>410000</entry>
		  </row>

		  <row>
		    <entry>4.1-STABLE depois do 4.1-RELEASE</entry>
		    <entry>410001</entry>
		  </row>

		  <row>
		    <entry>4.1-STABLE depois de movido o &man.setproctitle.3; de
		      libutil a libc.</entry>
		    <entry>410002</entry>
		  </row>

		  <row>
		    <entry>4.1.1-RELEASE</entry>
		    <entry>411000</entry>
		  </row>

		  <row>
		    <entry>4.1.1-STABLE depois do 4.1.1-RELEASE</entry>
		    <entry>411001</entry>
		  </row>

		  <row>
		    <entry>4.2-RELEASE</entry>
		    <entry>420000</entry>
		  </row>

		  <row>
		    <entry>4.2-STABLE depois das mudan&ccedil;as de  combinar libgcc.a e
		      libgcc_r.a, e associado GCC linkage.</entry>
		    <entry>420001</entry>
		  </row>

		  <row>
		    <entry>4.3-RELEASE</entry>
		    <entry>430000</entry>
		  </row>

		  <row>
		    <entry>4.3-STABLE depois da introdu&ccedil;&atilde;o do wint_t.</entry>
		    <entry>430001</entry>
		  </row>

		  <row>
		    <entry>4.3-STABLE depois da unir API powerstate do  PCI.</entry>
		    <entry>430002</entry>
		  </row>

		  <row>
		    <entry>4.4-RELEASE</entry>
		    <entry>440000</entry>
		  </row>

		  <row>
		    <entry>4.4-STABLE depois da introdu&ccedil;&atilde;o do d_thread_t.</entry>
		    <entry>440001</entry>
		  </row>

		  <row>
		    <entry>4.4-STABLE depois das mudan&ccedil;as da estrutura do mount (afeta
		      klds do sistemas de arquivo).</entry>
		    <entry>440002</entry>
		  </row>

		  <row>
		    <entry>4.4-STABLE depois que componetes a nivel de usu&aacute;rio do smbfs
		      foram importados.</entry>
		    <entry>440003</entry>
		  </row>

		  <row>
		    <entry>4.5-RELEASE</entry>
		    <entry>450000</entry>
		  </row>

		  <row>
		    <entry>4.5-STABLE depois do renome do elementos da estrutura do usb.</entry>
		    <entry>450001</entry>
		  </row>

		  <row>
		    <entry>4.5-STABLE depois da vari&aacute;vel
		      <literal>sendmail_enable</literal> &man.rc.conf.5;
		      foi feita pegar o valor
		      <literal>NONE</literal>.</entry>
		    <entry>450004</entry>
		  </row>

		  <row>
		    <entry>4.5-STABLE depois de mover o XFree86 4 por padr&atilde;o
		      para pacotes construidos.</entry>
		    <entry>450005</entry>
		  </row>

		  <row>
		    <entry>4.5-STABLE depois de accept filtering foi consertado assim
		      que n&atilde;o &eacute; mais sucet&iacute;vel a um f&aacute;cil DoS.</entry>
		    <entry>450006</entry>
		  </row>

		  <row>
		    <entry>4.6-RELEASE</entry>
		    <entry>460000</entry>
		  </row>

		  <row>
		    <entry>4.6-STABLE &man.sendfile.2; fixed para comply com
		      a documenta&ccedil;&atilde;o, n&atilde;o para contar quaisquer headers enviado contra
		      a quanrtidade de dados para ser enviado do arquivo.</entry>
		    <entry>460001</entry>
		  </row>

		  <row>
		    <entry>4.6.2-RELEASE</entry>
		    <entry>460002</entry>
		  </row>

		  <row>
		    <entry>4.6-STABLE</entry>
		    <entry>460100</entry>
		  </row>

		  <row>
		    <entry>4.6-STABLE depois do MFC do `sed -i'.</entry>
		    <entry>460101</entry>
		  </row>

		  <row>
		    <entry>4.6-STABLE depois do MFC de muitas novas caracter&iacute;sticas
		      do pkg_install do HEAD.</entry>
		    <entry>460102</entry>
		  </row>

		  <row>
		    <entry>4.7-RELEASE</entry>
		    <entry>470000</entry>
		  </row>

		  <row>
		    <entry>4.7-STABLE</entry>
		    <entry>470100</entry>
		  </row>

		  <row>
		    <entry>Start generated __std{in,out,err}p references rather
		      than __sF.  Esta mudan&ccedil;a std{in,out,err} de uma 
		      express&atilde;o de tempo de compilar a um runtime one.</entry>
		    <entry>470101</entry>
		  </row>

		  <row>
		    <entry>4.7-STABLE depois do MFC das mudan&ccedil;as do mbuf para substituir
		       m_aux mbufs pelo m_tag's</entry>
		    <entry>470102</entry>
		  </row>

		  <row>
		    <entry>4.7-STABLE obtem o OpenSSL 0.9.7</entry>
		    <entry>470103</entry>
		  </row>

		  <row>
		    <entry>4.8-RELEASE</entry>
		    <entry>480000</entry>
		  </row>

		  <row>
		    <entry>4.8-STABLE</entry>
		    <entry>480100</entry>
		  </row>

		  <row>
                    <entry>4.8-STABLE depois do &man.realpath.3; foi feito
		      thread-safe</entry>
		    <entry>480101</entry>
		  </row>

		  <row>
		    <entry>4.8-STABLE mudan&ccedil;as da API do 3ware to twe.</entry>
		    <entry>480102</entry>
		  </row>

		  <row>
		    <entry>4.9-RELEASE</entry>
		    <entry>490000</entry>
		  </row>

		  <row>
		    <entry>4.9-STABLE</entry>
		    <entry>490100</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT</entry>
		    <entry>500000</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT depois de adicionar adi&ccedil;&atilde;o campos do header do ELF,
		      e mudando ELF binary branding method.</entry>
		    <entry>500001</entry>
		  </row>

                  <row>
                    <entry>5.0-CURRENT depois da mudan&ccedil;a metdata do kld.</entry>
                    <entry>500002</entry>
                  </row>

                  <row>
                    <entry>5.0-CURRENT depois das mudan&ccedil;as buf/bio.</entry>
                    <entry>500003</entry>
                  </row>

                  <row>
                    <entry>5.0-CURRENT depois da binutils upgrade.</entry>
                    <entry>500004</entry>
                  </row>

                  <row>
                    <entry>5.0-CURRENT depois de unir o c&oacute;digo libxpg4 dentro da
                      libc e depois da introdu&ccedil;&atilde;o da interface do TASKQ.</entry>
                    <entry>500005</entry>
                  </row>

                  <row>
                    <entry>5.0-CURRENT depois da adi&ccedil;&atilde;o das interfaces do
                      AGP.</entry>
                    <entry>500006</entry>
                  </row>

		  <row>
		    <entry>5.0-CURRENT depois do Perl upgrade to 5.6.0</entry>
		    <entry>500007</entry>
		  </row>

                  <row>
                    <entry>5.0-CURRENT depois da atualiza&ccedil;&atilde;o do c&oacute;digo do KAME aos
                      fontes 2000/07.</entry>
                    <entry>500008</entry>
                  </row>

		  <row>
		    <entry>5.0-CURRENT depois das mudan&ccedil;as do ether_ifattach() e
		      ether_ifdetach().</entry>
		    <entry>500009</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT depois de mudar mtree padr&atilde;o
		      de volta a variante original, adicionado -L ao seguinte 
		      symlinks.</entry>
		    <entry>500010</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT depois da API do kqueue mudou.</entry>
		    <entry>500011</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT depois do &man.setproctitle.3; movido de
		      libutil a libc.</entry>
		    <entry>500012</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT depois do primeiro SMPng commit.</entry>
		    <entry>500013</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT depois do &lt;sys/select.h&gt; movido para
		      &lt;sys/selinfo.h&gt;.</entry>
		    <entry>500014</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT depois de combinar a libgcc.a e
		      libgcc_r.a, and associated GCC linkage changes.</entry>
		    <entry>500015</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT depois da mudan&ccedil;a permitindo a libc e libc_r
		      ser linkada juntas, deprecating -pthread
                      option.</entry>
		    <entry>500016</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after switch from struct ucred to
                      struct xucred to stabilize kernel-exported API for
                      mountd et al.</entry>
		    <entry>500017</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after addition of CPUTYPE make variable
                      for controlling CPU-specific optimizations.</entry>
		    <entry>500018</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after moving machine/ioctl_fd.h to
                      sys/fdcio.h</entry>
		    <entry>500019</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after locale names renaming.</entry>
		    <entry>500020</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after Bzip2 import.
		    Also signifies removal of S/Key.</entry>
		    <entry>500021</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after SSE support.</entry>
		    <entry>500022</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after KSE Milestone 2.</entry>
		    <entry>500023</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after d_thread_t,
		      and moving UUCP to ports.</entry>
		    <entry>500024</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after ABI change for descriptor
		      and creds passing on 64 bit platforms.</entry>
		    <entry>500025</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after moving to XFree86 4 by default for
		      package builds, and after the new libc strnstr() function
		      was added.</entry>
		    <entry>500026</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after the new libc strcasestr() function
		      was added.</entry>
		    <entry>500027</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after the userland components of smbfs
		      were imported.</entry>
		    <entry>500028</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after the new C99 specific-width
		      integer types were added.</entry>
		    <entry>(Not incremented.)</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after a change was made in the return
		      value of &man.sendfile.2;.</entry>
		    <entry>500029</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after the introduction of the
		      type <literal>fflags_t</literal>, which is the
		      appropriate size for file flags.</entry>
		    <entry>500030</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after the usb structure element rename.</entry>
		    <entry>500031</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after the introduction of
		      Perl 5.6.1.</entry>
		    <entry>500032</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after the
		      <literal>sendmail_enable</literal> &man.rc.conf.5;
		      variable was made to take the value
		      <literal>NONE</literal>.</entry>
		    <entry>500033</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after mtx_init() grew a third argument.</entry>
		    <entry>500034</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT with Gcc 3.1.</entry>
		    <entry>500035</entry>
	          </row>

		  <row>
		    <entry>5.0-CURRENT without Perl in /usr/src</entry>
		    <entry>500036</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after the addition of &man.dlfunc.3;</entry>
		    <entry>500037</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after the types of some struct
		      sockbuf members were changed and the structure was
		      reordered.</entry>
		    <entry>500038</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after headers stopped using
		      _BSD_FOO_T_ and started using _FOO_T_DECLARED.
		      This value can also be used as a conservative
		      estimate of the start of &man.bzip2.1; package
		      support.</entry>
		    <entry>500039</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after various changes to disk functions
		      were made in the name of removing dependency on disklabel
		      structure internals.</entry>
		    <entry>500040</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after the addition of &man.getopt.long.3;
		      to libc.</entry>
		    <entry>500041</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after Binutils 2.13 upgrade, which
		      included new FreeBSD emulation, vec, and output format.
		      </entry>
		    <entry>500042</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after adding weak pthread_XXX stubs
		      to libc, obsoleting libXThrStub.so.  5.0-RELEASE.</entry>
		    <entry>500043</entry>
		  </row>

		  <row>
		    <entry>5.0-CURRENT after branching for RELENG_5_0</entry>
		    <entry>500100</entry>
		  </row>
		  <row>
		    <entry>&lt;sys/dkstat.h&gt; is empty and should 
		    not be included.</entry>
		    <entry>500101</entry>
		  </row>
		  <row>
		    <entry>5.0-CURRENT after the d_mmap_t interface
		      change.</entry>
		    <entry>500102</entry>
		  </row>
                  <row>
                    <entry>5.0-CURRENT after taskqueue_swi changed to run
                      without Giant, and taskqueue_swi_giant added to run
                      with Giant.</entry>
                    <entry>500103</entry>
                  </row>
		  <row>
		    <entry>cdevsw_add() and cdevsw_remove() no
		      longer exists.
		      Appearance of MAJOR_AUTO allocation facility.</entry>
		    <entry>500104</entry>
		  </row>
                  <row>
                    <entry>5.0-CURRENT after new cdevsw initialization method.</entry>
                    <entry>500105</entry>
                  </row>
                  <row>
                    <entry>devstat_add_entry() has been replaced by
		      devstat_new_entry()</entry>
                    <entry>500106</entry>
                  </row>
                  <row>
                    <entry>Devstat interface change; see sys/sys/param.h 1.149</entry>
                    <entry>500107</entry>
                  </row>
                  <row>
                    <entry>Token-Ring interface changes.</entry>
                    <entry>500108</entry>
                  </row>
                  <row>
                    <entry>Addition of vm_paddr_t.</entry>
                    <entry>500109</entry>
                  </row>
                  <row>
                    <entry>5.0-CURRENT after &man.realpath.3; has been made
		      thread-safe</entry>
                    <entry>500110</entry>
                  </row>
                  <row>
                    <entry>5.0-CURRENT after &man.usbhid.3; has been synced with
		      NetBSD</entry>
                    <entry>500111</entry>
                  </row>
                  <row>
                    <entry>5.0-CURRENT after new NSS implementation
		      and addition of POSIX.1 getpw*_r, getgr*_r
		      functions</entry>
                    <entry>500112</entry>
                  </row>
                  <row>
                    <entry>5.0-CURRENT after removal of the old rc system.</entry>
                    <entry>500113</entry>
                  </row>
                  <row>
                    <entry>5.1-RELEASE.</entry>
                    <entry>501000</entry>
                  </row>
                  <row>
                    <entry>5.1-CURRENT after branching for RELENG_5_1.</entry>
                    <entry>501100</entry>
                  </row>
                  <row>
                    <entry>5.1-CURRENT after correcting the semantics of
		      sigtimedwait(2) and sigwaitinfo(2).</entry>
                    <entry>501101</entry>
                  </row>
		  <row>
		    <entry>5.1-CURRENT after adding the lockfunc and lockfuncarg
		      fields to &man.bus.dma.tag.create.9;.</entry>
		    <entry>501102</entry>
		  </row>
		  <row>
		    <entry>5.1-CURRENT after GCC 3.3.1-pre 20030711 snapshot
		      integration.</entry>
		    <entry>501103</entry>
		  </row>
		  <row>
		    <entry>5.1-CURRENT 3ware API changes to twe.</entry>
		    <entry>501104</entry>
		  </row>
		  <row>
		    <entry>5.1-CURRENT dynamically-linked /bin and /sbin
		      support and movement of libraries to /lib.</entry>
		    <entry>501105</entry>
		  </row>
		  <row>
		    <entry>5.1-CURRENT after adding kernel support for
		      Coda 6.x.</entry>
		    <entry>501106</entry>
		  </row>
		  <row>
		    <entry>5.1-CURRENT after 16550 UART constants moved from
		      <filename>&lt;dev/sio/sioreg.h&gt;</filename> to
		      <filename>&lt;dev/ic/ns16550.h&gt;</filename>.
		      Also when libmap functionality was unconditional
		      supported by rtld.</entry>
		    <entry>501107</entry>
		  </row>
		  <row>
		    <entry>5.1-CURRENT after PFIL_HOOKS API update</entry>
		    <entry>501108</entry>
		  </row>
		  <row>
		    <entry>5.1-CURRENT after adding kiconv(3)</entry>
		    <entry>501109</entry>
		  </row>
		  <row>
		    <entry>5.1-CURRENT after changing default operations
			for open and close in cdevsw</entry>
		    <entry>501110</entry>
		  </row>
		  <row>
		    <entry>5.1-CURRENT after changed layout of cdevsw</entry>
		    <entry>501111</entry>
		  </row>
		  <row>
		    <entry> 5.1-CURRENT after adding kobj multiple inheritance
		    </entry>
		    <entry>501112</entry>
		  </row>
		  <row>
		    <entry> 5.1-CURRENT after the if_xname change in
		        struct ifnet</entry>
		    <entry>501113</entry>
		  </row>
		  <row>
		    <entry> 5.1-CURRENT after changing /bin and /sbin to
			be dynamically linked</entry>
		    <entry>501114</entry>
		  </row>
		  <row>
		    <entry>5.2-RELEASE</entry>
		    <entry>502000</entry>
		  </row>
		  <row>
		    <entry>5.2-CURRENT after branching for RELENG_5_2</entry>
		    <entry>502100</entry>
		  </row>
		  <row>
		    <entry>5.2-CURRENT after __cxa_atexit/__cxa_finalize
			functions were added to libc.</entry>
		    <entry>502101</entry>
		  </row>
                </tbody>
              </tgroup>
            </informaltable>

        <note>
          <para>Note que 2.2-STABLE sometimes se identifica  como
            <quote>2.2.5-STABLE</quote> ap&oacute;s o 2.2.5-RELEASE.  The pattern
            used para ser anos seguido pelo m&ecirc;s, mas n&oacute;s decidimos mud&aacute;-lo
            para um mais sistema maior/menor direto iniciando do 2.2.
             Isto &eacute; porque o desenvolvimento paralelo em diversas branches made
            it infeasible para classificar as releases simplesmente pelas suas datas
            reais de release.  Se voc&ecirc; est&aacute; fazendo um port agora, voc&ecirc; n&atilde;o tem que
            se precocupar sobre old -CURRENTs; eles s&atilde;o listados aqui somente para sua
            refer&ecirc;ncia.</para>
        </note>
      </sect1>

      <sect1 id="dads-after-port-mk">
        <title>Escrevendo algo ap&oacute;s
          <filename>bsd.port.mk</filename></title>

        <para>N&atilde;o escreva qualquer coisa ap&oacute;s a linha do <literal>.include
            &lt;bsd.port.mk&gt;</literal>.  Geralmente pode ser evitada
          incluindo <filename>bsd.port.pre.mk</filename>  em algum lugar no
          meio de seu <filename>Makefile</filename> e
          <filename>bsd.port.post.mk</filename> no fim.</para>

        <note>
          <para> Voc&ecirc; necessita incluir ambos os par
            <filename>bsd.port.pre.mk</filename>/<filename>bsd.port.post.mk</filename> ou
            somente <filename>bsd.port.mk</filename>; n&atilde;o misture este dois usos.</para>
        </note>

        <para>O <filename>bsd.port.pre.mk</filename> define somente algumas
          vari&aacute;veis, que podem ser usadas em testes no
          <filename>Makefile</filename>, <filename>bsd.port.post.mk</filename>
           define o descanso.</para>

        <para>Aqui est&atilde;o algumas vari&aacute;veis importantes definidas no
          <filename>bsd.port.pre.mk</filename> (esta n&atilde;o &eacute; a lista completa,
          por favor leia <filename>bsd.port.mk</filename> para a lista
          completa).</para>

        <informaltable frame="none">
          <tgroup cols="2">
            <thead>
              <row>
                <entry>Vari&aacute;vel</entry>
                <entry>Descri&ccedil;&atilde;o</entry>
              </row>
            </thead>

            <tbody>
              <row>
                <entry><makevar>ARCH</makevar></entry>
                <entry>A arquitetura como retornada pelo <command>uname
                    -m</command> (ex., <literal>i386</literal>)</entry>
              </row>

              <row>
                <entry><makevar>OPSYS</makevar></entry>
                <entry>O tipo de sistema operacional, assim retornado pelo
                  <command>uname -s</command> (ex.,
                  <literal>FreeBSD</literal>)</entry>
              </row>

              <row>
                <entry><makevar>OSREL</makevar></entry>
                <entry>A vers&atilde;o do release do sistema operacional (ex.,
                  <literal>2.1.5</literal> ou
                  <literal>2.2.7</literal>)</entry>
              </row>

              <row>
                <entry><makevar>OSVERSION</makevar></entry>
                <entry>A vers&atilde;o num&eacute;rica do sistema operacional, o mesmo que
                  <link
                    linkend="freebsd-versions"><literal>__FreeBSD_version</literal></link>.</entry>
              </row>

              <row>
                <entry><makevar>PORTOBJFORMAT</makevar></entry>
                <entry>O formato do objeto do sistema
                  (<literal>aout</literal> ou <literal>elf</literal>)</entry>
              </row>

              <row>
                <entry><makevar>LOCALBASE</makevar></entry>
                <entry>A base da arvore <quote>local</quote> (ex.,
                  <literal>/usr/local/</literal>)</entry>
              </row>

              <row>
                <entry><makevar>X11BASE</makevar></entry>
                <entry>A base da arvore do <quote>X11</quote> (ex.,
                  <literal>/usr/X11R6</literal>)</entry>
              </row>

              <row>
                <entry><makevar>PREFIX</makevar></entry>
                <entry>Onde o port se instala (veja <link
                    linkend="porting-prefix">mais em
                    <makevar>PREFIX</makevar></link>).</entry>
              </row>
            </tbody>
          </tgroup>
        </informaltable>

        <note>
          <para> Se voc&ecirc; tem que definir as vari&aacute;veis
            <makevar>USE_IMAKE</makevar>, <makevar>USE_X_PREFIX</makevar>, ou
            <makevar>MASTERDIR</makevar>, fa&ccedil;a assim antes de incluir o
            <filename>bsd.port.pre.mk</filename>.</para>
        </note>

        <para>Est&atilde;o aqui alguns exemplos das coisas que voc&ecirc; pode escrever ap&oacute;s o
          <filename>bsd.port.pre.mk</filename>:</para>

        <programlisting># no need to compile lang/perl5 if perl5 is already in system
.if ${OSVERSION} > 300003
BROKEN= perl is in system
.endif

# only one shlib version number for ELF
.if ${PORTOBJFORMAT} == "elf"
TCL_LIB_FILE=  ${TCL_LIB}.${SHLIB_MAJOR}
.else
TCL_LIB_FILE=  ${TCL_LIB}.${SHLIB_MAJOR}.${SHLIB_MINOR}
.endif

# software already makes link for ELF, but not for a.out
post-install:
.if ${PORTOBJFORMAT} == "aout"
       ${LN} -sf liblinpack.so.1.0 ${PREFIX}/lib/liblinpack.so
.endif</programlisting>
      </sect1>

      <sect1 id="dads-documentation">
        <title>Instale a documenta&ccedil;&atilde;o adicional</title>

        <para>Se seu software tiver alguma documenta&ccedil;&atilde;o outra que o man padr&atilde;o
          e p&aacute;ginas de info que voc&ecirc; pense que &eacute; &uacute;til ao usu&aacute;rio, instale-o
          sob <filename><makevar>PREFIX</makevar>/share/doc</filename>.
          Isto pode ser feito, como o item anterior, no
          <maketarget>post-install</maketarget> target.</para>

        <para>Cr&iacute;e um novo diret&oacute;rio para seu port.  O nome do diret&oacute;rio deve
          refletir o que o port &eacute;.  Isto significa geralmente
          <makevar>PORTNAME</makevar>. Entretanto, se voc&ecirc;
          pensa que o usu&aacute;rio p&ocirc;de querer vers&otilde;es diferentes do port para ser
          instalado ao mesmo tempo, voc&ecirc; pode usar o
          <makevar>PKGNAME</makevar> inteiro.</para>

        <para>Fac&aacute; as depend&ecirc;ncias da instala&ccedil;&atilde;o a vari&aacute;vel
          <makevar>NOPORTDOCS</makevar> assim que os usu&aacute;rios podem disabilit&aacute;-lo no
          <filename>/etc/make.conf</filename>, como este:</para>

        <programlisting>post-install:
.if !defined(NOPORTDOCS)
        ${MKDIR} ${DOCSDIR}
        ${INSTALL_MAN} ${WRKSRC}/docs/xvdocs.ps ${DOCSDIR}
.endif</programlisting>

	<para>Aqui est&atilde;o algumas vari&aacute;veis e como elas s&atilde;o expandidas quando usadas
	  no <filename>Makefile</filename>:</para>

	<itemizedlist>
	  <listitem>
	    <para><literal>${DATADIR}</literal>  come&ccedil;a expandido  a
	      <filename>${PREFIX}/share/${PORTNAME}</filename>.</para>
	  </listitem>
	  
	  <listitem>
	    <para><literal>${DOCSDIR}</literal>  come&ccedil;a expandido  a
	      <filename>${PREFIX}/share/doc/${PORTNAME}</filename>.</para>
	  </listitem>

	  <listitem>
	    <para><literal>${EXAMPLESDIR}</literal>  come&ccedil;a expandido  a
	      <filename>${PREFIX}/share/examples/${PORTNAME}</filename>.</para>
	  </listitem>
	</itemizedlist>

	<para>Todos arquivos de documenta&ccedil;&atilde;o e diret&oacute;rios instalados devem
	  ser inclu&iacute;dos no <filename>pkg-plist</filename> com o prefixo
	  <literal>%%PORTDOCS%%</literal>, por exemplo:</para>

	<programlisting>%%PORTDOCS%%%%DOCSDIR%%/AUTHORS
%%PORTDOCS%%%%DOCSDIR%%/CONTACT
%%PORTDOCS%%@dirrm %%DOCSDIR%%</programlisting>

        <para>Voc&ecirc; pode tamb&eacute;m usar o arquivo <filename>pkg-message</filename> para
          mostrar mensagens sobre instala&ccedil;&atilde;o.  Veja a se&ccedil;&atilde;o <link
          linkend="porting-message">usando o
          <filename>pkg-message</filename></link> para
          detalhes.</para>

        <note>
          <para><filename>pkg-message</filename>  n&atilde;o necessita ser adicionada  ao
            <filename>pkg-plist</filename>.</para>
        </note>
      </sect1>

      <sect1 id="dads-subdirs">
        <title>Subdiret&oacute;rios</title>

        <para>Tente deixar o port colocar coisas no subdiret&oacute;rios certos do
          <makevar>PREFIX</makevar>.  Alguns ports lump tudo e colocam ele no
          subdiret&oacute;rio com o nome do port, qual est&aacute; incorreto.  Tamb&eacute;m,
          muitos ports colocam tudo exceto bin&aacute;rios, arquivos header e p&aacute;ginas do
          manual e um subdiret&oacute;rio do <filename>lib</filename>, qual n&atilde;o faz
          bode bem com o paradigma do BSD.  Muitos dos arquivos devem ser
          movidos a um dos seguintes: <filename>etc</filename>
          (arquivos de setup/configura&ccedil;&atilde;o), <filename>libexec</filename>
          (execut&aacute;veis iniciados internamente), <filename>sbin</filename>
          (execut&aacute;veis para superusu&aacute;rios/gerenciadores), <filename>info</filename>
          (documenta&ccedil;&atilde;o para navegadores de info) ou  <filename>share</filename>
          (arquivos independentes de arquitetura).  Veja &man.hier.7; para detalhes;
          as regras governando o
          <filename>/usr</filename> muito aplic&aacute;vel ao
          <filename>/usr/local</filename> tamb&eacute;m.  A exce&ccedil;&atilde;o s&atilde;o ports
          concordam com USENET <quote>news</quote>.  Eles podem usar
          <filename><makevar>PREFIX</makevar>/news</filename> como um destino
          para seus arquivos.</para>
      </sect1>

      <sect1 id="porting-cleaning">
        <title>Cleaning up dos diret&oacute;rios vazios</title>

        <para>Fa&ccedil;a seus ports clean up ap&oacute;s eles mesmos quando eles s&atilde;o
          desinstalados.  Isto &eacute; geralmente acomplished pelo adicionando
          linhas <literal>@dirrm</literal> para todos diret&oacute;rios que s&atilde;o
          especificamente criados pelo port.  Voc&ecirc; necessita apagar subdiret&oacute;rios
          antes que voc&ecirc; possa apagar os diret&oacute;rios pais.</para>

        <programlisting> :
lib/X11/oneko/pixmaps/cat.xpm
lib/X11/oneko/sounds/cat.au
 :
@dirrm lib/X11/oneko/pixmaps
@dirrm lib/X11/oneko/sounds
@dirrm lib/X11/oneko</programlisting>

        <para>Entretanto, as vezes <literal>@dirrm</literal> dar&aacute; a voc&ecirc;
          erros porque outros ports tamb&eacute;m compartilham o mesmo subdiret&oacute;rio.  Voc&ecirc;
          pode chamar o <command>rmdir</command> de <literal>@unexec</literal> para
          remover somente diret&oacute;rios vazios sem avisos.</para>

        <programlisting>@unexec rmdir %D/share/doc/gimp 2>/dev/null || true</programlisting>

        <para>Isto will neither imprimir any mensagens de erro nor cause
          &man.pkg.delete.1; para sair abnormally even sen&atilde;o est&aacute;
          vazio due para outros ports instalando alguns arquivos l&aacute;.</para>
      </sect1>

      <sect1 id="dads-uid">
        <title>UIDs</title>

        <para>Se seu port necessita de um determinado usu&aacute;rio para ser no sistema
          instalado, deixe o script <filename>pkg-install</filename> chamar o
          <command>pw</command> para cria-lo automaticamente.  Olhe em
          <filename role="package">net/cvsup-mirror</filename> para um exemplo.</para>

        <para>Se seu port tem que usar o mesmo numero de ID do usu&aacute;rio/grupo quando ele &eacute;
          instalado como pacote bin&aacute;rio como quando ele foi compilado, ent&atilde;o voc&ecirc; tem que
          escolher um UID livre de 50 a 999 e registr&aacute;-lo abaixo.  Olhe em
          <filename role="package">japanese/Wnn</filename> para um exemplo.</para>

        <para>Certifique-se que voc&ecirc; n&atilde;o usa um UID usado j&aacute; pelo sistema ou
          outros ports.  Esta &eacute; a lista atual de UIDs entre 50 e
          999.</para>

	<!-- Please keep this list sorted by uid -->
        <programlisting>majordom:*:54:54:Majordomo Pseudo User:/usr/local/majordomo:/nonexistent
cyrus:*:60:60:the cyrus mail server:/nonexistent:/nonexistent
gnats:*:61:1:GNATS database owner:/usr/local/share/gnats/gnats-db:/bin/sh
proxy:*:62:62:Packet Filter pseudo-user:/nonexistent:/nonexistent
uucp:*:66:66:UUCP pseudo-user:/var/spool/uucppublic:/usr/libexec/uucp/uucico
xten:*:67:67:X-10 daemon:/usr/local/xten:/nonexistent
pop:*:68:6:Post Office Owner (popper):/nonexistent:/sbin/nologin
wnn:*:69:7:Wnn:/nonexistent:/nonexistent
pgsql:*:70:70:PostgreSQL pseudo-user:/usr/local/pgsql:/bin/sh
oracle:*:71:71::0:0:Oracle:/usr/local/oracle7:/sbin/nologin
ircd:*:72:72:IRC daemon:/nonexistent:/nonexistent
ircservices:*:73:73:IRC services:/nonexistent:/nonexistent
ifmail:*:75:66:Ifmail user:/nonexistent:/nonexistent
www:*:80:80:World Wide Web Owner:/nonexistent:/sbin/nologin
alias:*:81:81:QMail user:/var/qmail/alias:/nonexistent
qmaild:*:82:81:QMail user:/var/qmail:/nonexistent
qmaill:*:83:81:QMail user:/var/qmail:/nonexistent
qmailp:*:84:81:QMail user:/var/qmail:/nonexistent
qmailq:*:85:82:QMail user:/var/qmail:/nonexistent
qmailr:*:86:82:QMail user:/var/qmail:/nonexistent
qmails:*:87:82:QMail user:/var/qmail:/nonexistent
msql:*:87:87:mSQL-2 pseudo-user:/var/db/msqldb:/bin/sh
mysql:*:88:88:MySQL Daemon:/var/db/mysql:/sbin/nologin
vpopmail:*:89:89:VPop Mail User:/usr/local/vpopmail:/nonexistent
smmsp:*:90:90:Sendmail Queue:/nonexistent:/nonexistent
mailman:*:91:91:Mailman User:/usr/local/mailman:/sbin/nologin
gdm:*:92:92:GDM Sandbox:/:/sbin/nologin
jabber:*:93:93:Jabber Daemon:/nonexistent:/nonexistent
p4admin:*:94:94:Perforce admin:/usr/local/perforce:/sbin/nologin
interch:*:95:95:Interchange user:/usr/local/interchange:/sbin/nologin
squeuer:*:96:96:SQueuer Owner:/nonexistent:/bin/sh
mud:*:97:97:MUD Owner:/usr/local/share/dgd:/bin/sh
rscsi:*:99:99:Remote SCSI:/usr/local/rscsi:/usr/local/sbin/rscsi
fido:*:111:111:Fido System:/usr/local/fido:/bin/sh
ldap:*:389:389:OpenLDAP Server:/nonexistent:/sbin/nologin
drweb:*:426:426:Dr.Web Mail Scanner:/nonexistent:/sbin/nologin
bacula:*:910:910:Bacula Daemon:/var/db/bacula:/sbin/nologin</programlisting>

        <para>Por favor inclua uma observa&ccedil;&atilde;o quando voc&ecirc; enviar um port (ou um upgrade)
          que reserve um novo UID ou GID nesta escala.  Isto permite-nos
          manter a lista de IDs reservados atualizados.</para>
      </sect1>

      <sect1 id="dads-rational">
        <title>Fa&ccedil;a coisas racionalmente</title>

        <para>O <filename>Makefile</filename> deve fazer coisas simples e
          razoavelmente.  Se voc&ecirc; pode faze-lo um couple de linhas mais curto ou mais
          leg&iacute;vel, ent&atilde;o fa&ccedil;a assim.  Exemplos incluem usando uma constru&ccedil;&atilde;o do
          <literal>.if</literal> do make ao inv&eacute;s de uma constru&ccedil;&atilde;o do
          <literal>if</literal> do shell, n&atilde;o redefinindo
          <maketarget>do-extract</maketarget> se voc&ecirc; pode redefinir
          <makevar>EXTRACT*</makevar> ao inv&eacute;s, e usando
          <makevar>GNU_CONFIGURE</makevar> ao inv&eacute;s de <literal>CONFIGURE_ARGS
            += --prefix=&dollar;{PREFIX}</literal>.</para>
      </sect1>

      <sect1 id="dads-cc">
	<title>Respeite ambos <makevar>CC</makevar> e
	  <makevar>CXX</makevar></title>

	<para>O port deve respeitar ambos vari&aacute;veis <makevar>CC</makevar>
	  e <makevar>CXX</makevar>.  Se ele n&atilde;o faz,
	  por favor adicione <literal>NO_PACKAGE=ignora ambos cc ou
	  cxx</literal> ao <filename>Makefile</filename>.</para>

	<para>Um exemplo de um <filename>Makefile</filename> respeitando
	  ambas seguintes vari&aacute;veis <makevar>CC</makevar>
	  e <makevar>CXX</makevar>.  Note que o <makevar>?=</makevar>:</para>

	<programlisting>CC ?= gcc</programlisting>
	<programlisting>CXX ?= g++</programlisting>

	<para>Aqui est&aacute; um exemplo qual n&atilde;o respeita as
	  vari&aacute;veis <makevar>CC</makevar>
	  nem <makevar>CXX</makevar>:</para>
      
	<programlisting>CC = gcc</programlisting>
	<programlisting>CXX = g++</programlisting>

	<para>Ambas vari&aacute;veis <makevar>CC</makevar> e <makevar>CFLAGS</makevar>
	  podem ser definidas no sistema do FreeBSD no
	  <filename>/etc/make.conf</filename>.  O primeiro exemplo
	  define um valor se ele n&atilde;o foi anteriormente definido no
	  <filename>/etc/make.conf</filename>, preservando quaisquer
	  defini&ccedil;&otilde;es system-wide.  O segundo exemplo clobbers
	  quaisquer coisas anteriormente definidas.</para>
      </sect1>

      <sect1 id="dads-cflags">
        <title>Respeite as <makevar>CFLAGS</makevar></title>

        <para>O port deve respeitas as vari&aacute;veis <makevar>CFLAGS</makevar>.
          Se ele n&atilde;o faz, por favor adicione <literal>NO_PACKAGE=ignores
            cflags</literal> ao <filename>Makefile</filename>.</para>

	<para>Um exemplo de um <filename>Makefile</filename> respeitando
	  a seguinte vari&aacute;vel <makevar>CFLAGS</makevar>.  Note o
	  <makevar>+=</makevar>:</para>

	<programlisting>CFLAGS += -Wall -Werror</programlisting>

	<para>Aqui est&aacute; um exemplo qual n&atilde;o respeita a
	  vari&aacute;vel <makevar>CFLAGS</makevar>:</para>

	<programlisting>CFLAGS = -Wall -Werror</programlisting>

	<para>A vari&aacute;vel <makevar>CFLAGS</makevar> &eacute; definida no
	  sistema do FreeBSD no <filename>/etc/make.conf</filename>.  O
	  primeiro  exemplo appends adicinais flags a
	  vari&aacute;vel <makevar>CFLAGS</makevar>, preservando quaisquer defini&ccedil;&otilde;es
	  system-wide.  O segundo exemplo clobbers quaisquer anteriormente
	  definidos.</para>
      </sect1>

      <sect1 id="dads-config">
        <title>Arquivos de Configura&ccedil;&atilde;o</title>

        <para>Se seu port necessita alguns arquivos de configura&ccedil;&atilde;o no
          <filename><makevar>PREFIX</makevar>/etc</filename>, do
          <emphasis>not</emphasis> just instale-os e liste-os no
          <filename>pkg-plist</filename>.  Aquilo far&aacute;
          &man.pkg.delete.1; apagar arquivos cuidadosamente editados pelo
          usu&aacute;rio e uma nova instala&ccedil;&atilde;o para wipe them out.</para>

        <para>Ao inv&eacute;s, instale arquivos de exemplos com um sufixo
          (<filename><replaceable>filename</replaceable>.sample</filename>
          funcionar&aacute; bem) e imprima uma <link
            linkend="porting-message">mensagem</link> indicando out que o
          usu&aacute;rio tem que copiar e editar os arquivos antes que o software possa ser feito
          para executar.</para>
      </sect1>

      <sect1 id="dads-freedback">
        <title>Feedback</title>

        <para>Envie mudan&ccedil;as/patches aplic&aacute;veis ao autor/mantedor
          original para inclus&atilde;o no pr&oacute;xima release do c&oacute;digo.  Isto
          somente far&aacute; seu trabalho muito mais f&aacute;cil a pr&oacute;xima
          release.</para>
      </sect1>

      <sect1 id="dads-readme">
        <title><filename>README.html</filename></title>

        <para>N&atilde;o inclua o arquivo <filename>README.html</filename>.  Este
          arquivo n&atilde;o &eacute; parte da cole&ccedil;&atilde;o do cvs mas &eacute; gerado usando o
          comando <command>make readme</command>.
        </para>
      </sect1>

      <sect1 id="dads-broken">
        <title>Marcando um port como <makevar>BROKEN</makevar>, <makevar>FORBIDDEN</makevar>, ou de outra maneira</title>

	<para>Invariavelmente there will come a time quando um port particular
	conter&aacute; uma vulnerabilidade de seguran&ccedil;a, ser&aacute; radical
	broken e necessita de muitas horas de tender loving care, ou est&aacute;
	geralmente obsoleto, mas por uma raz&atilde;o ou uma outra deve
	remain na arvore (e ser consertada, certo?).  Para designar um
	port como broken, h&aacute; tr&ecirc;s vari&aacute;veis <command>make</command>
	que podem ser usadas em um
	<filename>Makefile</filename> do port.  O valor das seguintes vari&aacute;veis do
	<command>make</command> ser&atilde;o a raz&atilde;o que &eacute;
	given back aos usu&aacute;rios para porque o port foi marcado como broken.
	Por favor use a vari&aacute;vel correta do <command>make</command> assim
	cada vari&aacute;vel do make conveys radicalmente diferentes significados a
	ambos usu&aacute;rios, e para sistemas automatizados que analise o
	<filename>Makefile</filename>s.</para>

	<itemizedlist>
	  <listitem>
	    <para>O <makevar>BROKEN</makevar> &eacute; reservado para os ports que
	      n&atilde;o funcionam e n&atilde;o devem ser instalados pelos usu&aacute;rios.  Isto
	      will prevent usu&aacute;rios de instalarem o port, entretanto,
	      o ports foi marcado como <makevar>BROKEN</makevar> ainda ser&aacute;
	      construido pelo <ulink url="http://bento.FreeBSD.org/">
	      Bento cluster</ulink>.  Marque os ports como
	      <makevar>BROKEN</makevar> se voc&ecirc; quer que os usu&aacute;rios n&atilde;o
	      instalem este port, mas voc&ecirc; ainda quer te-lo construido
	      pelo Bento.</para>
	  </listitem>

	  <listitem>
	    <para>O <makevar>FORBIDDEN</makevar> &eacute; usado para os ports que
	      cont&eacute;m uma vulnerabilidade de seguran&ccedil;a ou induzir grave
	      interesse a respeito da seguran&ccedil;a de um sistema FreeBSD com
	      um given port instalado (ex: a reputably insecure program
	      ou um programa que disponibiliza facilmente servi&ccedil;os exploit&aacute;veis).
	      Os ports devem ser marcados como <makevar>FORBIDDEN</makevar>
	      assim que um pe&ccedil;a particular do software tenha uma
	      vulnerabilidade e  n&atilde;o h&aacute; released upgrade.  Idealmente
	      ports devem ser upgraded assim que poss&iacute;vel quando uma
	      vulnerabilidade de seguran&ccedil;a &eacute; discoberta so as to reduce the
	      numero de vulnerabilidades do hosts FreeBSD (n&oacute;s gostamos de saber
	      para estar seguro), entretanto as vezes h&aacute; uma
	      noticeable time gap entre descoberta de uma
	      vulnerabilidade e uma release de software atualizado de uma pe&ccedil;a
	      do software vulner&aacute;vel.  N&atilde;o marque um port
	      <makevar>FORBIDDEN</makevar> por quaisquer raz&atilde;o outra que
	      seguran&ccedil;a.</para>
	  </listitem>

	  <listitem>
	    <para>O <makevar>IGNORE</makevar> &eacute; reservado para ports que
	      n&atilde;o devem ser construidos por uma raz&atilde;o ou uma outra.  Usu&aacute;rios
	      e <ulink url="http://bento.FreeBSD.org/"> o Bento
	      cluster</ulink> cluster n&atilde;o far&atilde;o, sob quaisquer
	      circunst&acirc;ncias, os ports construidos marcados como
	      <makevar>IGNORE</makevar>.  Se em d&uacute;vida, use
	      <makevar>IGNORE</makevar> para prevent um port de ser
	      construido.</para>
	  </listitem>

	</itemizedlist>

	<para>Lembre que estas vari&aacute;veis s&atilde;o para ser usadas como um
	  ultimo recurso se um port n&atilde;o &eacute; upgradeable.  Permanentemente
	  broken ports devem ser removidos da arvore
	  inteiramente.</para>
      </sect1>

      <sect1 id="dads-misc">
        <title>Miscellanea</title>

        <para>Os arquivos
          <filename>pkg-descr</filename> e <filename>pkg-plist</filename>
          cada seve ser verificados-em-dobro.  Se voc&ecirc; est&aacute; revendo um port e sente
          que eles podem ser expremido melhor, fa&ccedil;a assim.</para>

        <para>N&atilde;o copie mais copias da Licen&ccedil;a P&uacute;blica Geral do GNU dentro
          de nosso sistema, por favor.</para>

        <para>Por favor seja cuidadoso para anotar quaisquer legal issues! N&atilde;o deixe-nos
          distribuir software ilegalmente!</para>
      </sect1>

      <sect1 id="dads-stuck">
        <title>If you are stuck&hellip;</title>

        <para>Olhe em exemplos existentes e o
          arquivo <filename>bsd.port.mk</filename> antes de nos perguntar!
          <!-- smiley --><emphasis>;-)</emphasis></para>

        <para>Pergunte nos se voc&ecirc; tenha qualquer problema! N&atilde;o s&oacute; bata
          sua cabe&ccedil;a contra a parede! <!-- smiley
          --><emphasis>:-)</emphasis></para>
      </sect1>
    </chapter>

    <chapter id="porting-samplem">
      <title>Um exemplo de <filename>Makefile</filename></title>

      <para>Aqui est&aacute; um exemplo de <filename>Makefile</filename> that you can use to
        create a new port.  Certifique-se que voc&ecirc; remova todos os coment&aacute;rios extras (uns
        entre brackets)!</para>

      <para>Recomenda-se que voc&ecirc; siga este formato (ordering of
        vari&aacute;veis, linhas vazias entre as se&ccedil;&otilde;es, etc.).  Este formato &eacute;
        projetado de modo que a informa&ccedil;&atilde;o a mais importante seja f&aacute;cil de localizar.  N&oacute;s
        recomendamos que voc&ecirc; use <link
          linkend="porting-portlint">portlint</link> para verificar o
        <filename>Makefile</filename>.</para>

      <programlisting>[the header...just to make it easier for us to identify the ports.]
# New ports collection makefile for:   xdvi
[the "version required" line is only needed when the PORTVERSION
 variable is not specific enough to describe the port.]
# Date created:                26 May 1995
[this is the person who did the original port to FreeBSD, in particular, the
person who wrote the first version of this Makefile.  Remember, this should
not be changed when upgrading the port later.]
# Whom:                        Satoshi Asami &lt;asami@FreeBSD.org&gt;
#
# &dollar;FreeBSD&dollar;
[ ^^^^^^^^^ This will be automatically replaced with RCS ID string by CVS
when it is committed to our repository.  If upgrading a port, do not alter
this line back to "&dollar;FreeBSD&dollar;".  CVS deals with it automatically.]
#

[section to describe the port itself and the master site - PORTNAME
 and PORTVERSION are always first, followed by CATEGORIES,
 and then MASTER_SITES, which can be followed by MASTER_SITE_SUBDIR.
 PKGNAMEPREFIX and PKGNAMESUFFIX, if needed, will be after that.
 Then comes DISTNAME, EXTRACT_SUFX and/or DISTFILES, and then
 EXTRACT_ONLY, as necessary.]
PORTNAME=      xdvi
PORTVERSION=   18.2
CATEGORIES=    print
[do not forget the trailing slash ("/")!
 if you are not using MASTER_SITE_* macros]
MASTER_SITES=  ${MASTER_SITE_XCONTRIB}
MASTER_SITE_SUBDIR= applications
PKGNAMEPREFIX= ja-
DISTNAME=      xdvi-pl18
[set this if the source is not in the standard ".tar.gz" form]
EXTRACT_SUFX=  .tar.Z

[section for distributed patches -- can be empty]
PATCH_SITES=   ftp://ftp.sra.co.jp/pub/X11/japanese/
PATCHFILES=    xdvi-18.patch1.gz xdvi-18.patch2.gz

[maintainer; *mandatory*!  This is the person (preferably with commit
 privileges) whom a user can contact for questions and bug reports - this
 person should be the porter or someone who can forward questions to the
 original porter reasonably promptly.  If you really do not want to have
 your address here, set it to "ports@FreeBSD.org".]
MAINTAINER=    asami@FreeBSD.org
COMMENT=       A DVI Previewer for the X Window System

[dependencies -- can be empty]
RUN_DEPENDS=   gs:${PORTSDIR}/print/ghostscript
LIB_DEPENDS=   Xpm.5:${PORTSDIR}/graphics/xpm

[this section is for other standard bsd.port.mk variables that do not
 belong to any of the above]
[If it asks questions during configure, build, install...]
IS_INTERACTIVE=        yes
[If it extracts to a directory other than ${DISTNAME}...]
WRKSRC=                ${WRKDIR}/xdvi-new
[If the distributed patches were not made relative to ${WRKSRC}, you
 may need to tweak this]
PATCH_DIST_STRIP=      -p1
[If it requires a "configure" script generated by GNU autoconf to be run]
GNU_CONFIGURE= yes
[If it requires GNU make, not /usr/bin/make, to build...]
USE_GMAKE=     yes
[If it is an X application and requires "xmkmf -a" to be run...]
USE_IMAKE=     yes
[et cetera.]

[non-standard variables to be used in the rules below]
MY_FAVORITE_RESPONSE=  "yeah, right"

[then the special rules, in the order they are called]
pre-fetch:
        i go fetch something, yeah

post-patch:
        i need to do something after patch, great

pre-install:
        and then some more stuff before installing, wow

[and then the epilogue]
.include &lt;bsd.port.mk&gt;</programlisting>
    </chapter>

    <chapter id="porting-autoplist">
      <title>Cria&ccedil;&atilde;o automatizada da lista do pacote</title>

      <para>Primeiro, certifique-se que seu port est&aacute; quase completo, com somente
        <filename>pkg-plist</filename> faltando.</para>

      <para>Pr&oacute;ximo, crie uma arvore de diret&oacute;rio tempor&aacute;rio dentro da qual seu port possa ser
        instalado, e instala quaiquer depend&ecirc;ncias.
	<replaceable>port-type</replaceable> deve ser <literal>local</literal>
	para ports n&atilde;o-X e <literal>x11-4</literal> ou <literal>x11</literal>
	para ports qual instala dentro da hierarquia do diret&oacute;rio do XFree86 4
	ou uma anterior XFree86 release, respectivamente.</para>

      <screen>&prompt.root; <userinput>mkdir /var/tmp/<replaceable>port-name</replaceable></userinput>
&prompt.root; <userinput>mtree -U -f /etc/mtree/BSD.<replaceable>port-type</replaceable>.dist -d -e -p /var/tmp/<replaceable>port-name</replaceable></userinput>
&prompt.root; <userinput>make depends PREFIX=/var/tmp/<replaceable>port-name</replaceable></userinput></screen>

      <para>Armazene a estrutura de diret&oacute;rio em um novo arquivo.</para>

      <screen>&prompt.root; <userinput>(cd /var/tmp/<replaceable>port-name</replaceable> && find -d * -type d) | sort &gt; OLD-DIRS</userinput></screen>

      <para>Crie um arquivo  <filename>pkg-plist</filename> vazio:</para>

      <screen>&prompt.root; <userinput>touch pkg-plist</userinput></screen>

      <para>Se seu port honors <makevar>PREFIX</makevar> (which it should)
        voc&ecirc; pode ent&atilde;o instalar o port e criar a lista de pacote.</para>

      <screen>&prompt.root; <userinput>make install PREFIX=/var/tmp/<replaceable>port-name</replaceable></userinput>
&prompt.root; <userinput>(cd /var/tmp/<replaceable>port-name</replaceable> && find -d * \! -type d) | sort &gt; pkg-plist</userinput></screen>

      <para>Voc&ecirc; tem que tamb&eacute;m adicionar quaiquer diret&oacute;rios criados recentemente a lista de
        empacotamento.</para>

      <screen>&prompt.root; <userinput>(cd /var/tmp/<replaceable>port-name</replaceable> && find -d * -type d) | sort | comm -13 OLD-DIRS - | sort -r | sed -e 's#^#@dirrm #' &gt;&gt; pkg-plist</userinput></screen>

      <para>Finalmente, voc&ecirc; necessita to tidy up a lista de empacotamento pela m&atilde;o; ele n&atilde;o &eacute;
        <emphasis>todo</emphasis> automatizado.  P&aacute;ginas do manual devem ser listadas no
        <filename>Makefile</filename> do port sob
        <makevar>MAN<replaceable>n</replaceable></makevar>, e n&atilde;o na
        lista de pacotes.  Arquivos de configura&ccedil;&atilde;o do usu&aacute;rio devem ser removidos, ou
        instalados como
        <filename><replaceable>filename</replaceable>.sample</filename>.
        O arquivo <filename>info/dir</filename> n&atilde;o deve ser listado
        e apropriadas linhas <filename>install-info</filename> devem
        ser adicionadas como notas na se&ccedil;&atilde;o <link linkend="porting-info">info
        files</link>.  Quaisquer
        bibliotecas instaladas pelo port devem ser listadas como especificada na
        se&ccedil;&atilde;o <link linkend="porting-shlibs">bibliotecas compartilhadas</link>.</para>

      <para>Alternativamente, use o script <command>plist</command> no
	<filename>/usr/ports/Tools/scripts/</filename> para construir a
	lista de pacote automaticamente.</para>
    </chapter>

    <chapter id="changes">
      <title>Mudan&ccedil;as a este documento e sistema ports</title>

      <para>Se voc&ecirc; mantem muitos ports, voc&ecirc; deve considerar o seguinte
        &a.ports;.  Mudan&ccedil;as importantes ao modo que o ports funcione ser anunciado
        l&aacute;.  Voc&ecirc; pode sempre encontrar mais informa&ccedil;&otilde;es detalhadas das ultimas
        mudan&ccedil;as olhando em <ulink
          url="http://www.FreeBSD.org/cgi/cvsweb.cgi/ports/Mk/bsd.port.mk"> o
          log CVS do bsd.port.mk</ulink>.</para>

      <para>Outros recursos para assist mantedores do port inclui uma lista de
	<ulink url="http://bento.FreeBSD.org/">pacotes construindo logs e
	errors </ulink> e o <ulink
	  url="http://people.FreeBSD.org/~fenner/portsurvey/">exame do distfiles
	  do Ports do FreeBSD</ulink>.</para>
    </chapter>
</book>

<!--
     Local Variables:
     mode: sgml
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     End:
-->
