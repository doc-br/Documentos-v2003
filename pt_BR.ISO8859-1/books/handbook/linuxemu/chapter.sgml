<!--
     The FreeBSD Documentation Project

     $FreeBSD: doc/en_US.ISO8859-1/books/handbook/linuxemu/chapter.sgml,v 1.110 2003/11/18 01:22:45 mheinen Exp $
-->

<chapter id="linuxemu">
  <chapterinfo>
    <authorgroup>
      <author>
	<firstname>Jim</firstname>
	<surname>Mock</surname>
	<contrib>Reestruturado e partes atualizadas por </contrib>
      </author>
      <!-- 22 Mar 2000 -->
    </authorgroup>
    <authorgroup>
      <author>
	<firstname>Brian N.</firstname>
	<surname>Handy</surname>
	<contrib>Originalmente contribu&iacute;do por </contrib>
      </author>
      <author>
	<firstname>Rich</firstname>
	<surname>Murphey</surname>
      </author>
    </authorgroup>
  </chapterinfo>

  <title>Compatibilidade Bin&aacute;ria Linux</title>

  <sect1 id="linuxemu-synopsis">
    <title>Sinopse</title>
    <indexterm><primary>Linux binary compatibility</primary></indexterm>
    <indexterm>
      <primary>binary compatibility</primary>
      <secondary>Linux</secondary>
    </indexterm>

    <para>FreeBSD oferece compatibilidade bin&aacute;ria com v&aacute;rios 
      outros sistemas operacionais &unix; incluindo Linux.  Neste 
      momento voc&ecirc; deve estar perguntando a si mesmo, por que 
      o FreeBSD necessita ser capaz de executar bin&aacute;rios Linux?
      A resposta para esta quest&atilde;o &eacute; bem simples.  Muitas 
      empresas e desenvolvedores desenvolvem apenas para Linux, uma vez 
      que ele &eacute; a novidade <quote>mais quente</quote> no mundo da 
      computa&ccedil;&atilde;o.  Isto nos deixa, usu&aacute;rios do FreeBSD, 
      incomodando as mesmas empresas e desenvolvedores para disponibilizar 
      vers&otilde;es nativas de suas aplica&ccedil;&otilde;es para FreeBSD.  
      O problema &eacute;, a maioria destas empresas n&atilde;o se d&aacute; 
      conta de que muitas pessoas usariam seus produtos se existisse uma 
      vers&atilde;o para FreeBSD tamb&eacute;m, e muitas continuam 
      desenvolvendo apenas para Linux.  Ent&atilde;o o que o usu&aacute;rio 
      do FreeBSD faz?  A&iacute; &eacute; que a Compatibilidade bin&aacute;ria 
      Linux do FreeBSD entra em cena.</para>

    <para>Resumidamente, a compatibilidade permite aos usu&aacute;rios do FreeBSD
      executar por volta de 90% de todas as aplica&ccedil;&otilde;es Linux sem 
      modifica&ccedil;&atilde;o.  Isto inclui aplica&ccedil;&otilde;es tais como 
      <application>&staroffice;</application>, a vers&atilde;o Linux do 
      <application>&netscape;</application>,
      <application>&adobe;&nbsp;&acrobat;</application>,
      <application><trademark class="registered">RealPlayer</trademark></application>
      5 e 7, <application><trademark>VMware</trademark></application>,
      <application>&oracle;</application>,
      <application><trademark class="registered">WordPerfect</trademark></application>, <application>Doom</application>,
      <application>Quake</application>, e mais.  &Eacute; tamb&eacute;m sabido que 
      em algumas situa&ccedil;&otilde;es, bin&aacute;rios do Linux t&ecirc;m 
      melhor performance no FreeBSD do que no pr&oacute;prio Linux.</para>
    <indexterm>
      <primary>Linux</primary>
      <secondary><filename>/proc</filename> file system</secondary>
    </indexterm>

    <para>Existem, entretanto, algumas caracter&iacute;sticas de sistema 
      operacional espec&iacute;ficas do Linux que n&atilde;o s&atilde;o 
      suportadas no FreeBSD.  Bin&aacute;rios Linux n&atilde;o 
      funcionar&atilde;o no FreeBSD se eles usarem excesivamente o 
      sistema de arquivos <filename>/proc</filename> (que &eacute; 
      diferente do sistema de arquivo <filename>/proc</filename> do 
      FreeBSD), ou chamadas &i386 espec&iacute;ficas, tais como a 
      habilita&ccedil;&atilde;o do modo virtual 8086.</para>

    <para>Ap&oacute;s ler este cap&iacute;tulo, voc&ecirc; saber&aacute;:</para>
    <itemizedlist>
      <listitem>
	<para>Como habilitar a compatibilidade bin&aacute;ria Linux em 
	  seu sistema.</para>
      </listitem>

      <listitem>
	<para>Como adicionar bibliotecas compartilhadas Linux adicionais.</para>
	</listitem>

      <listitem>
	<para>Como instalar aplica&ccedil;&otilde;es Linux em seu sistema 
	  FreeBSD.</para>
      </listitem>

      <listitem>
	<para>Detalhes de implementa&ccedil;&atilde;o da compatibilidade Linux 
	  no FreeBSD.</para>
      </listitem>
    </itemizedlist>

    <para>Antes de ler este cap&iacute;tulo, voc&ecirc; deve:</para>

    <itemizedlist>
      <listitem>
	<para>Saber como instalar programas adicionais de terceiros 
        (<xref linkend="ports">).</para>
      </listitem>
    </itemizedlist>

  </sect1>

  <sect1 id="linuxemu-lbc-install">
    <title>Instala&ccedil;&atilde;o</title>

    <indexterm><primary>KLD (kernel loadable object)</primary></indexterm>

    <para>A compatibilidade Linux n&atilde;o &eacute; ligada por padr&atilde;o.  
      A maneira mais f&aacute;cil de habilitar esta funcionalidade &eacute; 
      carregando o objeto KLD <literal>linux</literal> (<quote>Kernel LoDable 
      object</quote>).  Voc&ecirc; pode carregar este m&oacute;dulo 
      simplesmente digitando <command>linux</command> na linha de 
      comando.</para>

    <para>Se voc&ecirc; quer que a compatibilidade Linux esteja sempre 
      habilitada, ent&atilde;o voc&ecirc; deve adicionar a seguinte 
      linha no <filename>/etc/rc.conf</filename>:</para>

    <programlisting>linux_enable="YES"</programlisting>

    <para>O comando &man.kldstat.8; pode ser usado para verificar se o 
      KLD est&aacute; carregado:</para>

    <screen>&prompt.user; <userinput>kldstat</userinput>
Id Refs Address    Size     Name
 1    2 0xc0100000 16bdb8   kernel
 7    1 0xc24db000 d000     linux.ko</screen>
    <indexterm>
      <primary>kernel options</primary>
      <secondary>LINUX</secondary>
    </indexterm>

    <para>Se, por alguma raz&atilde;o, voc&ecirc; n&atilde;o quer ou n&atilde;o 
      pode carregar o KLD, ent&atilde;o voc&ecirc; pode ligar estaticamente a 
      compatibilidade bin&aacute;ria Linux no kernel adicionando 
      <literal>options LINUX</literal> ao seu arquivo de configura&ccedil;&atilde;o.  
      Depois instale seu novo <foreignphrase>kernel</foreignphrase> como 
      como descrito em <xref linkend="kernelconfig">.</para> 

    <sect2>
      <title>Instalando Bibliotecas Linux de Tempo de Execu&ccedil;&atilde;o</title>
      <indexterm>
	<primary>Linux</primary>
	<secondary>installing Linux libraries</secondary>
      </indexterm>

      <para>Isto pode ser feito de duas maneiras, usando o port 
	<link linkend="linuxemu-libs-port">linux_base</link>, ou
	instalando as bibliotecas <link
	linkend="linuxemu-libs-manually">manualmente</link>.</para>

      <sect3 id="linuxemu-libs-port">
	<title>Instalando o port linux_base</title>
	<indexterm><primary>ports collection</primary></indexterm>

	<para>Este &eacute; de longe o m&eacute;todo mais f&aacute;cil para 
	  instalar as bibliotecas de tempo de execu&ccedil;&atilde;o.  &Eacute; 
	  como instalar qualquer outra aplica&ccedil;&atilde;o da &aacute;rvore 
	  de alica&ccedil;&otilde;es <ulink type="html" url="file://localhost/usr/ports/">
	  ports collection</ulink>.  Simplesmente fa&ccedil;a o seguinte:
	  </para>

	<screen>&prompt.root; <userinput>cd /usr/ports/emulators/linux_base</userinput>
&prompt.root; <userinput>make install distclean</userinput></screen>

	<para>Agora voc&ecirc; deve ter a compatibilidade bin&aacute;ria Linux 
	  funcionando.  Alguns programas podem reclamar a respeito de pequenas 
	  diferen&ccedil;as de vers&atilde;o das bibliotecas de sistema.  Em geral, 
	  entretanto, isto n&atilde;o parece ser problema.</para>

	<note><para>Podem existir multiplas vers&otilde;es do port <filename
	  role="package">emulators/linux_base</filename> dispon&iacute;veis, 
	  correspondendo a diferentes vers&otilde;es de v&aacute;rias 
	  distribui&ccedil;&otilde;es Linux.  Voc&ecirc; deve instalar a 
	  vers&atilde;o que mais se aproxima dos requisitos das 
	  aplica&ccedil;&otilde;es Linux que voc&ecirc; deseja instalar.
	  </para></note>

      </sect3>

      <sect3 id="linuxemu-libs-manually">
	<title>Instalando Manualmente as Bibliotecas</title>

	<para>Se voc&ecirc; n&atilde;o possui a cole&ccedil;&atilde;o 
	  <quote>ports</quote> instalada, voc&ecirc; pode instalar as 
	  mesmas manualmente.  Voc&ecirc; precisar&aacute; das bibliotecas 
	  compartilhadas Linux das quais o programa depende e um ligador 
	  em tempo de execu&ccedil;&atilde;o.  Al&eacute;m disso, voc&ecirc; 
	  precisa criar um diret&oacute;rio 
	  <foreignphrase><quote>shadow root</quote></foreignphrase>, 
	  <filename>/compat/linux</filename>, para as bibliotecas Linux 
	  no seu sistema FreeBSD.  Qualquer biblioteca compartilhada 
	  aberta por aplica&ccedil;&otilde;es Linux sob o FreeBSD 
	  buscar&atilde;o este diret&oacute;rio primeiro.  Sendo assim, 
	  se um programa Linux carrega, por exemplo, o arquivo 
	  <filename>/lib/libc.so</filename>, o FreeBSD primeiro vai tentar 
	  abrir <filename>/compat/linux/lib/libc.so</filename>, e se 
	  n&atilde;o existir, ent&atilde;o tentar&aacute; <filename>/lib/libc.so</filename>.
	  Bibliotecas compartilhadas devem ser instaladas na &aacute;rove 
	  <filename>/compat/linux/lib</filename> ao inv&eacute;s dos 
	  caminhos que a biblioteca Linux <command>ld.so</command> reporta.</para>

	<para>Geralmente, voc&ecirc; precisar&aacute; procurar pelas bibliotecas 
	  compartilhadas das quais as bibliotecas Linux dependem apenas nas 
	  primeiras vezes que voc&ecirc; instalar um programa Linux no seu 
	  sistema FreeBSD.  Depois de um tempo, voc&ecirc; possuir&aacute; 
	  um conjunto suficiente de bibliotecas Linux compartilhadas no seu 
	  sistema que ser&atilde;o capazes de executar bin&aacute;rios Linux 
	  recentemente importados sem qualquer trabalho extra.</para>
      </sect3>

      <sect3>
	<title>Como Instalar Bibliotecas Compartilhadas Adicionais</title>
	<indexterm><primary>shared libraries</primary></indexterm>

	<para>E se voc&ecirc; instalar o <filename>linux_base</filename> 
	  e sua aplica&ccedil;&atilde;o ainda reclamar que faltam 
	  bibliotecas compartilhadas?  Como voc&ecirc; sabe quais 
	  bibliotecas compartilhadas os bin&aacute;rios Linux precisam, 
	  e onde obt&ecirc;-las?  Basicamente, existem duas possibilidades 
	  (ao seguir estas instru&ccedil;&otilde;es voc&ecirc; precisar&aacute; 
	  estar como <username>root</username> no seu sistema FreeBSD).</para>

	<para>Se voc&ecirc; tem acesso a um sistema Linux, veja quais 
	  bibliotecas compartilhadas a aplica&ccedil;&atilde;o necessita, e 
	  copie-as para o seu sistema FreeBSD.  Veja o seguinte exemplo:</para>

	<informalexample>
	  <para>Vamos assumir que voc&ecirc; usou FTP para obter o bin&aacute;rio 
	    Linux do <application>Doom</application>, e colocou em um sistema Linux 
	    ao qual voc&ecirc; tem acesso.  Voc&ecirc; ent&atilde;o pode verificar 
	    quais bibliotecas compartilhadas ele precisa executando 
	    <command>ldd linuxdoom</command>, como:</para>

	  <screen>&prompt.user; <userinput>ldd linuxdoom</userinput>
libXt.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libXt.so.3.1.0
libX11.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libX11.so.3.1.0
libc.so.4 (DLL Jump 4.5pl26) =&gt; /lib/libc.so.4.6.29</screen>

	  <indexterm><primary>symbolic links</primary></indexterm>
	  <para>Voc&ecirc; precisar&aacute; pegar todos os arquivos na 
	    &uacute;ltima coluna e coloc&aacute;-los em 
	    <filename>/compat/linux</filename>, com os nomes da primeira 
	    coluna como liga&ccedil;&otilde;es simb&oacute;licas apontando para eles.  Isto 
	    significa que eventualmente tem estes arquivos em seu sistema 
	    FreeBSD:</para>

	  <screen>/compat/linux/usr/X11/lib/libXt.so.3.1.0
/compat/linux/usr/X11/lib/libXt.so.3 -&gt; libXt.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3.1.0
/compat/linux/usr/X11/lib/libX11.so.3 -&gt; libX11.so.3.1.0
/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</screen>

	  <blockquote>
	    <note>
	      <para>Note que se voc&ecirc; j&aacute; possui uma biblioteca  
		Linux compartilhada em que as vers&otilde;es principais 
		batem com a da primeira coluna da sa&iacute;da do comando 
		<command>ldd</command>, voc&ecirc; n&atilde;o precisar&aacute; 
		copiar o arquivo com o nome da &uacute;ltima coluna para o 
		seu sistema, a vers&atilde;o que voc&ecirc; tem deve funcionar.  
		Entretanto, &eacute; aconselh&aacute;vel copiar a biblioteca compartilhada 
		se a vers&atilde;o for mais nova.  Voc&ecirc; pode remover a 
		antiga assim que voc&ecirc; fizer o link simb&oacute;lico apontando 
		para a mais nova.  Ent&atilde;o, se voc&ecirc; possuir estas 
		bibliotecas em seu sistema:</para>

	      <screen>/compat/linux/lib/libc.so.4.6.27
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.27</screen>

	      <para>e voc&ecirc; tem um novo bin&aacute;rio que requer a 
		&uacute;ltima vers&atilde;o, de acordo com a sa&iacute;da do 
		<command>ldd</command>:</para>

	      <screen>libc.so.4 (DLL Jump 4.5pl26) -&gt; libc.so.4.6.29</screen>

	      <para>Se for apenas uma ou duas vers&otilde;es atrasadas no 
		digito final ent&atilde;o n&atilde;o se preocupe em copiar o 
		<filename>/lib/libc.so.4.6.29</filename> tamb&eacute;m, pois o 
		programa deve funcionar bem com a vers&atilde;o ligeiramente mais 
		antiga.  Entretanto, se voc&ecirc; quiser, voc&ecirc; pode decidir 
		substituir o arquivo <filename>libc.so</filename> 
		e isto far&aacute; com que voc&ecirc; fique com:</para>

	      <screen>/compat/linux/lib/libc.so.4.6.29
/compat/linux/lib/libc.so.4 -&gt; libc.so.4.6.29</screen>
	    </note>
	  </blockquote>

	  <blockquote>
	    <note>
	      <para>O mecanismo de liga&ccedil;&atilde;o simb&oacute;lica 
		<emphasis>somente</emphasis> &eacute; necess&aacute;rio para 
		bin&aacute;rios Linux.  O ligador em tempo de execu&ccedil;&atilde;o 
		do FreeBSD se encarrega de procurar pelos n&uacute;meros de 
		vers&atilde;o mais recentes e voc&ecirc; n&atilde;o precisa 
		se preocupar.</para>
	    </note>
	  </blockquote>
	</informalexample>
      </sect3>
    </sect2>

    <sect2>
      <title>Instalando Bin&aacute;rios Linux ELF</title>
      <indexterm>
	<primary>Linux</primary>
	<secondary>ELF binaries</secondary>
      </indexterm>

      <para>Bin&aacute;rios ELF algumas vezes requerem um passo extra de 
	<quote>marca&ccedil;&atilde;o</quote>.  Se voc&ecirc; tentar executar 
	um bin&aacute;rio ELF n&atilde;o marcado, voc&ecirc; obter&aacute; 
	uma mensagem de erro como a seguinte:</para>

      <screen>&prompt.user; <userinput>./my-linux-elf-binary</userinput>
ELF binary type not known
Abort</screen>

      <para>Para ajudar o <foreignphrase>kernel</foreignphrase> do FreeBSD 
	a distinguir entre um bin&aacute;rio ELF do FreeBSD e um bin&aacute;rio 
	Linux, use o utilit&aacute;rio &man.brandelf.1;.</para>

      <screen>&prompt.user; <userinput>brandelf -t Linux my-linux-elf-binary</userinput></screen>

      <indexterm><primary>GNU toolchain</primary></indexterm>
      <para>O <quote>GNU toolchain</quote> agora coloca a informa&ccedil;&atilde;o 
	de marca&ccedil;&atilde;o apropriada automaticamente nos bin&aacute;rios 
	ELF, de maneira que este passo deve se tornar cada vez mais 
	desnecess&aacute;rio no futuro.</para>
    </sect2>

    <sect2>
      <title>Configurando o Resolvedor de nomes de Host</title>

      <para>Se o DNS n&atilde;o funciona ou se voc&ecirc; recebe 
	  esta mensagem:</para>

      <screen>resolv+: "bind" is an invalid keyword resolv+:
"hosts" is an invalid keyword</screen>

      <para>Voc&ecirc; precisar&aacute; configurar o arquivo 
	<filename>/compat/linux/etc/host.conf</filename> 
	com o conte&uacute;do:</para>

      <programlisting>order hosts, bind
multi on</programlisting>

      <para>O <foreignphrase><quote>order</quote></foreignphrase> aqui 
	especifica que a procura &eacute; feita primeiro no 
	arquivo <filename>/etc/hosts</filename> e depois no DNS. Quando 
	o arquivo <filename>/compat/linux/etc/host.conf</filename> n&atilde;o 
	est&aacute; instalado, as aplica&ccedil;&otilde;es Linux encontram o 
	<filename>/etc/host.conf</filename> do FreeBSD e reclamam da sintaxe 
	incompat&iacute;vel.  Voc&ecirc; deve remover o <foreignphrase>
	<literal>bind</literal></foreignphrase> se voc&ecirc; n&atilde;o 
	configurou um servidor de nomes usando o arquivo 
	<filename>/etc/resolv.conf</filename>.</para>
    </sect2>
  </sect1>

  <sect1 id="linuxemu-mathematica">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Murray</firstname>
	  <surname>Stokely</surname>
	  <contrib>Atualizado para Mathematica 4.X por </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Bojan</firstname>
	  <surname>Bistrovic</surname>
	  <contrib>Unido ao trabalho de </contrib>
	</author>
      </authorgroup>
    </sect1info>
    <title>Instalando o &mathematica;</title>

    <indexterm>
      <primary>applications</primary>
      <secondary><application>Mathematica</application></secondary>
    </indexterm>

    <para>Este documento descreve o processo de instala&ccedil;&atilde;o 
      da vers&atilde;o Linux do <application>&mathematica; 4.X</application> 
      em um sistema FreeBSD.</para>

    <para>A vers&atilde;o Linux do <application>&mathematica;</application>
      roda perfeitamente sob o FreeBSD, entretanto os bin&aacute;rios 
      distribu&iacute;dos pela Wolfram precisam ser marcados para que o 
      FreeBSD saiba que deve usar o Linux ABI para execut&aacute;los.</para>

    <para>A vers&atilde;o Linux do <application>&mathematica;</application>
      ou <application>&mathematica; para Estudantes</application> pode ser
      solicitada diretamente em 
      <ulink url="http://www.wolfram.com/"></ulink>.</para>

    <sect2>
      <title>Marcando os Bin&aacute;rios Linux</title>

      <para>Os bin&aacute;rios Linux est&atilde;o localizados no 
	diret&oacute;rio <filename>Unix</filename> do CDROM do 
	<application>&mathematica;</application> distribu&iacute;do pela  
	Wolfram.  Voc&ecirc; precisa copiar esta &aacute;rvore de 
	diret&oacute;rio para o seu disco local para que voc&ecirc; possa 
	marcar os bin&aacute;rios Linux com &man.brandelf.1; antes de 
	executar o instalador:</para>

      <screen>&prompt.root; <userinput>mount /cdrom</userinput>
&prompt.root; <userinput>cp -rp /cdrom/Unix/ /localdir/</userinput>
&prompt.root; <userinput>brandelf -t Linux /localdir/Files/SystemFiles/Kernel/Binaries/Linux/*</userinput>
&prompt.root; <userinput>brandelf -t Linux /localdir/Files/SystemFiles/FrontEnd/Binaries/Linux/*</userinput>
&prompt.root; <userinput>brandelf -t Linux /localdir/Files/SystemFiles/Installation/Binaries/Linux/*</userinput>
&prompt.root; <userinput>brandelf -t Linux /localdir/Files/SystemFiles/Graphics/Binaries/Linux/*</userinput>
&prompt.root; <userinput>brandelf -t Linux /localdir/Files/SystemFiles/Converters/Binaries/Linux/*</userinput>
&prompt.root; <userinput>brandelf -t Linux /localdir/Files/SystemFiles/LicenseManager/Binaries/Linux/mathlm</userinput>
&prompt.root; <userinput>cd /localdir/Installers/Linux/</userinput>
&prompt.root; <userinput>./MathInstaller</userinput></screen>

      <para>Alternativamente, voc&ecirc; pode simplesmente configurar 
	a marca ELF Linux padr&atilde;o para todos os bin&aacute;rios 
	n&atilde;o marcados com o comando:</para>
      <screen>&prompt.root; <userinput>sysctl kern.fallback_elf_brand=3</userinput></screen>
      <para>Isto far&aacute; o FreeBSD assumir que os bin&aacute;rios ELF 
	n&atilde;o marcados usam o Linux ABI e assim voc&ecirc; deve ser 
	capaz de executar o instalador direto do CDROM.</para>
    </sect2>

    <sect2>
      <title>Obtendo sua Senha do &mathematica;</title>

      <para>Antes que voc&ecirc; possa executar o <application>&mathematica;</application>
	voc&ecirc; precisar&aacute; obter uma senha da Wolfram, que 
	corresponde a sua <quote>ID de m&aacute;quina</quote>.</para>
      <indexterm>
	<primary>Ethernet</primary>
	<secondary>MAC address</secondary>
      </indexterm>

      <para>Uma vez instaladas as bibliotecas Linux de compatibilidade 
	em tempo de execu&ccedil;&atilde;o e desempacotado o 
	<application>&mathematica;</application> voc&ecirc; pode 
	obter a <quote>ID de m&aacute;quina</quote> executando o programa 
	<command>mathinfo</command> no diret&oacute;rio de instala&ccedil;&atilde;o.  
	Esta ID de m&aacute;quina &eacute; baseada somente no endere&ccedil;o MAC 
	da sua primeira placa de Ethernet.</para>

      <screen>&prompt.root; <userinput>cd /localdir/Files/SystemFiles/Installation/Binaries/Linux</userinput>
&prompt.root; <userinput>mathinfo</userinput>
disco.example.com 7115-70839-20412</screen>

      <para>Ao obter o registro com a Wolfram, seja por correio 
	eletrônico, telefone ou fax, voc&ecirc; fornecer&aacute; a eles 
	a <quote>ID da m&aacute;quina</quote> e eles responder&atilde;o 
	com uma senha que consiste em um grupo de n&uacute;meros.  
	Voc&ecirc; pode ent&atilde;o entrar com esta informa&ccedil;&atilde;o 
	quando tentar executar o <application>&mathematica;</application> 
	pela primeira vez, exatamente da mesma maneira que voc&ecirc; 
	faria para qualquer outra plataforma do 
	<application>&mathematica;</application>.</para>
    </sect2>

    <sect2>
      <title>Executando o Frontend do &mathematica; atrav&eacute;s da Rede</title>

      <para><application>&mathematica;</application> usa algumas fontes 
	especiais para mostrar caracteres n&atilde;o presentes em qualquer 
	conjunto padr&atilde;o de fontes (integrais, somas, letras Gregas, 
	etc.).  O protocolo X requer que estas fontes sejam instaladas 
	<emphasis>localmente</emphasis>.  Isto significa que voc&ecirc; 
	precisa copiar estas fontes do CDROM ou de uma m&aacute;quina com o 
	<application>&mathematica;</application>
	instalado para o seu sistema local.  Estas fontes normalmente 
	s&atilde;o armazenadas em 
	<filename>/cdrom/Unix/Files/SystemFiles/Fonts</filename> no CDROM ou em 
	<filename>/usr/local/mathematica/SystemFiles/Fonts</filename> em seu 
	disco r&iacute;gido.  As fontes atuais est&atilde;o em 
	subdiret&oacute;rios em <filename>Type1</filename> e 
	<filename>X</filename>.  Existem v&aacute;rias maneiras de 
	utiliz&aacute;-las, como descrito abaixo.</para>

      <para>A primeira maneira &eacute; copi&aacute;-las em um dos 
	diret&oacute;rios de fontes existente em 
	<filename>/usr/X11R6/lib/X11/fonts</filename>.
	Para isto voc&ecirc; precisar&aacute; editar o arquivo 
	<filename>fonts.dir</filename>, adicionando os nomes das fontes 
	a ele, e modificando o n&uacute;mero de fontes na primeira linha.  
	Alternativamente, voc&ecirc; tamb&eacute;m deve ser capaz de 
	executar o &man.mkfontdir.1; no diret&oacute;rio ao qual voc&ecirc; 
	as copiou.</para>

      <para>A segunda maneira de fazer isto &eacute; copiar os 
	diret&oacute;rios para 
	<filename>/usr/X11R6/lib/X11/fonts</filename>:</para>

      <screen>&prompt.root; <userinput>cd /usr/X11R6/lib/X11/fonts</userinput>
&prompt.root; <userinput>mkdir X</userinput>
&prompt.root; <userinput>mkdir MathType1</userinput>
&prompt.root; <userinput>cd /cdrom/Unix/Files/SystemFiles/Fonts</userinput>
&prompt.root; <userinput>cp X/* /usr/X11R6/lib/X11/fonts/X</userinput>
&prompt.root; <userinput>cp Type1/* /usr/X11R6/lib/X11/fonts/MathType1</userinput>
&prompt.root; <userinput>cd /usr/X11R6/lib/X11/fonts/X</userinput>
&prompt.root; <userinput>mkfontdir</userinput>
&prompt.root; <userinput>cd ../MathType1</userinput>
&prompt.root; <userinput>mkfontdir</userinput></screen>

      <para>Agora adicione os novos diret&oacute;rios de fontes ao seu caminho de fontes:</para>

      <screen>&prompt.root; <userinput>xset fp+ /usr/X11R6/lib/X11/fonts/X</userinput>
&prompt.root; <userinput>xset fp+ /usr/X11R6/lib/X11/fonts/MathType1</userinput>
&prompt.root; <userinput>xset fp rehash</userinput></screen>

      <para>Se voc&ecirc; est&aacute; usando o servidor <application>&xfree86;</application>, 
	voc&ecirc; pode ter estas fontes carregadas automaticamente adicionando-as 
	ao seu arquivo <filename>XF86Config</filename>.</para>
      <indexterm><primary>fonts</primary></indexterm>

      <para>Se voc&ecirc; j&aacute; <emphasis>n&atilde;o</emphasis> possui 
	um diret&oacute;rio chamado 
	<filename>/usr/X11R6/lib/X11/fonts/Type1</filename>, voc&ecirc;  
	pode mudar o nome do diret&oacute;rio <filename>MathType1</filename>
	do exemplo acima para <filename>Type1</filename>.</para>
    </sect2>
  </sect1>

  <sect1 id="linuxemu-maple">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Aaron</firstname>
	  <surname>Kaplan</surname>
<!--	  <address><email>aaron@lo-res.org</email></address>-->
	  <contrib>Contribui&ccedil;&atilde;o de </contrib>
	</author>
      </authorgroup>
      <authorgroup>
	<author>
	  <firstname>Robert</firstname>
	  <surname>Getschmann</surname>
<!--	  <address><email>rob@getschmann.org</email></address>-->
	  <contrib>Agracedimentos &agrave; </contrib>
	</author>
      </authorgroup>
    </sect1info>
    <title>Instalando o &maple;</title>

    <indexterm>
      <primary>applications</primary>
      <secondary><application>Maple</application></secondary>
    </indexterm>

    <para><application>&maple;</application> &eacute; um programa comercial 
      similar ao <application>&mathematica;</application>.  Voc&ecirc; 
      deve comprar este programa em <ulink
      url="http://www.maplesoft.com/"></ulink> e fazer o registro para 
      obter um arquivo de licen&ccedil;a.  Para instalar este software no 
      FreeBSD, por favor siga estes passos simples.</para>

      <procedure>
	<step><para>Execute o <literal>shell script</literal> 
	  <filename>INSTALL</filename> da distribui&ccedil;&atilde;o 
	  do produto.  Escolha a op&ccedil;&atilde;o 
	  <quote>RedHat</quote> quando o programa de instala&ccedil;&atilde;o 
	  perguntar.  Um diret&oacute;rio t&iacute;pico de 
	  instala&ccedil;&atilde;o pode ser <filename 
	  class="directory">/usr/local/maple</filename>.</para></step>

        <step><para>Se voc&ecirc; n&atilde;o solicitou, pe&ccedil;a 
	  uma licen&ccedil;a para o <application>&maple;</application>
	  na Maple Waterloo Software (<ulink url="http://register.maplesoft.com/"></ulink>)
	  e copie-a para o arquivo 
	  <filename>/usr/local/maple/license/license.dat</filename>.</para></step>

        <step><para>Instale o gerenciador de licen&ccedil;as 
	  <application>FLEXlm</application> executando o <literal>
	  script shell</literal> de instala&ccedil;&atilde;o 
	  license manager by running the
	  <filename>INSTALL_LIC</filename> que vem junto com o 
	  <application>&maple;</application>.  Especifique o nome 
	  do servidor prim&aacute;rio na sua m&aacute;quina para 
	  o servidor de licen&ccedil;a.</para></step>

        <step><para>Corrija o arquivo 
          <filename>/usr/local/maple/bin/maple.system.type</filename>
          com o seguinte:</para>
<programlisting>   ----- snip ------------------
*** maple.system.type.orig      Sun Jul  8 16:35:33 2001
--- maple.system.type   Sun Jul  8 16:35:51 2001
***************
*** 72,77 ****
--- 72,78 ----
          # the IBM RS/6000 AIX case
          MAPLE_BIN="bin.IBM_RISC_UNIX"
          ;;
+     "FreeBSD"|\
      "Linux")
          # the Linux/x86 case
        # We have two Linux implementations, one for Red Hat and
   ----- snip end of patch -----</programlisting>

	<para>Note que depois do <literal>"FreeBSD"|\</literal> 
	  n&atilde;o deve existir espa&ccedil;o em branco</para>

	<para>Esta corre&ccedil;ao instrui o <application>&maple;</application> 
	  a reconhecer o <quote>FreeBSD</quote> como um tipo de sistema 
	  Linux.  O <literal>script shell</literal> <filename>bin/maple</filename> 
	  chama o <literal>script shell</literal> 
	  <filename>bin/maple.system.type</filename> que por sua vez executa 
	  <command>uname -a</command> para descobrir o nome do sistema 
	  operacional.  Dependendo do nome do sistema operacional ele 
	  saber&aacute; que bin&aacute;rios utilizar.</para></step>

      <step><para>Inicialize o Servidor de Licen&ccedil;as.</para>

	<para>O seguinte <literal>script</literal>, instalado como 
	  <filename>/usr/local/etc/rc.d/lmgrd.sh</filename> &eacute; 
	  uma maneira conveniente de inicializar o 
	  <command>lmgrd</command>:</para>

	<programlisting>   ----- snip ------------

#! /bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/X11R6/bin
PATH=${PATH}:/usr/local/maple/bin:/usr/local/maple/FLEXlm/UNIX/LINUX
export PATH

LICENSE_FILE=/usr/local/maple/license/license.dat
LOG=/var/log/lmgrd.log

case "$1" in
start)
	lmgrd -c ${LICENSE_FILE} 2>> ${LOG} 1>&2
	echo -n " lmgrd"
	;;
stop)
	lmgrd -c ${LICENSE_FILE} -x lmdown 2>> ${LOG} 1>&2
	;;
*)
	echo "Usage: `basename $0` {start|stop}" 1>&2
	exit 64
	;;
esac

exit 0
   ----- snip ------------</programlisting></step>


      <step><para>Inicialize o <application>&maple;</application>:</para>
	<screen>&prompt.user; <userinput>cd /usr/local/maple/bin</userinput>
&prompt.user; <userinput>./xmaple</userinput></screen>

	<para>Ele deve estar executando.  Escreva para a Maplesoft para 
	  faz&ecirc;-los saber que voc&ecirc; gostaria de uma vers&ccedil;ao 
	  nativa para FreeBSD!</para></step>
    </procedure>

    <sect2>
      <title>Problemas Comuns</title>

      <itemizedlist>
	<listitem><para>O gerenciador de licen&ccedil;as 
	  <application>FLEXlm</application> pode ser uma ferramenta 
	  dif&iacute;cil de se trabalhar.  Informa&ccedil;&otilde;es 
	  adicionais sobre o assunto pode ser encontradas em <ulink 
	  url="http://www.globetrotter.com/"></ulink>.</para></listitem>

	<listitem><para><command>lmgrd</command> &eacute; conhecido 
	  por ser problem&aacute;tico com o arquivo de licen&ccedil;a 
	  e com despejo de mem&oacute;ria.  Um arquivo de licen&ccedil;a 
	  correto se parece com:</para>

<programlisting># =======================================================
# License File for UNIX Installations ("Pointer File")
# =======================================================
SERVER chillig ANY
#USE_SERVER
VENDOR maplelmg

FEATURE Maple maplelmg 2000.0831 permanent 1 XXXXXXXXXXXX \
         PLATFORMS=i86_r ISSUER="Waterloo Maple Inc." \
         ISSUED=11-may-2000 NOTICE=" Technische Universitat Wien" \
         SN=XXXXXXXXX</programlisting>

	  <note><para>Aqui letra <quote>X</quote> aparece no lugar do 
	    n&uacute;mero de s&eacute;rie e da chave.  E 
	    <hostid>chillig</hostid> &eacute; o nome do servidor.
	    </para></note>

  	  <para>Editar o arquivo de licen&ccedil;a funciona se voc&ecirc; 
 	    n&atilde;o mexer na linha <quote>FEATURE</quote> (que &eacute; 
 	    protegida pela chave de licen&ccedil;a).</para></listitem>
      </itemizedlist>
    </sect2>
  </sect1>

  <sect1 id="linuxemu-matlab">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Dan</firstname>
	  <surname>Pelleg</surname>
	  <contrib>Contribui&ccedil;&atilde;o de </contrib>
	</author>
	<!-- daniel+handbook@pelleg.org -->
      </authorgroup>
    </sect1info>
    <title>Instalando o &matlab;</title>

    <indexterm>
      <primary>applications</primary>
      <secondary><application>MATLAB</application></secondary>
    </indexterm>

    <para>Este documento descreve o processo de instala&ccedil;&atilde;o 
      da vers&atilde;o Linux do <application>&matlab; vers&atilde;o 6.5</application> 
      em um sistema &os;.  Funciona razoavelmente bem, com a exce&ccedil;&atilde;o 
      do <application>&java.virtual.machine;</application> (veja
      <xref linkend="matlab-using">).</para>

    <para>A vers&atilde;o Linux do <application>&matlab;</application> 
      pode ser solicitada diretamente do <foreignphrase>The MathWorks
      </foreignphrase> em <ulink
      url="http://www.mathworks.com"></ulink>.  Certifique-se que 
      voc&ecirc; obteve o arquivo de licen&ccedil;a ou as 
      instru&ccedil;&otilde;es de como cri&aacute;-lo.  Enquanto 
      voc&ecirc; estiver por l&aacute;, fa&ccedil;a com que eles 
      saibam que voc&ecirc; gostaria de ter uma vers&atilde;o do 
      programa deles nativa para &os;.</para>

    <sect2>
      <title>Instalando o &matlab;</title>

      <para>Para instalar o <application>&matlab;</application>, fa&ccedil;a 
	o seguinte:</para>

      <procedure>
	<step>
	  <para>Insira o CD de instala&ccedil;&atilde;o de monte-o.  
	    Torne-se <username>root</username>, como recomendado pelo 
	    <literal>script</literal> de instala&ccedil;&atilde;o.  Para 
	    inicializar a instala&ccedil;&atilde;o digite:</para>

	  <screen>&prompt.root; <userinput>/compat/linux/bin/sh /cdrom/install</userinput></screen>

	  <tip>
	    <para>O instalador &eacute; gr&aacute;fico.  Se voc&ecirc; 
	      obtiver erros do tipo n&atilde;o posso abrir um <literal>
	      display</literal>, digite 
	      <command>setenv HOME ~<replaceable>USER</replaceable></command>,
	      onde <replaceable>USER</replaceable> &eacute; o usu&aacute;rio 
	      que executou o &man.su.1;.</para>
	  </tip>
	</step>

	<step>
	  <para>
	    Quando o <application>&matlab;</application> perguntar 
	    pelo diret&oacute;rio root, digite:
	    <userinput>/compat/linux/usr/local/matlab</userinput>.</para>

	  <tip>
	    <para>Para facilitar a digita&ccedil;&atilde;o durante o resto 
	      do processo de instala&ccedil;&atilde;o, digite isto na 
	      sua linha de comando:
	      <command>set MATLAB=/compat/linux/usr/local/matlab</command></para>
	  </tip>
	</step>

	<step>
	  <para>Edite o arquivo de licen&ccedil;a de acordo as 
	    instru&ccedil;&otilde;es obtidas no arquivo de licen&ccedil;a 
	    do <application>&matlab;</application>.</para>

	  <tip>
	    <para>Voc&ecirc; pode preparar este arquivo antecipadamente 
	      usando seu editor favorito, e copiando-o para 
	      <filename>$MATLAB/license.dat</filename> antes que o 
	      instalador solicite que voc&ecirc; o edite.</para>
	  </tip>
	</step>

	<step>
	  <para>Complete o processo de instala&ccedil;&atilde;o.</para>
	</step>
      </procedure>

      <para>Neste ponto a instala&ccedil;&atilde;o do seu 
	<application>&matlab;</application> est&aacute; 
	completa.  Os seguintes passos aplicam uma 
	<quote>cola</quote> para conect&aacute;-lo ao 
	seu sistema &os;.</para>
    </sect2>

    <sect2>
      <title>Inicializa&ccedil;&atilde;o do Gerenciador de Licen&ccedil;as</title>
      <procedure>
	<step>
	  <para>Crie liga&ccedil;&otilde;es simb&oacute;licas para os 
	    <literal>scripts</literal> do gerenciador de licen&ccedil;as:</para>

	  <screen>&prompt.root; <userinput>ln -s $MATLAB/etc/lmboot /usr/local/etc/lmboot_TMW</userinput>
&prompt.root; <userinput>ln -s $MATLAB/etc/lmdown /usr/local/etc/lmdown_TMW</userinput></screen>
	</step>
	
	<step>
	  <para>Crie um arquivo de inicializa&ccedil;&atilde;o em 
	    <filename>/usr/local/etc/rc.d/flexlm.sh</filename>.  O
	    exemplo acima &eacute; uma vers&atilde;o modificada do 
	    <filename>$MATLAB/etc/rc.lm.glnx86</filename>.  As 
	    mudan&ccedil;as s&atilde;o em localiza&ccedil;&atilde;o 
	    de arquivos, e inicializa&ccedil;&atilde;o do gerenciador 
	    de licen&ccedil;as sob emula&ccedil;&atilde;o Linux.</para>

	  <programlisting>#!/bin/sh
case "$1" in
  start)
        if [ -f /usr/local/etc/lmboot_TMW ]; then
              /compat/linux/bin/sh /usr/local/etc/lmboot_TMW -u <replaceable>username</replaceable> &amp;&amp; echo 'MATLAB_lmgrd'
        fi
        ;;
  stop)
	if [ -f /usr/local/etc/lmdown_TMW ]; then
            /compat/linux/bin/sh /usr/local/etc/lmdown_TMW  &gt; /dev/null 2&gt;&amp;1
	fi
        ;;
  *)
	echo "Usage: $0 {start|stop}"
	exit 1
	;;
esac

exit 0</programlisting>

	  <important>
	    <para>O arquivo deve ser feito execut&aacute;vel:</para>

	    <screen>&prompt.root; <userinput>chmod +x /usr/local/etc/rc.d/flexlm.sh</userinput></screen>

	    <para>Voc&ecirc; tamb&eacute;m deve substituir 
	      <replaceable>username</replaceable> acima por 
	      um nome v&aacute;lido em seu sistema (e n&atilde;o 
	      <username>root</username>).</para>
	  </important>
	</step>

	<step>
	  <para>Inicialize o gerenciador de licen&ccedil;a com o comando:</para>

	  <screen>&prompt.root; <userinput>/usr/local/etc/rc.d/flexlm.sh start</userinput></screen>
	</step>
      </procedure>
    </sect2>

    <sect2>
      <title>Ligando o Ambiente de Tempo de Execu&ccedil;&atilde;o &java;</title>

      <para>Modifique a liga&ccedil;&atilde;o do Ambiente de Tempo 
	de Execu&ccedil;&atilde;o <application>&java;</application>  
	(JRE) para um funcionando no &os;:</para>

      <screen>&prompt.root; <userinput>cd $MATLAB/sys/java/jre/glnx86/</userinput>
&prompt.root; <userinput>unlink jre; ln -s ./jre1.1.8 ./jre</userinput></screen>
    </sect2>

    <sect2>
      <title>Crie um <literal>Script</literal> de Incializa&ccedil;&atilde;o &matlab;</title>

      <procedure>
	<step>
	  <para>Coloque o seguinte <literal>script</literal> de 
	    inicializa&ccedil;&atilde;o em 
	    <filename>/usr/local/bin/matlab</filename>:
	  </para>

	  <programlisting>#!/bin/sh
/compat/linux/bin/sh /compat/linux/usr/local/matlab/bin/matlab "$@"</programlisting>
	</step>

	<step>
	  <para>Ent&atilde;o digite o comando 
	    <command>chmod +x /usr/local/bin/matlab</command>.</para>
	</step>
      </procedure>

      <tip>
	<para>Dependendo da sua vers&atilde;o do 
	  <filename role="package">emulators/linux_base</filename>, 
	  voc&ecirc; pode obter erros ao executar este <literal>
	  script</literal>.  Para evitar isso, edite o arquivo 
	  <filename>/compat/linux/usr/local/matlab/bin/matlab</filename>,
	  e modifique a linha que diz:</para>

	<programlisting>if [ `expr "$lscmd" : '.*-&gt;.*'` -ne 0 ]; then</programlisting>

	<para>(in version 13.0.1 it is on line 410) to this
	  line:</para>

	<programlisting>if test -L $newbase; then</programlisting>
      </tip>
    </sect2>

    <sect2>
      <title>Criando um <literal>Script</literal> de Finaliza&ccedil;&atilde;o do &matlab;</title>

      <para>O seguinte procedimento &eacute; necess&aacute;rio 
	para resolver o problema do &matlab; n&atilde;o sair corretamente.</para>

      <procedure>
	<step>
	  <para>Crie o arquivo 
	    <filename>$MATLAB/toolbox/local/finish.m</filename>, e
	    insita a &uacute;nica linha:</para>

	  <programlisting>! $MATLAB/bin/finish.sh</programlisting>

	  <note><para>O <literal>$MATLAB</literal> &eacute; 
	    literal.</para></note>

	  <tip>
	    <para>No mesmo diret&oacute;rio, voc&ecirc; encotrar&aacute; 
	      os arquivos <filename>finishsav.m</filename> e
	      <filename>finishdlg.m</filename>, que permitir&atilde;o a 
	      voc&ecirc; salvar seu espa&ccedil;o de trabalho antes de 
	      sair.  Se voc&ecirc; usar qualquer um deles, insita a 
	      linha acima imediatamente depois do comando 
	      <literal>save</literal>.</para></tip>
	</step>

	<step>
	  <para>Crie o arquivo 
	    <filename>$MATLAB/bin/finish.sh</filename>, que 
	    possuir&aacute; o seguinte conte&uacute;do:</para>

	  <programlisting>#!/usr/compat/linux/bin/sh
(sleep 5; killall -1 matlab_helper) &
exit 0</programlisting>
	</step>

	<step>
	  <para>Fa&ccedil;a com que o arquivo seja execut&aacute;vel:</para>

	  <screen>&prompt.root; <userinput>chmod +x $MATLAB/bin/finish.sh</userinput></screen>
	</step>
      </procedure>
    </sect2>

    <sect2 id="matlab-using">
      <title>Usando o &matlab;</title>

      <para>Neste ponto voc&ecirc; est&aacute; pronto para 
	digitar <command>matlab</command> e come&ccedil;ar a 
	us&aacute;-lo.</para>
    </sect2>
  </sect1>

  <sect1 id="linuxemu-oracle">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Marcel</firstname>
	  <surname>Moolenaar</surname>
	  <contrib>Contribui&ccedil;&atilde;o de </contrib>
	</author>
	<!-- marcel@cup.hp.com -->
      </authorgroup>
    </sect1info>
    <title>Instalando &oracle;</title>

    <indexterm>
      <primary>applications</primary>
      <secondary><application>Oracle</application></secondary>
    </indexterm>

    <sect2>
      <title>Prefacio</title>
      <para>Este documento descreve o processo de instala&ccedil;&atilde;o 
	do <application>&oracle; 8.0.5</application> e
	<application>&oracle; 8.0.5.1 Enterprise Edition</application> para 
	Linux em uma m&aacute;quina FreeBSD.</para>
    </sect2>

    <sect2>
      <title>Instalando o Ambiente Linux</title>

      <para>Esteja certo de ter instalado o 
	<filename role='package'>emulators/linux_base</filename> e
	<filename role='package'>devel/linux_devtools</filename> a partir da 
	cole&ccedil;&atilde;o do ports.  Se voc&ecirc; passar por 
	dificuldades com estes ports, voc&ecirc; pode usar os pacotes ou 
	vers&otilde;es antigas dispon&iacute;veis na cole&ccedil;&atilde;o 
	dos ports.</para>

      <para>Se voc&ecirc; quer executar o <quote>intelligent agent</quote>, 
	voc&ecirc; tamb&eacute;m precisar&aacute; instalar o pacote Tcl do RedHat: 
	<filename>tcl-8.0.3-20.i386.rpm</filename>.  O comando geral 
	para instalar pacotes com o port oficial do 
	<application>RPM</application> 
	(<filename role='package'>archivers/rpm</filename>) &eacute;:</para>

      <screen>&prompt.root; <userinput>rpm -i --ignoreos --root /compat/linux --dbpath /var/lib/rpm <replaceable>pacote</replaceable></userinput></screen>

      <para>Instala&ccedil;&atilde;o do <replaceable>pacote</replaceable> n&atilde;o 
	deve gerar erros.</para>
    </sect2>

    <sect2>
      <title>Criando o Ambiente &oracle;</title>

      <para>Antes que voc&ecirc; possa instalar o <application>&oracle;</application>, 
	voc&ecirc; precisa configurar um ambiente adequado.  Este documento 
	apenas descreve o que fazer <emphasis>especificamente</emphasis> procedimentos  
	para executar o <application>&oracle;</application> para Linux no FreeBSD, 
	e n&atilde;o o que est&aacute; descrito no guia de instala&ccedil;&atilde;o 
	do <application>&oracle;</application>.</para>

      <sect3 id="linuxemu-kernel-tuning">
        <title>Ajustes do Kernel</title>
	<indexterm><primary>kernel tuning</primary></indexterm>

	<para>Como descrito no guia de instala&ccedil;&atilde;o do 
	  <application>&oracle;</application>, voc&ecirc; precisa 
	  configurar o tamanho m&aacute;ximo da mem&oacute;ria 
	  compartilhada.  N&atilde;o use o 
	  <literal>SHMMAX</literal> no FreeBSD. <literal>SHMMAX</literal>
	  &eacute; meramente calculado atrav&eacute;s do 
	  <literal>SHMMAXPGS</literal> e
	  <literal>PGSIZE</literal>.  Sendo assim, defina o 
	  <literal>SHMMAXPGS</literal>.  Todas as outras op&ccedil;&otilde;es 
	  podem ser usadas como descritas no guia.  Por exemplo:</para>

	<programlisting>options SHMMAXPGS=10000
options SHMMNI=100
options SHMSEG=10
options SEMMNS=200
options SEMMNI=70
options SEMMSL=61</programlisting>

	<para>Configure estas op&ccedil;&otilde;es para atender suas 
	  necessidades no uso do <application>&oracle;</application>.</para>

	<para>Tamb&eacute;m tenha certeza de ter as seguintes 
	  op&ccedil;&otilde;es em seu arquivo de configura&ccedil;&atilde;o de 
	  <foreignphrase>kernel</foreignphrase>:</para>

<programlisting>options SYSVSHM #SysV shared memory
options SYSVSEM #SysV semaphores
options SYSVMSG #SysV interprocess communication</programlisting>
      </sect3>

      <sect3 id="linuxemu-oracle-account">

        <title>Conta de Usu&aacute;rio &oracle;</title>

	<para>Crie uma conta <username>oracle</username> assim como voc&ecirc; 
	  criaria qualque outra conta.  A conta <username>oracle</username> &eacute; 
	  especial apenas para possuir um <foreignphrase>shell</foreignphrase> Linux.  
	  Adicione <literal>/compat/linux/bin/bash</literal> ao 
	  <filename>/etc/shells</filename> e configure o <foreignphrase>shell
	  </foreignphrase> da conta <username>oracle</username>
	  para <filename>/compat/linux/bin/bash</filename>.</para>
      </sect3>

      <sect3 id="linuxemu-environment">
        <title>Ambiente</title>

	<para>Al&eacute;m das vari&aacute;veis usuais do <application>&oracle;</application> 
	  como <envar>ORACLE_HOME</envar> e <envar>ORACLE_SID</envar> voc&ecirc; 
	  deve configurar as seguintes vari&aacute;veis de ambiente:</para>

	<informaltable frame="none">
	  <tgroup cols="2">
          <colspec colwidth="1*">
          <colspec colwidth="2*">
	    <thead>
	      <row>
		<entry>Vari&aacute;vel</entry>

		<entry>Valor</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry><envar>LD_LIBRARY_PATH</envar></entry>

		<entry><literal>$ORACLE_HOME/lib</literal></entry>
	      </row>

	      <row>
		<entry><envar>CLASSPATH</envar></entry>

		<entry><literal>$ORACLE_HOME/jdbc/lib/classes111.zip</literal></entry>
	      </row>

	      <row>
		<entry><envar>PATH</envar></entry>

		<entry><literal>/compat/linux/bin
/compat/linux/sbin
/compat/linux/usr/bin
/compat/linux/usr/sbin
/bin
/sbin
/usr/bin
/usr/sbin
/usr/local/bin
$ORACLE_HOME/bin</literal></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

        <para>&Eacute; aconselh&aacute;vel configurar todas as vari&aacute;veis 
	  de ambiente no arquivo <filename>.profile</filename>.  Um exemplo 
	  completo seria:</para>

<programlisting>ORACLE_BASE=/oracle; export ORACLE_BASE
ORACLE_HOME=/oracle; export ORACLE_HOME
LD_LIBRARY_PATH=$ORACLE_HOME/lib
export LD_LIBRARY_PATH
ORACLE_SID=ORCL; export ORACLE_SID
ORACLE_TERM=386x; export ORACLE_TERM
CLASSPATH=$ORACLE_HOME/jdbc/lib/classes111.zip
export CLASSPATH
PATH=/compat/linux/bin:/compat/linux/sbin:/compat/linux/usr/bin
PATH=$PATH:/compat/linux/usr/sbin:/bin:/sbin:/usr/bin:/usr/sbin
PATH=$PATH:/usr/local/bin:$ORACLE_HOME/bin
export PATH</programlisting>
      </sect3>
    </sect2>

    <sect2>
      <title>Instalando o &oracle;</title>

      <para>Devido a uma pequena inconsist&ecirc;ncia no emulador Linux, 
	voc&ecirc; precisa criar um diret&oacute;rio com o nome 
	<filename>.oracle</filename> em <filename>/var/tmp</filename> antes de 
	inicializar o instalador.  Fa&ccedil;a com que ele tenha permiss&atilde;o 
	de escrita para todos ou fa&ccedil;a com que seu propriet&aacute;rio seja 
	o usu&aacute;rio <username>oracle</username>.  Voc&ecirc; deve ser capaz 
	de instalar o <application>&oracle;</application> sem problemas.  Se 
	voc&ecirc; tiver problemas, verifique a sua distribui&ccedil;&atilde;o 
	<application>&oracle;</application> e/ou configura&ccedil;&atilde;o 
	primeiro!  Ap&oacute;s ter instalado o <application>&oracle;</application>,
	aplique as corre&ccedil;&otilde;es descritas nas pr&oacute;ximas duas 
	subse&ccedil;&otilde;es.</para>

      <para>Um problema frequente &eacute; que o adaptador do protocolo TCP 
	n&atilde;o &eacute; instalado corretamente.  Como consequ&ecirc;ncia, 
	voc&ecirc; n&atilde;o pode inciar qualquer aplica&ccedil;&atilde;o de 
	escuta TCP.  As seguintes a&ccedil;&otilde;es ajudam a resolver este 
	problema:</para>

      <screen>&prompt.root; <userinput>cd $ORACLE_HOME/network/lib</userinput>
&prompt.root; <userinput>make -f ins_network.mk ntcontab.o</userinput>
&prompt.root; <userinput>cd $ORACLE_HOME/lib</userinput>
&prompt.root; <userinput>ar r libnetwork.a ntcontab.o</userinput>
&prompt.root; <userinput>cd $ORACLE_HOME/network/lib</userinput>
&prompt.root; <userinput>make -f ins_network.mk install</userinput></screen>

      <para>N&atilde;o esque&ccedil;a de executar o <filename>root.sh</filename> novamente!</para>

    <sect3 id="linuxemu-patch-root">
      <title>Corrigindo o root.sh</title>

	<para>Ao instalar o <application>&oracle;</application>, algumas a&ccedil;&otilde;es, 
	  precisam ser efetuadas como <username>root</username>, s&atilde;o gravadas em 
	  um <literal>shell script</literal> <filename>root.sh</filename>.  Este 
	  <literal>script</literal> &eacute; escrito no diret&oacute;rio 
	  <filename>orainst</filename>.  Aplique a seguinte corre&ccedil;&atilde;o em 
	  <filename>root.sh</filename>, para que ele use o local correto do 
	  <command>chown</command> ou alternativamente execute o <literal>script</literal> 
	  em um <foreignphrase>shell</foreignphrase> nativo Linux.</para>

	<programlisting>*** orainst/root.sh.orig Tue Oct 6 21:57:33 1998
--- orainst/root.sh Mon Dec 28 15:58:53 1998
***************
*** 31,37 ****
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/bin/chown
#
# Define variables to be used in this script
--- 31,37 ----
# This is the default value for CHOWN
# It will redefined later in this script for those ports
# which have it conditionally defined in ss_install.h
! CHOWN=/usr/sbin/chown
#
# Define variables to be used in this script</programlisting>

	<para>Quando voc&ecirc; n&atilde;o instala o <application>&oracle;</application> 
	  a partir do CD, voc&ecirc; pode corrigir o fonte do 
	  <filename>root.sh</filename>.  Seu nome &eacute; 
	  <filename>rthd.sh</filename> e est&aacute; localizado no diret&iacute;rio 
	  <filename>orainst</filename> na &aacute;rvore dos fontes.</para>
      </sect3>

      <sect3 id="linuxemu-patch-tcl">
	<title>Corrigindo o genclntsh</title>

	<para>O <literal>script</literal> <command>genclntsh</command> 
	  &eacute; usado para criar uma &uacute;nica biblioteca cliente 
	  compartilhada.  Ela &eacute; usada quando os <literal>demos</literal> 
	  s&atilde;o compilados.  Aplique a seguinte corre&ccedil;&atilde;o 
	  para comentar a defini&ccedil;&atilde;o do <envar>PATH</envar>:</para>

	<programlisting>*** bin/genclntsh.orig Wed Sep 30 07:37:19 1998
--- bin/genclntsh Tue Dec 22 15:36:49 1998
***************
*** 32,38 ****
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst
--- 32,38 ----
#
# Explicit path to ensure that we're using the correct commands
#PATH=/usr/bin:/usr/ccs/bin export PATH
! #PATH=/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin export PATH
#
# each product MUST provide a $PRODUCT/admin/shrept.lst</programlisting>
      </sect3>
    </sect2>

    <sect2>
      <title>Executando o &oracle;</title>

      <para>Ao seguir estas instru&ccedil;&otilde;es  voc&ecirc; deve 
	ser capaz de executar o <application>&oracle;</application> como 
	se estivesse no Linux.</para>
    </sect2>
  </sect1>

  <sect1 id="sapr3">
    <sect1info>
      <authorgroup>
	<author>
	  <firstname>Holger</firstname>
	  <surname>Kipp</surname>
	  <contrib>Contribui&ccedil;&atilde;o de </contrib>
	</author>
      </authorgroup>
      <!-- holger.kipp@alogis.com -->
      <authorgroup>
	<author>
	  <firstname>Valentino</firstname>
	  <surname>Vaschetto</surname>
	  <contrib>Vers&atilde;o Original convertida para SGML por </contrib>
	</author>
      </authorgroup>
    </sect1info>

    <title>Instalando o &sap.r3;</title>

    <indexterm>
      <primary>applications</primary>
      <secondary><application>SAP R/3</application></secondary>
    </indexterm>

    <para>Instala&ccedil;&otilde;es de Sistemas <application>&sap;</application> 
      usando FreeBSD n&atilde;o ser&atilde;o suportadas pela equipe de 
      suporte da &sap;, eles apenas oferem suporte para plataformas 
      certificadas.</para>

    <sect2 id="preface">
      <title>Pref&aacute;cio</title>

      <para>Este documento descreve uma maneira poss&iacute;vel de 
	instalar um Sistema <application>&sap.r3;</application>
	com <application>Banco de Dados &oracle;</application>
	para Linux em uma m&aacute;quina FreeBSD, incluindo a 
	instala&ccedil;&atilde;o do FreeBSD e do 
	<application>&oracle;</application>. Duas configura&ccedil;&otilde;es 
	diferentes ser&atilde;o descritas:</para>

      <itemizedlist>
	<listitem>
	  <para><application>&sap.r3; 4.6B (IDES)</application> com
	  <application>&oracle; 8.0.5</application> no FreeBSD 4.3-STABLE</para>
	</listitem>

	<listitem>
	  <para><application>&sap.r3; 4.6C</application> com
	  <application>&oracle; 8.1.7</application> no FreeBSD 4.5-STABLE</para>
	</listitem>
      </itemizedlist>

      <para>Ainda que este documento tente descrever todos os passos 
	importantes em grande detalhe, o mesmo n&atilde;o serve como 
        substituto para os guias de instala&ccedil;&atilde;o do 
	<application>&oracle;</application> e do
	<application>&sap.r3;</application>.</para>

      <para>Por favor veja a documenta&ccedil;&atilde;o que 
	acompanha a edi&ccedil;&atilde;o Linux do <application>&sap.r3;</application>
	para o <application>&sap;</application> e quest&otilde;es 
	espec&iacute;ficas do <application>&oracle;</application>, assim como 
	recursos da <application>&oracle;</application> e
	<application>&sap; OSS</application>.</para>
    </sect2>

    <sect2 id="software">
      <title>Software</title>

      <para>Os seguintes CD-ROMs foram usados nas instala&ccedil;&otilde;es do <application>&sap;</application>:</para>

      <sect3 id="software-46b">
	<title>&sap.r3; 4.6B, &oracle; 8.0.5</title>

      <informaltable>
	<tgroup cols=3>
	  <thead>
	    <row>
	      <entry>Nome</entry> <entry>N&uacute;mero</entry> <entry>Descri&ccedil;&atilde;o</entry>
	    </row>
	  </thead>
	  <tbody>
	    <row>
	      <entry>KERNEL</entry> <entry>51009113</entry> <entry>SAP Kernel Oracle /
		Installation / AIX, Linux, Solaris</entry>
	    </row>

	    <row>
	      <entry>RDBMS</entry> <entry>51007558</entry> <entry>Oracle / RDBMS 8.0.5.X /
		Linux</entry>
	    </row>

	    <row>
	      <entry>EXPORT1</entry> <entry>51010208</entry> <entry>IDES / DB-Export /
		Disco 1 de 6</entry>
	    </row>

	    <row>
	      <entry>EXPORT2</entry> <entry>51010209</entry> <entry>IDES / DB-Export /
		Disco 2 de 6</entry>
	    </row>

	    <row>
	      <entry>EXPORT3</entry> <entry>51010210</entry> <entry>IDES / DB-Export /
		Disco 3 de 6</entry>
	    </row>
   
	    <row>
	      <entry>EXPORT4</entry> <entry>51010211</entry> <entry>IDES / DB-Export /
		Disco 4 de 6</entry>
	    </row>

	    <row>
	      <entry>EXPORT5</entry> <entry>51010212</entry> <entry>IDES / DB-Export /
		Disco 5 de 6</entry>
	    </row>

	    <row>
	      <entry>EXPORT6</entry> <entry>51010213</entry> <entry>IDES / DB-Export /
		Disco 6 de 6</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>Adicionalmente, usamos o CD do <application>&oracle; 8
	Server</application> (vers&atilde;o de pr&eacute;-produ&ccedil;&atilde;o 
	para Linux, <foreignphrase>kernel</foreignphrase> 2.0.33) que n&atilde;o 
	&eacute; t&atilde;o necess&aacute;rio, e o FreeBSD 4.3-STABLE (que estava 
	h&aacute; poucos dias na RELEASE 4.3).</para>

      </sect3>
      <sect3 id="software-46c">
	<title>&sap.r3; 4.6C SR2, &oracle; 8.1.7</title>

	<informaltable>
	  <tgroup cols=3>
	    <thead>
	      <row>
		<entry>Nome</entry> <entry>N&uacute;mero</entry> <entry>Descri&ccedil;&atilde;o</entry>
	      </row>
	    </thead>

	    <tbody>
	      <row>
		<entry>KERNEL</entry> <entry>51014004</entry> <entry>SAP Kernel Oracle /
		  SAP Kernel Version 4.6D / DEC, Linux</entry>
	      </row>

	      <row>
		<entry>RDBMS</entry> <entry>51012930</entry> <entry>Oracle 8.1.7/ RDBMS /
		  Linux</entry>
	      </row>

	      <row>
		<entry>EXPORT1</entry> <entry>51013953</entry> <entry>Release 4.6C SR2 / Export
		  / Disco 1 de 4</entry>
	      </row>

	      <row>
		<entry>EXPORT1</entry> <entry>51013953</entry> <entry>Release 4.6C SR2 / Export
		  / Disco 2 de 4</entry>
	      </row>

	      <row>
		<entry>EXPORT1</entry> <entry>51013953</entry> <entry>Release 4.6C SR2 / Export
		  / Disco 3 de 4</entry>
	      </row>

	      <row>
		<entry>EXPORT1</entry> <entry>51013953</entry> <entry>Release 4.6C SR2 / Export
		  / Disco 4 de 4</entry>
	      </row>

	      <row>
		<entry>LANG1</entry> <entry>51013954</entry> <entry>Release 4.6C SR2 /
		  Language / DE, EN, FR / Disc 1 of 3</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

        <para>Dependendo das l&iacute;nguas que voc&ecirc; deseja instalar, 
	  CDs adicionais de l&iacute;nguas podem ser necess&aacute;rios.  Aqui 
	  estamos usando apenas DE e EN,  sendo assim, o primeiro CD de l&iacute;ngua 
	  &eacute; necess&aacute;rio.  Como uma pequena nota, os n&uacute;meros de 
	  todos os quatro CDs EXPORT s&atilde;o identicos.  Todos os tr&ecirc;s 
	  CDs de l&iacute;ngua tamb&eacute;m possuem o mesmo n&uacute;mero (que 
	  s&atilde;o diferentes da vers&atilde;o de numera&ccedil;&atilde;o do 
	  4.6B IDES).  No momento em que redigimos este texto esta 
	  instala&ccedil;&atilde;o est&aacute; sendo executada em um FreeBSD 
	  4.5-STABLE (20.03.2002).</para>
      </sect3>
    </sect2>

    <sect2 id="sap-notes">
      <title>Notas do &sap;</title>

      <para>As seguintes notas devem ser lidas antes da instala&ccedil;&atilde;o 
	do <application>&sap.r3;</application>, pois provaram ser 
	&uacute;teis:</para>

      <sect3 id="sap-notes-46b">
	<title>&sap.r3; 4.6B, &oracle; 8.0.5</title>

	<informaltable>
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>N&uacute;mero</entry>
		<entry>T&iacute;tulo</entry>
	      </row>
	    </thead>
	    <tbody>

	      <row>
		<entry>0171356</entry> <entry>SAP Software on Linux: Essential
		  Comments</entry>
	      </row>

	      <row>
		<entry>0201147</entry> <entry>INST: 4.6C R/3 Inst. on UNIX -
		  Oracle</entry>
	      </row>

	      <row>
		<entry>0373203</entry> <entry>Update / Migration Oracle 8.0.5 --&gt;
		  8.0.6/8.1.6 LINUX</entry>
	      </row>

	      <row>
		<entry>0072984</entry> <entry>Release of Digital UNIX 4.0B for
		  Oracle</entry>
	      </row>

	      <row>
		<entry>0130581</entry> <entry>R3SETUP step DIPGNTAB terminates</entry>
	      </row>

	      <row>
		<entry>0144978</entry> <entry>Your system has not been installed
		  correctly</entry>
	      </row>

	      <row>
		<entry>0162266</entry> <entry>Questions and tips for R3SETUP on Windows
		  NT / W2K</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
      </sect3>

      <sect3 id="sap-notes-46c">
	<title>&sap.r3; 4.6C, &oracle; 8.1.7</title>

	<informaltable>
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>N&uacute;mero</entry>
		<entry>T&iacute;tulo</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry>0015023</entry> <entry>Initializing table TCPDB (RSXP0004)
		  (EBCDIC)</entry>
	      </row>

	      <row>
		<entry>0045619</entry> <entry>R/3 with several languages or
		  typefaces</entry>
	      </row>

	      <row>
		<entry>0171356</entry> <entry>SAP Software on Linux: Essential
		  Comments</entry>
	      </row>

	      <row>
		<entry>0195603</entry> <entry>RedHat 6.1 Enterprise version:
		  Known problems</entry>
	      </row>

	      <row>
		<entry>0212876</entry> <entry>The new archiving tool SAPCAR</entry>
	      </row>

	      <row>
		<entry>0300900</entry> <entry>Linux: Released DELL Hardware</entry>
	      </row>

	      <row>
		<entry>0377187</entry> <entry>RedHat 6.2: important remarks</entry>
	      </row>

	      <row>
		<entry>0387074</entry> <entry>INST: R/3 4.6C SR2 Installation on
		  UNIX</entry>
	      </row>

	      <row>
		<entry>0387077</entry> <entry>INST: R/3 4.6C SR2 Inst. on UNIX -
		  Oracle</entry>
	      </row>

	      <row>
		<entry>0387078</entry> <entry>SAP Software on UNIX: OS Dependencies
		  4.6C SR2</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>
      </sect3>
    </sect2>

    <sect2 id="hardware-requirements">
      <title>Hardware Necess&aacute;rio</title>

      <para>O seguinte equipamento &eacute;  &eacute; suficiente para a 
	instala&ccedil;&atilde;o de um Sistema <application>&sap.r3;</application>. 
	Para produ&ccedil;&atilde;o, um tamanho maior para o processo 
	de extra&ccedil;&atilde;o &eacute; necess&aacute;rio:</para>

      <informaltable>
	<tgroup cols="3">
	  <thead>
	    <row>
	      <entry>Componente</entry>
	      <entry>4.6B</entry>
	      <entry>4.6C</entry>
	    </row>
	  </thead>
	  <tbody>
	    <row>
	      <entry>Processador</entry>
	      <entry>2 x 800MHz &pentium; III</entry>
	      <entry>2 x 800MHz &pentium; III</entry>
	    </row>

	    <row>
	      <entry>Memoria</entry>
	      <entry>1GB ECC</entry>
	      <entry>2GB ECC</entry>
	    </row>

	    <row>
	      <entry>Espa&ccedil;o em Disco</entry>
	      <entry>50-60GB (IDES)</entry>
	      <entry>50-60GB (IDES)</entry>
	    </row>
	  </tbody>
	</tgroup>
      </informaltable>

      <para>Para uso em produ&ccedil;&atilde;o, Processadores &xeon; 
	com <foreignphrase>cache</foreignphrase>, alta velocidade de 
	acesso &agrave; disco (SCSI, controladora de hardware RAID), 
	USV e mem&oacute;ria RAM ECC &eacute; recomendado.  As grandes 
	quantidades de disco s&atilde;o para o Sistem IDES pr&eacute;-
	configurado, que cria 27&nbsp;GB de arquivos de banco e dados 
	durante a instala&ccedil;&atilde;o.  Este espa&ccedil;o 
	tamb&eacute;m &eacute; inicial para sistemas de produ&ccedil;&atilde;o 
	e aplica&ccedil;&otilde;es de dados.</para>

      <sect3 id="hardware-46b">
	<title>&sap.r3; 4.6B, &oracle; 8.0.5</title>

      <para>O seguinte hardwar foi usado: uma placa bi-processada com dois 
	processadores &pentium;&nbsp;III 800&nbsp;MHz, adaptadora SCSI 
	&adaptec; 29160 Ultra160 (para acesso &agrave; uma unidade DLT 
	40/80&nbsp;GB e um CDROM), controladora &mylex; &acceleraid; (2 canais, 
	firmware 6.00-1-00 com 32&nbsp;MB de RAM).  Para a controladora 
	&mylex; n&oacute;s conectamos dois discos de 17&nbsp;GB (espelhados) 
	e quatro discos de 36&nbsp;GB (RAID n&iacute;vel 5).</para>
      </sect3>

      <sect3 id="hardware-46c">
	<title>&sap.r3; 4.6C, &oracle; 8.1.7</title>

      <para>Para esta instala&ccedil;&atilde;o um &dell; &poweredge; 2500 foi 
	usado: placa bi-processada com dois processadores &pentium;&nbsp;III de 
	1000&nbsp;MHz (256&nbsp;kB de <foreignphrase>Cache</foreignphrase>), 
	2&nbsp;GB de mem&oacute;ria PC133 ECC SDRAM, Controladora PERC/3 DC PCI RAID 
	com 128&nbsp;MB, e um drive EIDE DVD-ROM. Na a controladora RAID est&atilde;o 
	ligados dois discos de 18&nbsp;GB (espelhados) e quatro discos de 36&nbsp;GB 
	(RAID n&iacute;vel 5).</para>
      </sect3>
    </sect2>

    <sect2 id="installation">
      <title>Instala&ccedil;&atilde;o do FreeBSD</title>

      <para>Primeiro voc&ecirc; deve instalar o FreeBSD. Existem v&aacute;rias 
	maneiras de se fazer isto (o FreeBSD&nbsp;4.3 foi instalado via FTP, o 
	FreeBSD&nbsp;4.5 diretamente do CD), para mais informa&ccedil;&otilde;es 
	leia a <xref linkend="install-diff-media">.</para>

      <sect3 id="disk-layout">
	<title>Disposi&ccedil;&atilde;o do Disco</title>

	<para>Para manter a simplicidade, a mesma disposi&ccedil;&atilde;o de 
	  disco para a instala&ccedil;&atilde;o do <application>&sap.r3; 46B</application> 
	  e do <application>&sap.r3; 46C SR2</application> foi usada.
	  Apenas os nomes dos dispositivos foi modificada, pois as instala&ccedil;&otilde;es 
	  foram feitas em equipamentos distintos (<devicename>/dev/da</devicename> e 
	  <devicename>/dev/amr</devicename> respectivamente, ent&atilde;o usando o 
	  AMI &megaraid;, uma enxergar&aacute; <devicename>/dev/amr0s1a</devicename> 
	  ao inv&eacute;s de <devicename>/dev/da0s1a</devicename>):</para>

	<informaltable>
	  <tgroup cols="4">
	    <thead>
	      <row>
		<entry>Sistema de arquivos</entry>
		<entry>Tamanho (blocos de 1k)</entry>
		<entry>Tamanho (GB)</entry>
		<entry>Montado em</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry><devicename>/dev/da0s1a</devicename></entry>
		<entry>1.016.303</entry>
		<entry>1</entry>
		<entry><filename>/</filename></entry>
	      </row>

	      <row>
		<entry><devicename>/dev/da0s1b</devicename></entry>
		<entry> </entry>
		<entry>6</entry>
		<entry>swap</entry>
	      </row>

	      <row>
		<entry><devicename>/dev/da0s1e</devicename></entry>
		<entry>2.032.623</entry>
		<entry>2</entry>
		<entry><filename>/var</filename></entry>
	      </row>

	      <row>
		<entry><devicename>/dev/da0s1f</devicename></entry>
		<entry>8.205.339</entry>
		<entry>8</entry>
		<entry><filename>/usr</filename></entry>
	      </row>

	      <row>
		<entry><devicename>/dev/da1s1e</devicename></entry>
		<entry>45.734.361</entry>
		<entry>45</entry>
		<entry><filename>/compat/linux/oracle</filename></entry>
	      </row>

	      <row>
		<entry><devicename>/dev/da1s1f</devicename></entry>
		<entry>2.032.623</entry>
		<entry>2</entry>
		<entry><filename>/compat/linux/sapmnt</filename></entry>
	      </row>

	      <row>
		<entry><devicename>/dev/da1s1g</devicename></entry>
		<entry>2.032.623</entry>
		<entry>2</entry>
		<entry><filename>/compat/linux/usr/sap</filename></entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Configure e inicialize dois drives l&oacute;gicos 
	  antecipadamente com o software da &mylex; ou PERC/3 RAID.
	  O software pode ser inicializado durante a fase de 
	  inicializa&ccedil;&atilde;o da <acronym>BIOS</acronym>.</para>

	<para>Por favor note que as disposi&ccedil;&otilde;es de disco 
	  diferem um pouco das recomenda&ccedil;&otilde;es da &sap;, pois a 
	  sugest&atilde;o &eacute; que se monte os subdiret&oacute;rios do 
	  <application>&oracle;</application> (e alguns outros) separadamente 
	  &mdash; n&oacute;s apenas dedicimos cri&aacute;-los em 
	  subdiret&oacute;rios reais por simplicidade.</para>
      </sect3>

      <sect3 id="makeworldandnewkernel">
	<title><command>make world</command> e um Novo Kernel</title>

	<para>Baixe da Internet os &uacute;ltimos fontes do -STABLE.  
	  Recompile seu sistema e seu <foreignphrase>kernel</foreignphrase> 
	  ap&oacute;s editar seu arquivo de configura&ccedil;&atilde;o de 
	  <foreignphrase>kernel</foreignphrase>.  Aqui voc&ecirc; tamb&eacute;m 
	  deve incluir seus <link linkend="kerneltuning">par&acirc;metros de kernel</link>
	  que s&atilde;o necess&aacute;rios tanto para o <application>&sap.r3;</application>
	  como para o <application>&oracle;</application>.</para>
      </sect3>
    </sect2>

    <sect2 id="installingthelinuxenviornment">
      <title>Instalando o Ambiente Linux</title>

      <sect3 id="installinglinuxbase-system">
	<title>Instalando o Sistema Base Linux</title>

	<para>Primeiro o <link linkend="linuxemu-libs-port">linux_base</link>
	  precisa ser instalado (como <username>root</username>):</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/emulators/linux_base</userinput>
&prompt.root; <userinput>make install distclean</userinput></screen>

      </sect3>


      <sect3 id="installinglinuxdevelopment">
	<title>Instalando o Ambiente de Desenvolvimento Linux</title>

	<para>O ambiente de desenvolvimento Linix &eacute; necess&aacute;rio,
	  se voc&ecirc; deseja instalar o <application>&oracle;</application> 
	  no FreeBSD, de acordo com a 
	  <xref linkend="linuxemu-oracle">:</para>

	<screen>&prompt.root; <userinput>cd /usr/ports/devel/linux_devtools</userinput>
&prompt.root; <userinput>make install distclean</userinput></screen>

	<para>O ambiente de desenvolvimento Linux foi apenas instalado para 
	  o <application>&sap.r3; 46B IDES</application>.  N&atilde;o &eacute; 
	  necess&aacute;rio, se o <application>&oracle; DB</application> n&atilde;o 
	  &eacute; religado no sistema FreeBSD.  Este &eacute; o caso se 
	  voc&ecirc; estiver usando uma instala&ccedil;&atilde;o do 
	  <application>&oracle;</application> vinda de um sistema Linux.</para>

      </sect3>


      <sect3 id="installingnecessaryrpms">
	<title>Instalando os RPMs Necess&aacute;rios</title>
	<indexterm><primary>RPMs</primary></indexterm>

	<para>Para inicializar o programa <command>R3SETUP</command>, 
	  o suporte a PAM &eacute; necess&aacute;rio.
	  Durante a primeira instala&ccedil;&atilde;o do 
	  <application>&sap;</application> no FreeBSD 4.3-STABLE 
	  n&oacute;s tentamos instalar o PAM com todos os pacotes 
	  requeridos e finalmente for&ccedil;amos a instala&ccedil;&atilde;o 
	  do pacote PAM, que funcionou.  Para o 
	  <application>&sap.r3; 4.6C SR2</application> n&oacute;s 
	  for&ccedil;amos diretamente a instala&ccedil;&atilde;o do RPM do 
	  PAM, que tamb&eacute;m funcionou, causando a impress&atilde;o de 
	  que os pacotes dependentes n&atilde;o s&atilde;o necess&aacute;rios:</para>


<screen>&prompt.root; <userinput>rpm -i --ignoreos --nodeps --root /compat/linux --dbpath /var/lib/rpm \
pam-0.68-7.i386.rpm</userinput></screen>

	<para>Para o <application>&oracle; 8.0.5</application> executar o 
	  <foreignphrase>intelligent agent</foreignphrase>, n&oacute;s 
	  tamb&eacute;m tivemos que instalar o pacote Tcl RedHat  
	  <filename>tcl-8.0.5-30.i386.rpm</filename> (caso contr&aacute;rio 
	  o religamento durante a instala&ccedil;&atilde;o do 
	  <application>&oracle;</application> n&atilde;o funcionaria).  
	  Existem outras quest&otilde;es a respeito da religa&ccedil;&atilde;o 
	  do <application>&oracle;</application>, mas isso &eacute; uma 
	  quest&atilde;o do <application>&oracle;</application> para Linux, 
	  e n&atilde;o espec&iacute;fica do FreeBSD.</para>

      </sect3>

      <sect3 id="linuxprocandfallbackelfbrand">
	<title>Algumas Dicas Adicionais</title>

	<para>Tamb&eacute;m pode ser uma boa id&eacute;ia adicionar o 
	  <literal>linprocfs</literal> ao 
	  <filename>/etc/fstab</filename>, para mais informa&ccedil;&otilde;es 
	  veja a p&aacute;gina de manual &man.linprocfs.5;.  Outro par&acirc;metro 
	  a ser configurado &eacute; o <literal>kern.fallback_elf_brand=3</literal>
	  que &eacute; feito no arquivo <filename>/etc/sysctl.conf</filename>.</para>
      </sect3>
    </sect2>

    <sect2 id="creatingsapr3env">
      <title>Criando o Ambiente &sap.r3;</title>

      <sect3 id="filesystemsandmountpoints">
	<title>Criando os Sistemas de Arquivo e Pontos de Montagem Necess&aacute;rios</title>

	<para>Para uma instala&ccedil;&atilde;o simples, &eacute; suficiente 
	  criar os seguintes sistemas de arquivo:</para>

	<informaltable>
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Ponto de Montagem</entry>
		<entry>tamanho em GB</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry><filename>/compat/linux/oracle</filename></entry>
		<entry>45 GB</entry>
	      </row>

	      <row>
		<entry><filename>/compat/linux/sapmnt</filename></entry>
		<entry>2 GB</entry>
	      </row>

	      <row>
		<entry><filename>/compat/linux/usr/sap</filename></entry>
		<entry>2 GB</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Tamb&eacute;m &eacute; necess&aacute;rio criar algumas liga&ccedil;&otilde;es.  
	  Caso contr&aacute;rio o Instalador <application>&sap;</application> reclamar&aacute; 
	  ao verific&aacute;-las:</para>

	<screen>&prompt.root; <userinput>ln -s /compat/linux/oracle /oracle</userinput>
&prompt.root; <userinput>ln -s /compat/linux/sapmnt /sapmnt</userinput>
&prompt.root; <userinput>ln -s /compat/linux/usr/sap /usr/sap</userinput></screen>

	<para>Poss&iacute;veis erros durante a instala&ccedil;&atilde;o 
	  (aqui com o Sistema <emphasis>PRD</emphasis> e o 
	  <application>&sap.r3; 4.6C SR2</application>):</para>

	<screen>INFO 2002-03-19 16:45:36 R3LINKS_IND_IND SyLinkCreate:200
    Checking existence of symbolic link /usr/sap/PRD/SYS/exe/dbg to
    /sapmnt/PRD/exe. Creating if it does not exist...

WARNING 2002-03-19 16:45:36 R3LINKS_IND_IND SyLinkCreate:400
    Link /usr/sap/PRD/SYS/exe/dbg exists but it points to file
    /compat/linux/sapmnt/PRD/exe instead of /sapmnt/PRD/exe. The
    program cannot go on as long as this link exists at this
    location. Move the link to another location.

ERROR 2002-03-19 16:45:36 R3LINKS_IND_IND Ins_SetupLinks:0
    can not setup link '/usr/sap/PRD/SYS/exe/dbg' with content
    '/sapmnt/PRD/exe'</screen>
      </sect3>

      <sect3 id="creatingusersanddirectories">
	<title>Criando Usu&aacute;rios e Diret&oacute;rios</title>

	<para><application>&sap.r3;</application> precisa de dois 
	  usu&aacute;rios e tr&ecirc;s grupos.  O nome do usu&aacute;rio 
	  depende do ID de sistema (SID) do <application>&sap;</application>, 
	  que consistem em tr&ecirc;s letras.  Algumas destas SIDs s&atilde;o 
	  reservadas pelo <application>&sap;</application> (por  exemplo
	  <literal>SAP</literal> e <literal>NIX</literal>. Para uma lista 
	  completa por favor veja a documenta&ccedil;&atilde;o do 
	  <application>&sap;</application>).  Para a instala&ccedil;&atilde;o 
	  do IDES n&oacute;s usamos <literal>IDS</literal>, para a 
	  instala&ccedil;&atilde;o do 4.6C SR2 <literal>PRD</literal>, pois 
	  &eacute; inten&ccedil;&atilde;o fazer com que o sistema seja de 
	  produ&ccedil;&atilde;o.  Por esta raz&atilde;o criamos os 
	  seguintes grupos (IDs de grupo podem ser diferentes, estes s&atilde;o 
	  apenas os valores que usamos na nossa instala&ccedil;&atilde;o):</para>

        <informaltable>
          <tgroup cols="3">
          <thead>
          <row>
            <entry>ID do grupo</entry>
            <entry>nome do groupo</entry>
            <entry>descri&ccedil;&atilde;o</entry>
          </row>
          </thead>
          <tbody>
          <row>
            <entry>100</entry>
            <entry>dba</entry>
            <entry>Data Base Administrator</entry>
          </row>
          <row>
            <entry>101</entry>
            <entry>sapsys</entry>
            <entry>&sap; System</entry>
          </row>
          <row>
            <entry>102</entry>
            <entry>oper</entry>
            <entry>Data Base Operator</entry>
          </row>
          </tbody>
          </tgroup>
        </informaltable>

        <para>Para uma instala&ccedil;&atilde;o padr&atilde;o do 
	  <application>&oracle;</application> apenas o grupo 
          <groupname>dba</groupname> &eacute; usado.  Assim como o grupo 
          <groupname>oper</groupname> um tamb&eacute;m usa o grupo 
          <groupname>dba</groupname> (veja a documenta&ccedil;&atilde;o do 
	  <application>&oracle;</application> e do 
          <application>&sap;</application> para mais informa&ccedil;&otilde;es).</para>

        <para>Tamb&eacute;m precisamos dos seguintes usu&aacute;rios:</para>

        <informaltable>
          <tgroup cols="6">
          <thead>
          <row>
            <entry>ID do usu&aacute;rio</entry>
            <entry>nome do usu&aacute;rio</entry>
            <entry>nome gen&eacute;rico</entry>
            <entry>grupo</entry>
            <entry>grupos adicionais</entry>
            <entry>descri&ccedil;&atilde;o</entry>
          </row>
          </thead>
          <tbody>
          <row>
            <entry>1000</entry>
            <entry>idsadm/prdadm</entry>
            <entry><replaceable>sid</replaceable>adm</entry>
            <entry>sapsys</entry>
            <entry>oper</entry>
            <entry>&sap; Administrator</entry>
          </row>
          <row>
            <entry>1002</entry>
            <entry>oraids/oraprd</entry>
            <entry>ora<replaceable>sid</replaceable></entry>
            <entry>dba</entry>
            <entry>oper</entry>
            <entry>&oracle; Administrator</entry>
          </row>
          </tbody>
          </tgroup>
        </informaltable>

        <para>Adicionar os usu&aacute;rios com &man.adduser.8;
          requer as seguintes entradas (por favor note o <literal>shell</literal> 
	  e o diret&oacute;rio <literal>home</literal>) para o 
          <quote>&sap; Administrator</quote>:</para>

        <programlisting>Name: <replaceable>sid</replaceable>adm
Password: ******
Fullname: SAP Administrator <replaceable>SID</replaceable>
Uid: 1000
Gid: 101 (sapsys)
Class:
Groups: sapsys dba
HOME: /home/<replaceable>sid</replaceable>adm
Shell: bash  (/compat/linux/bin/bash)</programlisting>

        <para>e para o <quote>&oracle; Administrator</quote>:</para>

        <programlisting>Name: ora<replaceable>sid</replaceable> 
Password: ****** 
Fullname: Oracle Administrator <replaceable>SID</replaceable>
Uid: 1002 
Gid: 100 (dba) 
Class: 
Groups: dba 
HOME: /oracle/<replaceable>sid</replaceable> 
Shell: bash  (/compat/linux/bin/bash)</programlisting>

        <para>Isto tamb&eacute;m deve incluir o grupo 
          <groupname>oper</groupname> caso voc&ecirc; esteja 
          usando ambos os grupos <groupname>dba</groupname> e
          <groupname>oper</groupname>.</para>

      </sect3>

      <sect3 id="creatingdirectories">
        <title>Criando Diret&oacute;rios</title>

        <para>Estes diret&oacute;rios normalmente s&atilde;o criados 
	  como sistemas de arquivos distintos.  Isto depende completamente 
	  das suas necessidades.  N&oacute;s escolhemos cri&aacute;-los 
	  simplesmente como diret&oacute;rios, pois, de qualquer forma,
	  est&atilde;o todos localizados no mesmo RAID 5:</para>

        <para>Primeiro vamos configurar os propriet&aacute;rios e os 
	  direitos de alguns diret&oacute;rios (como usu&aacute;rio 
          <username>root</username>):</para>

        <screen>&prompt.root; <userinput>chmod 775 /oracle</userinput>
&prompt.root; <userinput>chmod 777 /sapmnt</userinput>
&prompt.root; <userinput>chown root:dba /oracle</userinput>
&prompt.root; <userinput>chown <replaceable>sid</replaceable>adm:sapsys /compat/linux/usr/sap</userinput>
&prompt.root; <userinput>chmod 775 /compat/linux/usr/sap</userinput></screen>

        <para>Segundo, vamos criar diret&oacute;rios como usu&aacute;rio 
	  <username>ora<replaceable>sid</replaceable></username>. Estes 
          ser&atilde;o subdiret&oacute;rios de 
	  <filename>/oracle/<replaceable>SID</replaceable></filename>:</para>

        <screen>&prompt.root; <userinput>su - ora<replaceable>sid</replaceable></userinput>
&prompt.root; <userinput>cd /oracle/<replaceable>SID</replaceable></userinput>
&prompt.root; <userinput>mkdir mirrlogA mirrlogB origlogA origlogB</userinput>
&prompt.root; <userinput>mkdir sapdata1 sapdata2 sapdata3 sapdata4 sapdata5 sapdata6</userinput>
&prompt.root; <userinput>mkdir saparch sapreorg</userinput>
&prompt.root; <userinput>exit</userinput></screen>

	<para>Para o <application>&oracle; 8.1.7</application> alguns 
	  diret&oacute;rios adicionais s&atilde;o necess&aacute;rios:</para>

	<screen>&prompt.root; <userinput>su - ora<replaceable>sid</replaceable></userinput>
&prompt.root; <userinput>cd /oracle</userinput>
&prompt.root; <userinput>mkdir 805_32</userinput>
&prompt.root; <userinput>mkdir client stage</userinput>
&prompt.root; <userinput>mkdir client/80x_32</userinput>
&prompt.root; <userinput>mkdir stage/817_32</userinput>
&prompt.root; <userinput>cd /oracle/<replaceable>SID</replaceable></userinput>
&prompt.root; <userinput>mkdir 817_32</userinput></screen>

	<note><para>O diret&oacute;rio <filename>client/80x_32</filename> &eacute; 
	  usado exatamente com este nome.  N&atilde;o substitua o <emphasis>x</emphasis>
	  com um n&uacute;mero ou qualquer outra coisa.</para></note>

        <para>No terceiro passo criaremos diret&oacute;rios como o usu&aacute;rio 
	  <username><replaceable>sid</replaceable>adm</username>:</para>

        <screen>&prompt.root; <userinput>su - <replaceable>sid</replaceable>adm</userinput>
&prompt.root; <userinput>cd /usr/sap</userinput>
&prompt.root; <userinput>mkdir <replaceable>SID</replaceable></userinput>
&prompt.root; <userinput>mkdir trans</userinput>
&prompt.root; <userinput>exit</userinput></screen>
      </sect3>

      <sect3 id="entriesinslashetcslashservices">
        <title>Entradas em <filename>/etc/services</filename></title>

        <para><application>&sap.r3;</application> requer algumas entradas no 
          <filename>/etc/services</filename>, que n&atilde;o ser&atilde;o 
	  configuradas corretamente na instala&ccedil;&atilde;o do FreeBSD.  
          Por favor adicione as seguintes entradas (voc&ecirc; precisa pelo 
	  menos das entradas correspondentes ao n&uacute;mero da instancia 
	  &mdash; neste caso, <literal>00</literal>.  Inserir todas as 
          entradas de <literal>00</literal> &agrave; 
          <literal>99</literal> para <literal>dp</literal>,
          <literal>gw</literal>, <literal>sp</literal> e
          <literal>ms</literal> n&atilde;o causar&aacute; problemas).  
	  Se voc&ecirc; for utilizar o <application>SAProuter</application>
	  ou precise acessar o <application>&sap;</application> OSS, 
	  voc&ecirc; tamb&eacute;m precisa do <literal>99</literal>,
	  uma vez que a porta 3299 &eacute; usada para o processo do 
	  <application>SAProuter</application> no sistema de destino:</para>

        <programlisting>
sapdp00    3200/tcp # SAP Dispatcher.      3200 + Instance-Number
sapgw00  3300/tcp # SAP Gateway.         3300 + Instance-Number
sapsp00  3400/tcp #                      3400 + Instance-Number
sapms00  3500/tcp #                      3500 + Instance-Number
sapms<replaceable>SID</replaceable> 3600/tcp # SAP Message Server.  3600 + Instance-Number
sapgw00s   4800/tcp # SAP Secure Gateway   4800 + Instance-Number</programlisting>
      </sect3>

      <sect3 id="necessarylocales">
        <title>Localiza&ccedil;&atilde;o Necess&aacute;ria</title>
	<indexterm><primary>locale</primary></indexterm>

        <para><application>&sap;</application> requer pelo menos dois 
	  locais que n&atilde;o s&atilde;o parte da instala&ccedil;&atilde;o 
	  padr&atilde;o do RedHat.  &sap; oferece os RPMs atrav&eacute;s de 
	  seu servidor de FTP (que somente &eacute; acess&iacute;vel 
	  se voc&ecirc; for um cliente com acesso OSS).  Veja a nota 
          0171356 para a lista de RPMs que voc&ecirc; precisa.</para>

        <para>Tamb&eacute;m &eacute; poss&iacute;vel criar as 
	  liga&ccedil;&otilde;es apropriadas (por exemplo de 
          <emphasis>de_DE</emphasis> e
          <emphasis>en_US</emphasis> ), mas n&oacute;s n&atilde;o 
	  recomendamos isto para um ambiente de produ&ccedil;&atilde;o 
	  (at&eacute; agora funcionou com o sistema IDES sem nenhum 
	  problema).  As seguintes localiza&ccedil;&otilde;es 
	  s&atilde;o necess&aacute;rias:</para>

        <programlisting>de_DE.ISO-8859-1
en_US.ISO-8859-1</programlisting>

	<para>Crie as liga&ccedil;&otilde;es como segue:</para>

	<screen>&prompt.root; <userinput>cd /compat/linux/usr/share/locale</userinput>
&prompt.root; <userinput>ln -s de_DE de_DE.ISO-8859-1</userinput>
&prompt.root; <userinput>ln -s en_US en_US.ISO-8859-1</userinput></screen>

        <para>Se elas n&atilde;o estiverem presentes, algums problemas 
	  ocorrer&atilde;o durante a instala&ccedil;&atilde;o.  Se forem ignorados 
          (configurando-se o <literal>STATUS</literal> dos passos problem&aacute;ticos 
          para <literal>OK</literal> no arquivo <filename>CENTRDB.R3S</filename>), 
	  ser&aacute; imposs&iacute;vel efetuar <foreignphrase>logon</foreignphrase> 
          no sistema <application>&sap;</application> sem um esfor&ccedil;o adicional.</para>
      </sect3>

      <sect3 id="kerneltuning">
        <title>Ajustes de Kernel</title>
	<indexterm><primary>kernel tuning</primary></indexterm>

        <para>Sistemas <application>&sap.r3;</application> precisam de muitos
	recursos.  Sendo assim, adicionamos os seguintes par&acirc;metros no 
	arquivos de configura&ccedil;&atilde;o do <foreignphrase>kernel</foreignphrase></para>

        <programlisting># Set these for memory pigs (SAP and Oracle):
options MAXDSIZ="(1024*1024*1024)"
options DFLDSIZ="(1024*1024*1024)"
# System V options needed.
options SYSVSHM #SYSV-style shared memory
options SHMMAXPGS=262144 #max amount of shared mem. pages
#options SHMMAXPGS=393216 #use this for the 46C inst.parameters
options SHMMNI=256 #max number of shared memory ident if.
options SHMSEG=100 #max shared mem.segs per process
options SYSVMSG #SYSV-style message queues 
options MSGSEG=32767 #max num. of mes.segments in system 
options MSGSSZ=32 #size of msg-seg. MUST be power of 2
options MSGMNB=65535 #max char. per message queue
options MSGTQL=2046 #max amount of msgs in system
options SYSVSEM #SYSV-style semaphores 
options SEMMNU=256 #number of semaphore UNDO structures
options SEMMNS=1024 #number of semaphores in system
options SEMMNI=520 #number of semaphore identifiers
options SEMUME=100       #number of UNDO keys</programlisting>

        <para>Os valores m&iacute;nimos s&atilde;o especificados na 
	  documenta&ccedil;&atilde;o que vem com o &sap;.  Como n&atilde;o 
	  exite descri&ccedil;&atilde;o para Linux, veja a se&ccedil;&atilde;o 
	  HP-UX (32-bit) para mais informa&ccedil;&otilde;es.  Como a 
	  instala&ccedil;&atilde;o do sistema 4.6C SR2 tem mais mem&oacute;ria, 
	  os segmentos compartilhados pode ser maiores tanto para o 
	  <application>&sap;</application> quanto para o 
	  <application>&oracle;</application>, por esta raz&atilde;o escolha 
	  um n&uacute;mero maior de p&aacute;ginas de mem&oacute;ria 
	  compartilhada.</para>

	<note><para>Com a instala&ccedil;&atilde;o padr&atilde;o do FreeBSD&nbsp;4.5 
	  em um &i386;, deixe <literal>MAXDSIZ</literal> e <literal>DFLDSIZ</literal> 
	  em 1&nbsp;GB no m&aacute;ximo.  Caso contr&aacute;rio, erros estranhos como 
	  <errorname>ORA-27102: out of memory</errorname> e 
          <errorname>Linux Error: 12: Cannot allocate memory</errorname>
          podem acontecer.</para></note>
      </sect3>
    </sect2>

    <sect2 id="installingsapr3">
      <title>Instalando o &sap.r3;</title>

      <sect3 id="preparingsapcdroms">
        <title>Preparando os CDROMs do &sap;</title>

        <para>Existem muitos CDROMs a serem montados e desmontados 
	  durante a instala&ccedil;&atilde;o.  Assumindo que voc&ecirc; 
	  possui drives de CDROM suficientes, voc&ecirc; pode montar 
	  todos.  N&oacute;s decidimos copiar o conte&uacute;do dos 
	  CDROMs para os diret&oacute;rios correspondentes:</para>

	<programlisting>/oracle/<replaceable>SID</replaceable>/sapreorg/<replaceable>cd-name</replaceable></programlisting>

        <para>onde <replaceable>cd-name</replaceable> foi um dos <filename>KERNEL</filename>, 
	  <filename>RDBMS</filename>, <filename>EXPORT1</filename>,
	  <filename>EXPORT2</filename>, <filename>EXPORT3</filename>,
	  <filename>EXPORT4</filename>, <filename>EXPORT5</filename> and 
	  <filename>EXPORT6</filename> para a instala&ccedil;&atilde;o do 4.6B/IDES, e
	  <filename>KERNEL</filename>, <filename>RDBMS</filename>,
	  <filename>DISK1</filename>, <filename>DISK2</filename>,
	  <filename>DISK3</filename>, <filename>DISK4</filename> e
	  <filename>LANG</filename> para a instala&ccedil;&atilde;o do 4.6C SR2. Todos 
	  os nomes de arquivos nos CDs montados devem estar em letras mai&uacute;sculas, 
	  caso contr&aacute;rio use a op&ccedil;&atilde;o <option>-g</option> para montar.  
	  Ent&atilde;o use os seguintes comandos:</para>

        <screen>&prompt.root; <userinput>mount_cd9660 -g /dev/cd0a /mnt</userinput>
&prompt.root; <userinput>cp -R /mnt/* /oracle/<replaceable>SID</replaceable>/sapreorg/<replaceable>cd-name</replaceable></userinput>
&prompt.root; <userinput>umount /mnt</userinput></screen>
      </sect3>

      <sect3 id="runningtheinstall-script">
        <title>Executando o Script de Instala&ccedil;&atilde;o</title>

	<para>Primeiro voc&ecirc; deve preparar um diret&oacute;rio <filename class="directory">install</filename>:</para>

	<screen>&prompt.root; <userinput>cd /oracle/<replaceable>SID</replaceable>/sapreorg</userinput>
&prompt.root; <userinput>mkdir install</userinput>
&prompt.root; <userinput>cd install</userinput></screen>

        <para>Ent&atilde;o quando o <literal>script</literal> for inicializado, 
	  o mesmo copiar&aacute; todos os arquivos relevantes para o diret&oacute;rio 
          <filename class="directory">install</filename>:</para>

	<screen>&prompt.root; <userinput>/oracle/<replaceable>SID</replaceable>/sapreorg/KERNEL/UNIX/INSTTOOL.SH</userinput></screen>

	<para>A instala&ccedil;&atilde;o IDES (4.6B) vem com um sistema &sap.r3; de 
	  demonstra&ccedil;&atilde;o completamente personalizado, ent&atilde;o existem 
	  seis ao inv&eacute;s de tr&ecirc;s CDs EXPORT.  Neste ponto o modelo  
	  <filename>CENTRDB.R3S</filename> &eacute; para insta&ccedil;a&ccedil;&atilde;o de 
	  de uma inst&acirc;ncia central padr&atilde;o (<application>&r3;</application> e 
	  base de dados), n&atilde;o a inst&acirc;ncia central IDES, sendo necess&aacute;rio 
	  cpoiar o <filename>CENTRDB.R3S</filename> correspondente do diret&oacute;rio 
	  <filename class="directory">EXPORT1</filename>, caso contr&aacute;rio o 
	  <command>R3SETUP</command> perguntar&aacute; apenas pelos tr&ecirc;s CDs 
	  EXPORT.</para>

	<para>A nova vers&atilde;o do <application>&sap; 4.6C SR2</application> 
	  vem com quatro CDs EXPORT.  O arquivo de par&acirc;metro que controla 
	  os passos de instala&ccedil;&atilde;o &eacute; o 
	  <filename>CENTRAL.R3S</filename>.  Ao contr&aacute;rio das vers&otilde;es 
	  anteriores n&atilde;o existem modelos de instala&ccedil;&atilde;o separados 
	  para uma inst&acirc;ncia central com ou sem base de dados.  O 
	  <application>&sap;</application> est&aacute; usando um modelo separado 
	  para a instala&ccedil;&atilde;o de base de dados.  Para reiniciar a 
	  instala&ccedil;&atilde;o posteriormente basta reiniciar com o 
	  arquivo original.</para>

	<para>Durante e depois da instala&ccedil;&atilde;o, o <application>&sap;</application> 
	  requer o <command>hostname</command> para retornar apenas o nome do 
	  computador, n&atilde;o o nome completo de dom&iacute;nio.  Ent&atilde;o 
	  configure o nome do computador de acordo, ou configure um apelido 
	  com <command>alias hostname='hostname -s'</command> para 
	  <username>ora<replaceable>sid</replaceable></username> e
	  <username><replaceable>sid</replaceable>adm</username> (e para 
	  <username>root</username> pelo menos durante os passos da 
	  instala&ccedil;&atilde;o feitos como <username>root</username>). 
	  Tamb&eacute;m &eacute; poss&iacute;vel ajustar os arquivos 
	  <filename>.profile</filename> e <filename>.login</filename> existentes 
	  de ambos os usu&aacute;rios durante a instala&ccedil;&atilde;o do 
	  <application>&sap;</application>.</para>
      </sect3>

      <sect3 id="startr3setup-46B">
        <title>Inicialize o <command>R3SETUP</command> 4.6B</title>

        <para>Certifique-se de que <envar>LD_LIBRARY_PATH</envar> est&aacute; configurada corretamente:</para>

        <screen>&prompt.root; <userinput>export LD_LIBRARY_PATH=/oracle/IDS/lib:/sapmnt/IDS/exe:/oracle/805_32/lib</userinput></screen>

        <para>Inicie o <command>R3SETUP</command> como <username>root</username> a 
	  partir do diret&oacute;rio de instala&ccedil;&atilde;o:</para>

        <screen>&prompt.root; <userinput>cd /oracle/IDS/sapreorg/install</userinput>
&prompt.root; <userinput>./R3SETUP -f CENTRDB.R3S</userinput></screen>

        <para>O <literal>script</literal> faz algumas perguntas (o padr&atilde;o 
	est&aacute; entre colchetes, seguido da entrada real):</para>

        <informaltable>
          <tgroup cols="3">
          <thead>
          <row>
            <entry>Quest&atilde;o</entry>
            <entry>Padr&atilde;o</entry>
            <entry>Entrada</entry>
          </row>
          </thead>
          <tbody>
          <row>
            <entry>Enter SAP System ID</entry>
            <entry>[C11]</entry>
            <entry>IDS<keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter SAP Instance Number</entry>
            <entry>[00]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter SAPMOUNT Directory</entry>
            <entry>[/sapmnt]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter name of SAP central host</entry>
            <entry>[troubadix.domain.de]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter name of SAP db host</entry>
            <entry>[troubadix]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Select character set</entry>
            <entry>[1] (WE8DEC)</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter Oracle server version (1) Oracle 8.0.5, (2) Oracle 8.0.6, (3) Oracle 8.1.5, (4) Oracle 8.1.6</entry>
            <entry> </entry>
            <entry>1<keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Extract Oracle Client archive</entry>
            <entry>[1] (Yes, extract)</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter path to KERNEL CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/KERNEL</entry>
          </row>
          <row>
            <entry>Enter path to RDBMS CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/RDBMS</entry>
          </row>
          <row>
            <entry>Enter path to EXPORT1 CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/EXPORT1</entry>
          </row>
          <row>
            <entry>Directory to copy EXPORT1 CD</entry>
            <entry>[/oracle/IDS/sapreorg/CD4_DIR]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter path to EXPORT2 CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/EXPORT2</entry>
          </row>
          <row>
            <entry>Directory to copy EXPORT2 CD</entry>
            <entry>[/oracle/IDS/sapreorg/CD5_DIR]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter path to EXPORT3 CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/EXPORT3</entry>
          </row>
          <row>
            <entry>Directory to copy EXPORT3 CD</entry>
            <entry>[/oracle/IDS/sapreorg/CD6_DIR]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter path to EXPORT4 CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/EXPORT4</entry>
          </row>
          <row>
            <entry>Directory to copy EXPORT4 CD</entry>
            <entry>[/oracle/IDS/sapreorg/CD7_DIR]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter path to EXPORT5 CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/EXPORT5</entry>
          </row>
          <row>
            <entry>Directory to copy EXPORT5 CD</entry>
            <entry>[/oracle/IDS/sapreorg/CD8_DIR]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter path to EXPORT6 CD</entry>
            <entry>[/sapcd]</entry>
            <entry>/oracle/IDS/sapreorg/EXPORT6</entry>
          </row>
          <row>
            <entry>Directory to copy EXPORT6 CD</entry>
            <entry>[/oracle/IDS/sapreorg/CD9_DIR]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter amount of RAM for SAP + DB</entry>
            <entry> </entry>
            <entry>850<keycap>Enter</keycap> (in Megabytes)</entry>
          </row>
          <row>
            <entry>Service Entry Message Server</entry>
            <entry>[3600]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter Group-ID of sapsys</entry>
            <entry>[101]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter Group-ID of oper</entry>
            <entry>[102]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter Group-ID of dba</entry>
            <entry>[100]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter User-ID of <replaceable>sid</replaceable>adm</entry>
            <entry>[1000]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter User-ID of ora<replaceable>sid</replaceable></entry>
            <entry>[1002]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Number of parallel procs</entry>
            <entry>[2]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          </tbody>
          </tgroup>
        </informaltable>
      
        <para>Se voc&ecirc; n&atilde;o copiou os CDs para locais diferentes, 
          ent&atilde;o o instalador do <application>&sap;</application> n&atilde;o 
	  pode encontrar o CD (identificado pelo arquivo 
          <filename>LABEL.ASC</filename> no CD) e pode ent&atilde;o 
	  solicitar que voc&ecirc; insira e monte o CD e confirme ou que 
	  entre um caminho de montagem.</para>
   
        <para><filename>CENTRDB.R3S</filename> pode n&atilde;o estar 
	  livre de erros.  Em nosso caso, solicitoi o CD EXPORT4 
	  novamente, mas indicou a chave correta (6_LOCATION, ent&atilde;o 
	  7_LOCATION, etc.), assim um pode continuar quando entramos 
	  com os valores corretos.</para>

        <para>Fora alguns problemas mencionados abaixo, tudo deve correr 
	  bem at&eacute; o ponto onde a base de dados &oracle; precisa 
	  ser instalada.</para>
      </sect3>

      <sect3 id="startr3setup-46C">
	<title>Inicialize o <command>R3SETUP</command> 4.6C SR2</title>

	<para>Certifique-se de que <envar>LD_LIBRARY_PATH</envar> est&aacute; 
	  configurada corretamente.  Este &eacute; um valor diferente da 
	  da instala&ccedil;&atilde;o 4.6B com o 
	  <application>&oracle; 8.0.5</application>:</para>

	<screen>&prompt.root; <userinput>export LD_LIBRARY_PATH=/sapmnt/PRD/exe:/oracle/PRD/817_32/lib</userinput></screen>

	<para>Inicie o <command>R3SETUP</command> como <username>root</username> 
	  partir do diret&oacute;rio de instala&ccedil;&atilde;o:</para>

	<screen>&prompt.root; <userinput>cd /oracle/PRD/sapreorg/install</userinput>
&prompt.root; <userinput>./R3SETUP -f CENTRAL.R3S</userinput></screen>

	<para>O <literal>script</literal> faz algumas quest&otilde;es (o 
	  padr&atilde;o est&aacute; entre colchetes, seguido da entrada real):</para>

	<informaltable>
	  <tgroup cols="3">
	  <thead>
	  <row>
	    <entry>Quest&atilde;o</entry>
	    <entry>Padr&atilde;o</entry>
	    <entry>Entrada</entry>
	  </row>
	  </thead>
	  <tbody>
	  <row>
	    <entry>Enter SAP System ID</entry>
	    <entry>[C11]</entry>
	    <entry>PRD<keycap>Enter</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter SAP Instance Number</entry>
	    <entry>[00]</entry>
	    <entry><keycap>Enter</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter SAPMOUNT Directory</entry>
	    <entry>[/sapmnt]</entry>
	    <entry><keycap>Enter</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter name of SAP central host</entry>
	    <entry>[majestix]</entry>
	    <entry><keycap>Enter</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter Database System ID</entry>
	    <entry>[PRD]</entry>
	    <entry>PRD<keycap>Enter</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter name of SAP db host</entry>
	    <entry>[majestix]</entry>
	    <entry><keycap>Enter</keycap></entry>
	  </row>
	  <row>
	    <entry>Select character set</entry>
	    <entry>[1] (WE8DEC)</entry>
	    <entry><keycap>Enter</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter Oracle server version (2) Oracle 8.1.7</entry>
	    <entry> </entry>
	    <entry>2<keycap>Enter</keycap></entry>
	  </row>
	  <row>
	    <entry>Extract Oracle Client archive</entry>
	    <entry>[1] (Yes, extract)</entry>
	    <entry><keycap>Enter</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter path to KERNEL CD</entry>
	    <entry>[/sapcd]</entry>
	    <entry>/oracle/PRD/sapreorg/KERNEL</entry>
	  </row>
	  <row>
	    <entry>Enter amount of RAM for SAP + DB</entry>
	    <entry>2044</entry>
	    <entry>1800<keycap>Enter</keycap> (in Megabytes)</entry>
	  </row>
	  <row>
	    <entry>Service Entry Message Server</entry>
	    <entry>[3600]</entry>
	    <entry><keycap>Enter</keycap></entry>
	  </row>
	  <row>
	    <entry>Enter Group-ID of sapsys</entry>
	    <entry>[100]</entry>
	    <entry><keycap>Enter</keycap></entry>
	  </row>
	  <row>
            <entry>Enter Group-ID of oper</entry>
            <entry>[101]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter Group-ID of dba</entry>
            <entry>[102]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter User-ID of <username>oraprd</username></entry>
            <entry>[1002]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter User-ID of <username>prdadm</username></entry>
            <entry>[1000]</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>LDAP support</entry>
            <entry> </entry>
            <entry>3<keycap>Enter</keycap> (no support)</entry>
          </row>
          <row>
            <entry>Installation step completed</entry>
            <entry>[1] (continue)</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Choose installation service</entry>
            <entry>[1] (DB inst,file)</entry>
            <entry><keycap>Enter</keycap></entry>
          </row>
          </tbody>
          </tgroup>
        </informaltable>
      
        <para>At&eacute; agora, a cria&ccedil;&atilde;o de 
	  usu&aacute;rios d&aacute; um erro durante a instala&ccedil;&atilde;o 
	  em OSUSERDBSID_IND_ORA (para criar o usu&aacute;rio 
	  <username>ora<replaceable>sid</replaceable></username>) e
	  OSUSERSIDADM_IND_ORA (para criar o usu&aacute;rio 
	  <username><replaceable>sid</replaceable>adm</username>).</para>
   
        <para>Fora alguns problemas mencionados abaixo, tudo deve correr 
	  bem at&eacute; o ponto onde a base de dados &oracle; 
	  precisa ser instalada.</para>
      </sect3>
    </sect2>

    <sect2 id="installingoracle805">
      <title>Instalando o &oracle; 8.0.5</title>

      <para>Por favor veja as notas correspondentes ao &sap; e ao &oracle; 
	nos arquivos <filename>Readme</filename>a respeito do Linux e do 
        banco de dados <application>&oracle;</application> para poss&iacute;veis 
	problemas.  A maioria dos problemas prov&eacute;m de bibliotecas 
	incompat&iacute;veis.</para>

      <para>Para mais informa&ccedil;&ccedil;&otilde;es sobre a 
	  instala&ccedil;&atilde;o do <application>&oracle;</application>, 
	  veja o cap&iacute;tulo <link linkend="linuxemu-oracle">Instalando o &oracle;.
	  </link></para>


      <sect3 id="installingtheoracle805withorainst">
        <title>Instalando o &oracle; 8.0.5 com o <command>orainst</command></title>

        <para>Se o <application>&oracle; 8.0.5</application> for usado, 
          algumas bibliotecas adicionais ser&atilde;o necess&aacute;rias 
          para uma religa&ccedil;&atilde;o bem sucedida, pois o 
	  <application>&oracle; 8.0.5</application> foi ligado com uma 
	  <literal>glibc</literal> antiga (RedHat 6.0), mas o RedHat 6.1 
	  j&aacute; utiliza uma nova <literal>glibc</literal>.  Ent&atilde;o 
	  voc&ecirc; tem que instalar os seguintes pacotes adicionais para 
	  ter certeza que a liga&ccedil;&atilde;o vai funcionar:</para>

        <para><filename>compat-libs-5.2-2.i386.rpm</filename></para>
        <para><filename>compat-glibc-5.2-2.0.7.2.i386.rpm</filename></para>
        <para><filename>compat-egcs-5.2-1.0.3a.1.i386.rpm</filename></para>
        <para><filename>compat-egcs-c++-5.2-1.0.3a.1.i386.rpm</filename></para>
        <para><filename>compat-binutils-5.2-2.9.1.0.23.1.i386.rpm</filename></para>

        <para>Veja as notas correspondentes ao &sap; e ao &oracle; 
	  nos arquivos <filename>Readme</filename> para mais informa&ccedil;&otilde;es.  
	  Se isto n&atilde;o &eacute; uma op&ccedil;&atilde;o (no momento da 
	  instala&ccedil;&atilde;o n&atilde;o tivemos tempo de verificar isso), 
	  um pode usar os bin&aacute;rios originais, ou usar os bin&aacute;rios 
	  religados originalmente no sistema RedHat.</para>

        <para>Para compilar o <foreignphrase>intelligent agent</foreignphrase>, 
	  o pacote Tcl do RedHat deve estar instalado.  Se voc&ecirc; 
          n&atilde;o puder pegar o 
          <filename>tcl-8.0.3-20.i386.rpm</filename>, um mais novo como 
          o <filename>tcl-8.0.5-30.i386.rpm</filename> para RedHat 6.1
          deve ser suficiente.</para>

        <para>Fora a religa&ccedil;&atilde;o, a instala&ccedil;&atilde;o 
          &eacute; direta:</para>

        <screen>&prompt.root; <userinput>su - oraids</userinput>
&prompt.root; <userinput>export TERM=xterm</userinput>
&prompt.root; <userinput>export ORACLE_TERM=xterm</userinput>
&prompt.root; <userinput>export ORACLE_HOME=/oracle/IDS</userinput>
&prompt.root; <userinput>cd /ORACLE_HOME/orainst_sap</userinput>
&prompt.root; <userinput>./orainst</userinput></screen>

        <para>Confirme todas as telas com <keycap>Enter</keycap> at&eacute; 
	  que o programa seja instalado, exceto a que tem a op&ccedil;&atilde;o 
          para deselecionar o <emphasis>&oracle; On-Line Text Viewer</emphasis>, 
          pois n&atilde;o est&aacute; dispon&iacute;vel para Linux, ent&atilde;o 
	  o <application>&oracle;</application> religa com o 
          <command>i386-glibc20-linux-gcc</command> ao inv&eacute;s 
          do <command>gcc</command> dispon&iacute;vel,
          <command>egcs</command> ou <command>i386-redhat-linux-gcc
          </command>.</para>

        <para>Devido a restri&ccedil;&otilde;es de tempo decidimos usar 
          bin&aacute;rios de uma vers&atilde;o do <application>&oracle; 
	  8.0.5 PreProduction</application>, depois da primeira tentativa 
	  frustada de tentar fazer funcionar a vers&atilde;o do RDBMS do CD, 
	  procurar e acessar os RPMs corretos naquela ocasi&atilde;o foi 
	  um pesadelo.</para>

      </sect3>

      <sect3 id="installingtheoracle805preproduction">
        <title>Instalando o &oracle; 8.0.5 Pre-production Release para 
          Linux (Kernel 2.0.33)</title>

        <para>Esta instala&ccedil;&atilde;o &eacute; bem f&aacute;cil.  Monte 
	  o CD, inicie o instalador.  Ent&atilde;o ele perguntar&aacute; pelo 
	  local do diret&oacute;rio <literal>home</literal> do &oracle;, 
	  e copiar&aacute; todos os bin&aacute;rios para l&aacute;.  
	  N&oacute;s n&atilde;o apagamos os resqu&iacute;cios das nossas 
	  tentativas anteriores de instalar o RDBMS.</para>

        <para>Depois disso, o Banco de Dados <application>&oracle;</application> 
	  pode ser instalado sem problemas.</para>
      </sect3>
    </sect2>

    <sect2 id="installingoracle817">
      <title>Instalando o Tarball Linux do &oracle; 8.1.7</title>
      <para>Pegue o <foreignphrase>tarball</foreignphrase> 
	<filename>oracle81732.tgz</filename> que voc&ecirc; 
	produziu no diret&oacute;rio de instala&ccedil;&atilde;o do 
	sistema Linux e descompacte-o em <filename>/oracle/<replaceable>SID</replaceable>/817_32/</filename>.</para>
    </sect2>

    <sect2 id="continuewithsapr4installation">
      <title>Continue com a Instala&ccedil;&atilde;o do &sap.r3;</title>

      <para>Primeiro verifique as configura&ccedil;&otilde;es de ambiente 
	dos usu&aacute;rios <username>idsamd</username>
        (<replaceable>sid</replaceable>adm) e 
	<username>oraids</username> (ora<replaceable>sid</replaceable>). Ambos 
        devem possuir os arquvos <filename>.profile</filename>,
        <filename>.login</filename> e <filename>.cshrc</filename>
        que estar&atilde;o usando o <command>hostname</command>. No caso 
	em que o nome da m&aacute;quina seja o nome completo qualificado do 
        dom&iacute;nio, voc&ecirc; deve mudar <command>hostname</command> para <command>hostname
        -s</command> nos tr&ecirc;s arquivos.</para>

      <sect3 id="databaseload">
        <title>Carga da Base de Dados</title>

        <para>Mais tarde, o <command>R3SETUP</command> pode ser reinicializado ou 
	  continuar com sua execu&ccedil;&atilde;o (dependendo da escolha de sair ou 
          n&atilde;o).  O  <command>R3SETUP</command> ent&atilde;o cria os 
	  <foreignphrase>tablespaces</foreignphrase> e carrega os dados (para o 
	  46B IDES, do EXPORT1 ao EXPORT6, para o 46C do DISK1 ao DISK4) com 
	  <command>R3load</command> no banco de dados.</para>

        <para>Quando a carga da base de dados terminar (pode levar 
	  algumas horas), algumas senhas ser&atilde;o requisitadas.  
	  Para instala&ccedil;&otilde;es de teste, pode-se usar 
	  senhas padr&atilde;o conhecidas (use senhas diferentes se 
	  a seguran&ccedil;a for uma preocupa&ccedil;&atilde;o para 
	  voc&ecirc;!):</para>

        <informaltable>
          <tgroup cols="2">
          <thead>
          <row>
            <entry>Quest&atilde;o</entry>
            <entry>Entrada</entry>
          </row>
          </thead>
          <tbody>
          <row>
            <entry>Enter Password for sapr3</entry>
            <entry>sap<keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Confirum Password for sapr3</entry>
            <entry>sap<keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter Password for sys</entry>
            <entry>change_on_install<keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Confirm Password for sys</entry>
            <entry>change_on_install<keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Enter Password for system</entry>
            <entry>manager<keycap>Enter</keycap></entry>
          </row>
          <row>
            <entry>Confirm Password for system</entry>
            <entry>manager<keycap>Enter</keycap></entry>
          </row>
          </tbody>
          </tgroup>
        </informaltable>

        <para>Neste ponto tivemos alguns problemas com o 
	  <command>dipgntab</command> durante a 
	  instala&ccedil;&atilde;o do 4.6B.</para>
      </sect3>

      <sect3 id="listener">
        <title>Listener</title>

        <para>Inicie o <literal>Listener</literal> do <application>&oracle;</application>  
	  como usu&aacute;rio <username>ora<replaceable>sid</replaceable></username> como
	  segue:</para>

        <screen>&prompt.user; <userinput>umask 0; lsnrctl start</userinput></screen>

        <para>Caso contr&aacute;rio voc&ecirc; pode ter o erro <errorcode>ORA-12546</errorcode>, 
	pois os <literal>sockets</literal> n&atilde;o possuir&atilde;o as permiss&otilde;es 
	corretas.  Veja a nota &sap; 072984.</para>
      </sect3>

      <sect3 id="mnlstables">
	<title>Atualizando as Tabelas MNLS</title>
	<para>Se voc&ecirc; planeja importar linguagens que n&atilde;o sejam Latin-1 
	  para o sistema <application>&sap;</application>, voc&Ccedil;e tem que 
	  atualizar as tabelas de Suporte a L&iacute;nguas Multi Nacionais.  Isto 
	  est&aacute; descrito nas notas OSS 15023 e 45619 do &sap;, caso 
	  contr&aacute;rio, voc&ecirc; pode pular esta quest&atilde;o durante a 
	  instala&ccedil;&atilde;o do <application>&sap;</application>.</para>
	<note><para>Se voc&ecirc; n&atilde;o precisa do MNLS, ainda &eacute; 
	  necess&aacute;rio verificar a tabela TCPDB e inici&aacute;-la se isso 
	  n&atilde;o foi feito.  Veja as notas 0015023 e 0045619 do &sap; para 
	  mais informa&ccedil;&otilde;es.</para></note>
      </sect3>
    </sect2>

    <sect2 id="postinstallationsteps">
      <title>Passos P&oacute;s-Instala&ccedil;&atilde;o</title>

      <sect3 id="requestsapr3licensekey">
        <title>Solicite a Chave de Licen&ccedil;a do &sap.r3;</title>

        <para>Voc&ecirc; precisa solicitar sua Chave de Licen&ccedil;a do 
	  <application>&sap.r3;</application>.  Isto &eacute; necess&aacute;rio, 
	  pois a licen&ccedil;a tempor&aacute;ria que foi usada durante a 
	  instala&ccedil;&atilde;o &eacute; v&aacute;lida apenas por quatro 
	  semanas.  Primeiro obtenha a licen&ccedil;a de hardware.  Entre como 
	  o usu&aacute;rio <username>idsadm</username> e execute o 
	  <command>saplicense</command>:</para>

        <screen>&prompt.root; <userinput>/sapmnt/IDS/exe/saplicense -get</userinput></screen>

	<para>Executando o <command>saplicense</command> sem par&acirc;metros obtemos 
	  uma lista de op&ccedil;&otilde;es.  Recebendo a chave de licen&ccedil;a, 
	  pode-se instal&aacute;-la usando:</para>

        <screen>&prompt.root; <userinput>/sapmnt/IDS/exe/saplicense -install</userinput></screen>

        <para>Ent&atilde;o voc&Ccedil;e &eacute; solicitado a entrar com os 
	  seguintes valores:</para>

        <programlisting>SAP SYSTEM ID   = <replaceable>SID, 3 chars</replaceable>
CUSTOMER KEY    = <replaceable>hardware key, 11 chars</replaceable>
INSTALLATION NO = <replaceable>installation, 10 digits</replaceable>
EXPIRATION DATE = <replaceable>yyyymmdd, usually "99991231"</replaceable>
LICENSE KEY     = <replaceable>license key, 24 chars</replaceable></programlisting>
      </sect3>

      <sect3 id="creatingusers">
        <title>Criando Usu&aacute;rios</title>

        <para>Crie um usu&aacute;rio dentro do cliente 000 (algumas 
	tarefas s&atilde;o feitas com o cliente 000, mas com um 
        usu&aacute;rio diferente do <username>sap*</username> e
        <username>ddic</username>). Como um nome de usu&aacute;rio, 
        normalmente escolhemos <username>wartung</username> (ou
        <username>service</username> em Ingl&ecirc;s).  Os perfis 
        requeridos s&atilde;o <literal>sap_new</literal> e
        <literal>sap_all</literal>. Para seguran&ccedil;a adiciona&ccedil; 
	a senha dos usu&aacute;rios padr&atilde;o dentro de todos os 
        devem ser modificadas (isto inclui os usu&aacute;rios 
	<username>sap*</username> e
        <username>ddic</username>).</para>
      </sect3>

      <sect3 id="configtranssysprofileopermodesetc">
        <title>Configure o Sistema de Transporte, Perfil, Modos de Opera&ccedil;&atilde;o, Etc.</title>

       <para>Dentro do cliente 000, com usu&aacute;rio diferente de 
	  <username>ddic</username> e <username>sap*</username>, 
	  fa&ccedil;a pelo menos o seguinte:</para>

        <informaltable>
          <tgroup cols="2">
          <thead>
          <row>
            <entry>Tarefa</entry>
            <entry>Transa&ccedil;&atilde;o</entry>
          </row>
          </thead>
          <tbody>
          <row>
            <entry>Configure Transport System, e.g. as <emphasis>Stand-Alone
            Transport Domain Entity</emphasis></entry>
	    <entry>STMS</entry>
          </row>
          <row>
            <entry>Create / Edit Profile for System</entry>
            <entry>RZ10</entry>
          </row>
          <row>
            <entry>Maintain Operation Modes and Instances</entry>
            <entry>RZ04</entry>
          </row>
          </tbody>
          </tgroup>
        </informaltable>

        <para>Este e todos os passos p&oacute;s-instala&ccedil;&atilde;o s&atilde;o 
          amplamente descritos nos guias de instala&ccedil;&atilde;o do <application>&sap;</application>.</para>
      </sect3>

      <sect3 id="editintsidsap">
        <title>Edite o <filename>init<replaceable>sid</replaceable>.sap</filename> (<filename>initIDS.sap</filename>)</title>

	<para>O arquivo <filename>/oracle/IDS/dbs/initIDS.sap</filename>
	  cont&eacute;m a &oacute;pia de seguran&ccedil;a do perfil do 
	  <application>&sap;</application>.  Aqui o tamanho da fita a ser 
	  usada, tipo de compress&atilde;o e o que mais precisa ser definido.  
          Para ter isto rodando com o <command>sapdba</command> /
	  <command>brbackup</command>, n&oacute;s mudamos os seguintes valores:</para>

        <programlisting>compress = hardware
archive_function = copy_delete_save
cpio_flags = "-ov --format=newc --block-size=128 --quiet"
cpio_in_flags = "-iuv --block-size=128 --quiet"
tape_size = 38000M
tape_address = /dev/nsa0
tape_address_rew = /dev/sa0</programlisting>

        <para>Explica&ccedil;&otilde;es:</para>

        <para><varname>compress</varname>: A unidade de fita que usamos 
	foi uma HP DLT1, que faz compress&atilde;o por hardware.</para>

        <para><varname>archive_function</varname>: Isto define o 
	comportamento padr&atilde;o do &oracle; para a grava&ccedil;&atilde;o 
	de logs: novos arquivos de log s&atilde;o gravados na fita, arquivos 
	de log anteriormente gravados s&atilde;o novamente gravados e depois 
	apagados.  Isto previne muitos problemas se voc&ecirc; precisa 
	recuperar a base de dados e uma das fitas deu problema.</para>

        <para><varname>cpio_flags</varname>: O padr&atilde;o &eacute; 
	usar a op&ccedil;&atilde;o <option>-B</option> que configura 
        o tamanho dos blocos para 5120&nbsp;Bytes.  Para fitas DLT, a 
        HP recomenda pelo menos 32&nbsp;K de tamanho de blocos, ent&atilde;o 
	usamos a op&ccedil;&atilde;o <option>--block-size=128</option> para 
        64&nbsp;K. <option>--format=newc</option> &eacute; necess&aacute;rio 
	pois temos n&uacute;meros de inodo maiores que 65535.  A &uacute;ltima 
        op&ccedil;&atilde;o <option>--quiet</option> e necess&aacute;rio, 
	caso contr&aacute;rio o <command>brbackup</command>
        reclamar&aacute; assim que o <command>cpio</command> retorne o 
	n&uacute;mero de blocos gravados.</para>

        <para><varname>cpio_in_flags</varname>: Par&acirc;metros 
	necess&aacute;rios para carregar os dados de volta para a 
	fita.  O formato &eacute; reconhecido automaticamente.</para>

        <para><varname>tape_size</varname>: Isto normalmente oferece 
	a capacidade nativa de armazenamento da fita.  Por raz&otilde;es 
	de seguran&ccedil;a (n&oacute;s usamos compress&atilde;o por 
	hardware), o valor &eacute; discretamente menor do que o 
	valor atual.</para>

        <para><varname>tape_address</varname>: O dispositivo n&atilde;o-
	rebobin&aacute;vel a ser usado com o <command>cpio</command>.</para>

        <para><varname>tape_address_rew</varname>: O dispositivo 
	rebobin&aacute;vel a ser usado com o <command>cpio</command>.</para>
      </sect3>

      <sect3>
	<title>Quest&otilde;es de Configura&ccedil;&atilde;o ap&oacute;s a Instala&ccedil;&atilde;o</title>

	<para>Os seguintes par&acirc;metros do <application>&sap;</application> devem ser 
	  ligados depois da instala&ccedil;&atilde;o (exemplos para o IDES 46B, 1&nbsp;GB memory):</para>

	<informaltable frame="none">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Nome</entry>
		<entry>Valor</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry>ztta/roll_extension</entry>
		<entry>250000000</entry>
	      </row>
	      <row>
		<entry>abap/heap_area_dia</entry>
                <entry>300000000</entry>
	      </row>
	      <row>
		<entry>abap/heap_area_nondia</entry>
		<entry>400000000</entry>
	      </row>
	      <row>
		<entry>em/initial_size_MB</entry>
		<entry>256</entry>
	      </row>
	      <row>
		<entry>em/blocksize_kB</entry>
		<entry>1024</entry>
	      </row>
	      <row>
		<entry>ipc/shm_psize_40</entry>
		<entry>70000000</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Nota &sap; 0013026:</para>

	<informaltable frame="none">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Nome</entry>
		<entry>Valor</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry>ztta/dynpro_area</entry>
		<entry>2500000</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<para>Nota &sap; 0157246:</para>

	<informaltable frame="none">
	  <tgroup cols="2">
	    <thead>
	      <row>
		<entry>Nome</entry>
		<entry>Valor</entry>
	      </row>
	    </thead>
	    <tbody>
	      <row>
		<entry>rdisp/ROLL_MAXFS</entry>
		<entry>16000</entry>
	      </row>
	      <row>
		<entry>rdisp/PG_MAXFS</entry>
		<entry>30000</entry>
	      </row>
	    </tbody>
	  </tgroup>
	</informaltable>

	<note>
	  <para>Com os par&acirc;metros acima, em um sistema com 
	    1&nbsp;gigabyte de mem&oacute;ria, pode-se encontrar um 
	    consumo de mem&oacute;ria similar a:</para>

	  <programlisting>Mem: 547M Active, 305M Inact, 109M Wired, 40M Cache, 112M Buf, 3492K Free</programlisting>
	</note>
      </sect3>
    </sect2>

    <sect2 id="problemsduringinstallation">
      <title>Problemas durante a Instala&ccedil;&atilde;o</title>

      <sect3 id="restartr3setup">
	<title>Reincialize o <command>R3SETUP</command> ap&oacute;s Resolver um Problema</title>

	<para><command>R3SETUP</command> para se encontrar um erro.  Se voc&ecirc; 
	  olhou os arquivos de log correspondentes e consertou o erro, voc&ecirc; 
	  tem que inicializar o <command>R3SETUP</command> novamente, normalmente 
	  selecionando REPEAT como uma op&ccedil;&atilde;o para o &uacute;ltimo 
	  passo que o <command>R3SETUP</command> reclamou.</para>

	<para>Para reinicializar o <command>R3SETUP</command>, apenas inicie com o 
	  arquivo <filename>R3S</filename> correspondente:</para>

	  <screen>&prompt.root; <userinput>./R3SETUP -f CENTRDB.R3S</userinput></screen>

	  <para>para o 4.6B, ou com</para>

	  <screen>&prompt.root; <userinput>./R3SETUP -f CENTRAL.R3S</userinput></screen>

	  <para>para o 4.6C, n&atilde;o importando o erro que tenha ocorrido 
	  com o <filename>CENTRAL.R3S</filename> ou
	  <filename>DATABASE.R3S</filename>.</para>

	<note><para>Em alguns est&aacute;gios, o <command>R3SETUP</command> assume que 
	    ambos os processos do banco de dados e do <application>&sap;</application> 
	    est&atilde;o no ar e sendo executados (uma vez que aqueles passos foram 
	    completados).  Erros podem ocorrer e, por exemplo, o banco de dados n&atilde;o 
	    pode ser incializado, voc&ecirc; tem que inicializar ambos na m&atilde;o 
	    ap&oacute;s ter consertado os erros e antes de iniciar o 
	    <command>R3SETUP</command> novamente.</para>
	  <para>N&atilde;o esque&ccedil;a tamb&eacute;m de iniciar o <literal>
	    listener</literal> do <application>&oracle;</application> novamente (como 
	    <username>ora<replaceable>sid</replaceable></username> com 
	    <command>umask 0; lsnrctl start</command>) se ele tamb&eacute;m foi parado 
	    (por exemplo, devido &agrave; uma reinicializa&ccedil;&atilde;o 
	    necess&aacute;ria do sistema).</para>
	</note>
      </sect3>

      <sect3 id="indoraduringduringr3setup">
        <title>OSUSERSIDADM_IND_ORA durante o <command>R3SETUP</command></title>

        <para>Se o <command>R3SETUP</command> reclamar neste est&aacute;gio, 
	  edite o arquivo modelo <command>R3SETUP</command> usado em 
          (<filename>CENTRDB.R3S</filename> (4.6B) ou 
	  <filename>CENTRAL.R3S</filename> ou
	  <filename>DATABASE.R3S</filename> (4.6C)).
	  Localize <literal>[OSUSERSIDADM_IND_ORA]</literal> ou procure  
	  apenas a entrada <literal>STATUS=ERROR</literal> 
	  e edite os seguintes valores:</para>

        <programlisting>HOME=/home/<replaceable>sid</replaceable>adm (was empty)
STATUS=OK (had status ERROR)
        </programlisting>

        <para>Ent&atilde;o voc&ccedil;e pode reiniciar o <command>R3SETUP</command> novamente.</para>
      </sect3>

      <sect3 id="indoraduringr3setup">
        <title>OSUSERDBSID_IND_ORA durante o <command>R3SETUP</command></title>

        <para>Possivelmente o <command>R3SETUP</command> tamb&eacute;m reclame 
	  neste est&aacute;gio.  O erro aqui &eacute; similar ao 
	  OSUSERSIDADM_IND_ORA.  Apenas edite o arquivo modelo  
	  <command>R3SETUP</command> usado em 
          (<filename>CENTRDB.R3S</filename> (4.6B) ou 
	  <filename>CENTRAL.R3S</filename> ou
	  <filename>DATABASE.R3S</filename> (4.6C)).
	  Localize <literal>[OSUSERDBSID_IND_ORA]</literal> ou procure 
	  apenas a entrada <literal>STATUS=ERROR</literal> 
	  e edite os seguintes valores naquela se&ccedil;&atilde;o:</para>

        <programlisting>STATUS=OK</programlisting>

        <para>Ent&atilde;o reinicie o <command>R3SETUP</command>.</para>
      </sect3>

      <sect3 id="oraviewvrffilenotfound">
        <title><errorname>oraview.vrf FILE NOT FOUND</errorname> durante a Instala&ccedil;&atilde;o do &oracle;</title>

        <para>Voc&ecirc; n&atilde;o removeu a sele&ccedil;&atilde;o <emphasis>&oracle; On-Line Text Viewer</emphasis>
          antes de iniciar a instala&ccedil;&atilde;o.  Isto &eacute; marcado pela 
	  instala&ccedil;&atilde;o mesmo que n&atilde;o esteja dispon&iacute;vel 
	  para Linux.  Desmarque esta op&ccedil;&atilde;o dentro do menu de instala&ccedil;&atilde;o 
          do <application>&oracle;</application> e reinicie a instala&ccedil;&atilde;o.</para>
      </sect3>

      <sect3 id="textenvincalid">
        <title><errorname>TEXTENV_INVALID</errorname> durante o <command>R3SETUP</command>, RFC ou SAPgui Start</title>

        <para>Se este erro for encontrado, o local correto est&aacute; 
	  faltando.  A nota 0171356 do &sap; lista os RPMs que precisam 
	  ser instalados (e.g. <filename>saplocales-1.0-3</filename>,
	  <filename>saposcheck-1.0-1</filename> para o RedHat 6.1).  Caso 
	  voc&ecirc; tenha ignorado todos os erros relacionados e 
	  e configurou o <literal>STATUS</literal> correspondente de 
	  <literal>ERROR</literal> para <literal>OK</literal> (em 
	  <filename>CENTRDB.R3S</filename>) e todas as vezes o <command>R3SETUP</command>
	  reclamou e simplesmente reiniciou o <command>R3SETUP</command>, o 
	  sistema <application>&sap;</application> n&atilde;o ser&aacute; 
	  configurado corretamente e incapaz de conectar-se a um sistema 
	  com <application>SAPgui</application>, mesmo que o sistema possa 
	  ser inicializado.  Tentar conectar com o antigo 
	  <application>SAPgui</application> para Linux retornou as 
	  seguintes mensagens:</para>

        <programlisting>Sat May 5 14:23:14 2001
*** ERROR => no valid userarea given [trgmsgo. 0401]
Sat May 5 14:23:22 2001
*** ERROR => ERROR NR 24 occured [trgmsgi. 0410]
*** ERROR => Error when generating text environment. [trgmsgi. 0435]
*** ERROR => function failed [trgmsgi. 0447]
*** ERROR => no socket operation allowed [trxio.c 3363]
Speicherzugriffsfehler</programlisting>

        <para>Este comportamento &eacute; devido ao <application>&sap.r3;</application> 
	  ser incapaz de determinar corretamente o local e tamb&eacute;m de 
	  n&atilde;o estar corretamente configurado (entradas faltando em 
	  algumas tabelas do banco de dados).  Para ser capaz de conectar ao 
	  <application>&sap;</application>, adicione as seguintes entradas ao 
	  arquivo <filename>DEFAULT.PFL</filename> (veja Nota 0043288):</para>

	<programlisting>abap/set_etct_env_at_new_mode = 0
install/collate/active = 0
rscp/TCP0B = TCP0B</programlisting>

        <para>Reinicie o Sistema <application>&sap;</application>.  Agora 
	  voc&ecirc; pode conectar-se ao sistema, embora a l&iacute;ngua 
	  espec&iacute;fica do pa&iacute;s n&atilde;o funcionar como 
	  esperado.  Ap&oacute;s corrigir as configura&ccedil;&otilde;es de 
	  pa&iacute;s (e oferecer os locais corretos), estas entradas 
          podem ser removidas de <filename>DEFAULT.PFL</filename> e o sistema 
	  <application>&sap;</application> pode ser reinicializado.</para>

      </sect3>

      <sect3 id="ora-00001">
	<title><errorcode>ORA-00001</errorcode></title>
	<para>Este erro ocorreu apenas com o 
	  <application>&oracle; 8.1.7</application> no FreeBSD&nbsp;4.5.
	  A raz&atilde;o foi que a base de dados <application>&oracle;</application> 
	  n&atilde;o inicializou corretamente e falhou, deixando 
	  sem&aacute;foros e mem&oacute;ria compartilhada no sistema.  A 
	  pr&oacute;xima tentativa de inicializar o banco de dados 
	  retornou o erro <errorcode>ORA-00001</errorcode>.</para>

	<para>Encontre-os com <command>ipcs -a</command> e remova-os 
	  com <command>ipcrm</command>.</para>
      </sect3>

      <sect3 id="ora-00445pmon">
	<title><errorcode>ORA-00445</errorcode> (Background Process PMON Did Not Start)</title>
	<para>Este erro aconteceu com o <application>&oracle; 8.1.7</application>.
	  Este erro &eacute; reportado se o banco de dados &eacute; 
	  inicializado com o <literal>script</literal> <command>startsap</command> 
	  (por exemplo <command>startsap_majestix_00</command>) como o usu&aacute;rio 
	  <username>prdadm</username>.</para>

	<para>Uma solu&ccedil;&atilde;o tempor&aacute;ria &eacute; 
	  inicializar o banco de dados com o usu&aacute;rio <username>oraprd</username> 
	  ao inv&eacute;s de <command>svrmgrl</command>:</para>

	<screen>&prompt.user; <userinput>svrmgrl</userinput>
SVRMGR&gt; <userinput>connect internal;</userinput>
SVRMGR&gt; <userinput>startup</userinput>;
SVRMGR&gt; <userinput>exit</userinput></screen>

      </sect3>

      <sect3 id="ora-12546">
        <title><errorcode>ORA-12546</errorcode> (Start Listener with Correct Permissions)</title>

        <para>Inicie o <application>&oracle;</application> <literal>listener</literal> 
          como o usu&aacute;rio <username>oraids</username> com os seguintes comandos:</para>

        <screen>&prompt.root; <userinput>umask 0; lsnrctl start</userinput></screen>

        <para>Caso contr&aacute;rio voc&ecirc; pode ter o erro 
	  <errorcode>ORA-12546</errorcode>, pois os <literal>sockets</literal> 
          n&atilde;o possuir&atilde;o as permiss&otilde;es corretas.  Veja a 
	  Nota &sap; 0072984.</para>
      </sect3>

      <sect3 id="ora-27102">
	<title><errorcode>ORA-27102</errorcode> (Out of Memory)</title>

	<para>Este erro aconteceu enquanto se tentava usar valores 
	  maiores que 1&nbsp;GB (1024x1024x1024) para <literal>MAXDSIZ</literal> 
	  e <literal>DFLDSIZ</literal>.  Adicionalmente, obtivemos o erro 
	  <errorname>Linux Error 12: Cannot allocate memory</errorname>.</para>
      </sect3>

      <sect3 id="dipgntabindind">
        <title>[DIPGNTAB_IND_IND] durante o <command>R3SETUP</command></title>

        <para>Em geral, veja Nota &sap; 0130581 (o passo <literal>DIPGNTAB</literal> 
	  do <command>R3SETUP</command> &eacute; terminado).  Durante instala&ccedil;&atilde;o 
	  espec&iacute;fica do IDES, por algumas raz&otilde;es o processo de 
	  instala&ccedil;&atilde;o n&atilde;o estava usando o nome 
	  apropriado do sistema <quote>IDS</quote> do <application>&sap;</application>>, 
	  mas estava usando uma <literal>string ""</literal>.  Isto leva a alguns 
	  pequenos problemas, pois os caminhos s&atilde;o gerados dinamicamente 
	  usando <replaceable>SID</replaceable> (IDES neste cas ).  Ent&atilde;o 
	  ao inv&eacute;s de acessar:</para>

        <programlisting>/usr/sap/IDS/SYS/...
/usr/sap/IDS/DVMGS00</programlisting>

        <para>os seguintes caminhos foram usados:</para>

        <programlisting>/usr/sap//SYS/...
/usr/sap/D00</programlisting>

        <para>Para continuar com a instala&ccedil;&atilde;o, 
	  criamos uma liga&ccedil;&atilde;o e um diret&oacute;rio adicional:</para>

        <screen>&prompt.root; <userinput>pwd</userinput>
/compat/linux/usr/sap
&prompt.root; <userinput>ls -l</userinput>
total 4
drwxr-xr-x 3  idsadm sapsys 512 May 5 11:20 D00
drwxr-x--x 5  idsadm sapsys 512 May 5 11:35 IDS
lrwxr-xr-x 1  root   sapsys 7 May 5 11:35 SYS -> IDS/SYS
drwxrwxr-x 2  idsadm sapsys 512 May 5 13:00 tmp
drwxrwxr-x 11 idsadm sapsys 512 May 4 14:20 trans</screen>
   
        <para>N&oacute;s tamb&eacute;m encontramos as notas &sap; (0029227 e 0008401) 
	descrevendo este comportamento.  N&atilde;o encontramos este tipo 
	de problema na instala&ccedil;&atilde;o do <application>&sap; 4.6C</application>.</para>
      </sect3>

      <sect3 id="rfcrswboiniindind">
        <title>[RFCRSWBOINI_IND_IND] durante o <command>R3SETUP</command></title>

	<para>Durante a instla&ccedil;&atilde;o do <application>&sap; 4.6C</application>,
          este error foi apenas o resultado de outro erro acontecido antes, durante 
	  a instala&ccedil;&atilde;o.  Neste caso, voc&ecirc; precisa olhar os 
	  arquivos de log correspondentes e corrigir o problema real.</para>

        <para>Se depois de olhar os arquivos de log, este erro for o correto 
	  (verifique as Notas &sap;), voc&ecirc; pode configurar o 
	  <literal>STATUS</literal> do passo problem&aacute;tico de 
	  <literal>ERROR</literal> para <literal>OK</literal> (arquivo 
	  <filename>CENTRDB.R3S</filename>) e reiniciar o <command>R3SETUP</command>.  
	  Ap&oacute;s a instala&ccedil;&atilde;o, voc&ecirc; tem que 
	  executar o relat&oacute;rio <literal>RSWBOINS</literal> da 
	  transa&ccedil;&atilde;o SE38.  Veja a Nota &sap;
	  0162266 para informa&ccedil;&otilde;es adicionais a respeito da fase 
	  <literal>RFCRSWBOINI</literal> e
	  <literal>RFCRADDBDIF</literal>.</para>
      </sect3>

      <sect3 id="rfcraddbdifindind">
        <title>[RFCRADDBDIF_IND_IND] durante o <command>R3SETUP</command></title>
	<para>Aqui as mesmas restri&ccedil;&otilde;es se aplicam: verifique  
	  os arquivos de log, este erro n&atilde;o &eacute; causado por 
	  problemas anteriores.</para>

        <para>Se voc&ecirc; puder confirmar que a Nota &sap; 0162266 se aplica, 
	  configure o <literal>STATUS</literal> do passo problem&aacute;tico de 
	  <literal>ERROR</literal> para <literal>OK</literal> (arquivo 
	  <filename>CENTRDB.R3S</filename>) e reinicie o <command>R3SETUP</command>.  
	  Ap&oacute;s a instala&ccedil;&atilde;o, voc&ecirc; tem que executar 
	  o relat&oacute;rio <literal>RADDBDIF</literal> da transa&ccedil;&atilde;o SE38.</para>
      </sect3>

      <sect3 id="sigactionsig31">
        <title><errorcode>sigaction sig31: File size limit exceeded</errorcode></title>

	<para>Este erro ocorreu durante a inicializa&ccedil;&atilde;o dos processos  
	  <emphasis>disp+work</emphasis> do <application>&sap;</application>.  Se 
	  inicializarmos o <application>&sap;</application> com o <literal>script</literal> 
	  <command>startsap</command>, ent&atilde;o os subprocessos s&atilde;o inicializados 
	  sem acoplamento e fazem o trabalho sujo de inicializar todos os outros processos 
	  do <application>&sap;</application>.  Como resultado, o <literal>script</literal> 
	  por si s&oacute; n&atilde;o reportar&aacute; nada se algo der errado.</para>

	<para>Para verificar se os processos do <application>&sap;</application> incializaram 
	  corretamente, voc&ecirc; tem que olhar a situa&ccedil;&atilde;o dos processos com 
	  <command>ps ax | grep <replaceable>SID</replaceable></command>, que lhe dar&aacute; 
	  uma lista de todos os processos <application>&oracle;</application> e 
	  <application>&sap;</application>. Se parecer que alguns processos est&atilde;o 
	  faltando ou se voc&ecirc; n&atilde;o conseguir conectar ao sistema 
	  <application>&sap;</application>, verifique os arquivos de log correspondentes, 
	  que podem ser encontrados em 
	  <filename>/usr/sap/<replaceable>SID</replaceable>/DVEBMGS<replaceable>nr</replaceable>/work/</filename>.
	  Os arquivos a serem verificados s&atilde;o <filename>dev_ms</filename> e 
	  <filename>dev_disp</filename>.</para>

	<para><quote>Signal 31</quote> acontece aqui se a quantidade de mem&oacute;ria 
	  compartilhada usada pelo <application>&oracle;</application> e pelo 
	  <application>&sap;</application> excederem o que foi definido no arquivo 
	  de configura&ccedil;&atilde;o de <foreignphrase>kernel</foreignphrase>, 
	  podendo ser resolvido usando-se um valor maior:</para>

        <programlisting># larger value for 46C production systems:
options SHMMAXPGS=393216
# smaller value sufficient for 46B:
#options SHMMAXPGS=262144</programlisting>
	  
      </sect3>

      <sect3 id="saposcolfails">
        <title>A inicializa&ccedil;&atilde;o do <command>saposcol</command> Falhou</title>
	<para>Existem alguns problemas com o programa <command>saposcol</command> (vers&atilde;o 4.6D).
	  O sistema <application>&sap;</application> est&aacute; usando o <command>saposcol</command> 
	  para colher dados sobre a performance do sistema.  Este programa n&atilde;o &eacute; 
	  necess&aacute;rio no uso do sistema <application>&sap;</application>, assim este 
	  problema pode ser considerado pequeno.  As vers&otilde;es antigas (4.6B)
	  funcionam, mas n&atilde;o colhem todos os dados (algumas chamadas 
	  retornar&atilde;o apenas 0, por exemplo o uso da CPU).</para>
      </sect3>
    </sect2>
  </sect1>

  <sect1 id="linuxemu-advanced">
    <title>T&oacute;picos Anva&ccedil;ados</title>

    <para>Se voc&ecirc; est&aacute; curioso para saber como a compatibilidade 
      bin&aacute;ria Linux funciona, esta &eacute; a se&ccedil;&atilde;o que 
      voc&ecirc; quer ler.  Muito do que se segue &eacute; pesadamente baseado 
      em um mensagem de correio escrita para &a.chat; por Terry Lambert 
      <email>tlambert@primenet.com</email> (Message ID:
      <literal>&lt;199906020108.SAA07001@usr09.primenet.com&gt;</literal>).</para>

    <sect2>
      <title>Como Funciona?</title>
      <indexterm><primary>execution class loader</primary></indexterm>

      <para>O FreeBSD possui uma abstra&ccedil;&atilde;o chamada 
	<quote>execution class loader</quote>.  Isto &eacute; uma 
	esp&eacute;cie de cunha na chamada de sistema &man.execve.2;.</para>

      <para>Acontece que o FreeBSD possui uma lista de carregadores, 
	ao inv&eacute;s de apenas um carregador que volta para o 
	carregador <literal>#!</literal> para executar qualquer interpretador 
	de linha de comando ou <literal>shell scripts</literal>.</para>

      <para>Historicamente, o &uacute;nico carregador na plataforma &unix; 
	que examinou o n&uacute;mero m&aacute;gico (geralmente os primeiros 
	4 ou 8 bytes do arquivo) para ver se era um bin&aacute;rio conhecido 
	do sistema, e se fosse, invocaria o carregador do bin&aacute;rio.</para>

      <para>Se n&atilde;o fosse o tipo de bin&aacute;rio para o sistema, o 
	&man.execve.2; retornaria uma falha, e o <foreignphrase>shell</foreignphrase> 
	tentaria execut&aacute;-lo como um comando.</para>

      <para>Assumiasse que o padr&atilde;o era <quote>qualquer que fosse o 
	shell</quote>.</para>

      <para>Mais tarde, um ajuste foi feito no &man.sh.1; para examinar os 
	dois primeiros caracteres, e se eles fossem <literal>:\n</literal>, 
	ent&atilde;o o <foreignphrase>shell</foreignphrase> &man.csh.1; seria 
	invocado (acreditamos a SCO foi a primeira a fazer este ajuste).</para>

      <para>O que o FreeBSD faz agora &eacute; ir &agrave; uma lista de 
	carregadores, com um carregador <literal>#!</literal> gen&eacute;rico 
	que sabe a respeito dos interpretadores como os caracteres que seguem 
	o pr&oacute;ximo espa&ccedil;o em branco pr&oacute;ximo ao&uacute;ltimo 
	caracter, seguidos de um retorno para 
	<filename>/bin/sh</filename>.</para>
      <indexterm><primary>ELF</primary></indexterm>

      <para>Para o suporte ABI pra Linux, o FreeBSD v&ecirc; o n&uacute;mero 
	m&aacute;gico como um bin&aacute;rio ELF (n&atilde;o faz 
	distin&ccedil;&atilde;o entre FreeBSD, &solaris;, Linux ou qualquer 
	outro SO que possui um tipo de imagem ELF, neste momento).</para>
      <indexterm><primary>Solaris</primary></indexterm>

      <para>O carregador ELF procura por uma <emphasis>marca</emphasis> 
	especializada, que &eacute; uma se&ccedil;&atilde;o de coment&aacute;rio 
	na imagem ELF, que n&atilde;o est&aacute; presente nos bin&aacute;rios 
	ELF do SVR4/&solaris;.</para>

      <para>Para que os bin&aacute;rios Linux funcionem, eles devem estar 
	<emphasis>marcados</emphasis> como tipo <literal>Linux</literal>
	de &man.brandelf.1;:</para>

      <screen>&prompt.root; <userinput>brandelf -t Linux file</userinput></screen>

      <para>Quando isto estiver feito, o carregador ELF ver&aacute; 
	a marca <literal>Linux</literal> no arquivo.</para>
      <indexterm>
        <primary>ELF</primary>
	<secondary>branding</secondary>
      </indexterm>

      <para>Quando o carregador ELF v&ecirc; uma marca <literal>Linux</literal>,
	ele substiui um ponteiro na estrutura do <literal>proc</literal>.
	Todas as chamadas de sistema indexadas atrav&eacute;s deste ponteiro 
	(em um sistema &unix; tradicional, que pode ser a estrutura de 
	<literal>array</literal> <literal>sysent[]</literal>, contendo as 
	chamadas de sistema).  Adicionalmente, o processo &eacute; marcado 
	para uma manipula&ccedil;&atilde;o especial do vetor para um 
	c&oacute;digo de sinal trampolim, e uma s&eacute;rie de outros 
	(pequenos) ajustes que s&atilde;o manipulados pelo m&oacute;dulo 
	<foreignphrase>kernel</foreignphrase> do Linux.</para>

      <para>O vetor de chamada Linux cont&eacute;m, entre outras coisas, 
	uma lista de entradas <literal>sysent[]</literal> as quais seus 
	endere&ccedil;os residem no m&oacute;dulo de <foreignphrase>
	kernel</foreignphrase>.</para>

      <para>Quando uma chamada de sistema &eacute; feita por um bin&aacute;rio 
	Linux, o c&oacute;digo de armadilha diferencia o ponteiro da fun&ccedil;&atilde;o 
	de chamada de sistema como estando fora da estrutura <literal>proc</literal>, 
	e pega os pontos de entrada de chamada de sistema Linux, e n&atilde;o 
	FreeBSD.</para>

      <para>Al&eacute;m disso, o modo Linux dinamicamente <emphasis>redireciona
	</emphasis> as procuras; que &eacute;, na verdade, o que a op&ccedil;&atilde;o 
	<option>union</option> faz para as montagens de sistema de arquivo 
	(<emphasis>n&atilde;o</emphasis> o tipo de sistema de arquivo 
	<literal>unionfs</literal>!).  Primeiro, uma tentativa &eacute; feita 
	no diret&oacute;rio <filename>/compat/linux/<replaceable>original-path</replaceable></filename>,
	<emphasis>ent&atilde;o</emphasis> se falhar, a procura &eacute; feita no 
	diret&oacute;rio <filename>/<replaceable>original-path</replaceable></filename>.
	Isto certifica que os bin&aacute;rios que requerem outros bin&aacute;rios 
	possam ser executados (e.g., o <foreignphrase>toolchain</foreignphrase> Linux 
	pode rodar sob o suporte ABI Linux).  Isto tamb&eacute;m significa que 
	os bin&aacute;rios Linux pode carregar e executar bin&aacute;rios FreeBSD, 
	se n&atilde;o bin&aacute;rios Linux correspondentes presentes, e que 
	e que voc&ecirc; possa colocar um comando &man.uname.1; na &aacute;rvore 
	do diret&oacute;rio <filename>/compat/linux</filename> para ter certeza 
	de que os bin&aacute;rios Linux n&atilde;o possam dizer que eles 
	n&atilde;o est&atilde;o rodando no Linux.</para>

      <para>Efetivamente, existe um <foreignphrase>kernel</foreignphrase> 
	Linux dentro no <foreignphrase>kernel</foreignphrase> do FreeBSD; 
	as mais variadas func&ccedil;&otilde;es internas que implementam 
	todos os servi&ccedil;os oferecidos pelo <foreignphrase>kernel</foreignphrase> 
	s&atilde;o id&ecirc;nticos de ambas as entradas das tabelas de 
	chamadas de sistema do FreeBSD, e as entradas das tabelas de 
	chamada do Linux: opera&ccedil;&otilde;es de sistema de arquivo, 
	opera&ccedil;&otilde;es de mem&oacute;ria virtual, entrega de 
	sinais, IPC do SystemV, etc&hellip; A &uacute;nica diferen&ccedil;a 
	&eacute; que os bin&aacute;rios do FreeBSD obt&eacute;m fun&ccedil;&otilde;es 
	<quote><emphasis>cola</emphasis></quote> FreeBSD e bin&aacute;rios Linux obt&eacute;m 
	fun&ccedil;&otilde;es <quote><emphasis>cola</emphasis></quote> Linux (SO's muito mais 
	antigos possuem suas pr&oacute;prias fun&ccedil;&otilde;es 
	<quote><emphasis>cola</emphasis></quote>: endere&ccedil;amento 
	de fun&ccedil;&otilde;es em uma estrutura <literal>array sysent[]</literal> 
	est&aacute;tica global, ao inv&eacute;s de endere&ccedil;amento de 
	fun&ccedil;&otilde;es n&atilde;o referenciadas de um ponteiro 
	dinamicamente incializado na estrutura <literal>proc</literal> 
	da realiza&ccedil;&atilde;o da chamada do processo).</para>

      <para>Qual &eacute; a ABI nativa do FreeBSD?  N&atilde;o importa.  
	Basicamente a &uacute;nica diferen&ccedil;a &eacute; que (atualmente; 
	isso pode ser facilmente modificado em uma vers&atilde;o futura, e 
	e provavelmente ser&aacute; depois disso) as fun&ccedil;&otilde;es 
	<quote><emphasis>cola</emphasis></quote> FreeBSD s&atilde;o 
	estaticamente ligadas no <foreignphrase>kernel</foreignphrase>, e 
	as fun&ccedil;&otilde;es <quote><emphasis>cola</emphasis></quote> 
	do Linux podem ser estaticamente ligadas, ou podem ser acessadas 
	atrav&eacute;s de um m&oacute;dulo de <foreignphrase>kernel</foreignphrase>.</para>

      <para>Sim, mas isso realmente &eacute; emula&ccedil;&atilde;o?  
	N&atilde;o.  &Eacute; uma implementa&ccedil;&atilde;o ABI.  
	N&atilde;o existe emulador envolvido (ou simulador, para 
	cortar a pr&oacute;xima quest&atilde;o).</para>

      <para>Ent&atilde;o por que &eacute; chamado de <quote>emula&ccedil;&atilde;o Linux</quote>?
	Para fazer com que seja dif&iacute;cil vender o FreeBSD! Verdade, 
	&eacute; porque a implementa&ccedil;&atilde;o hist&oacute;rica 
	foi feita numa &eacute;poca quando n&atilde;o havia outra palavra 
	al&eacute;m desta para descrever o que estava acontecendo; dizer 
	que o FreeBSD executava bin&aacute;rios Linux n&atilde;o era verdade, 
	se voc&ecirc; n&atilde;o compilou o c&oacute;digo ou carregou o 
	m&oacute;dulo, ent&atilde;o existia uma express&atilde;o para 
	descrever o que estava sendo executado&mdash;
	<quote>o emulador Linux</quote>.</para>
    </sect2>
  </sect1>
</chapter>

<!-- 
     Local Variables:
     mode: sgml
     sgml-declaration: "../chapter.decl"
     sgml-indent-data: t
     sgml-omittag: nil
     sgml-always-quote-attributes: t
     sgml-parent-document: ("../book.sgml" "part" "chapter")
     End:
-->

