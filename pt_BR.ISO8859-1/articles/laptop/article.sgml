<!DOCTYPE article PUBLIC "-//FreeBSD//DTD DocBook V4.1-Based Extension//EN" [
<!ENTITY % man PUBLIC "-//FreeBSD//ENTITIES DocBook Manual Page Entities//EN">
%man;

<!ENTITY % freebsd PUBLIC "-//FreeBSD//ENTITIES DocBook Miscellaneous FreeBSD Entities//EN">
%freebsd;

<!ENTITY % authors PUBLIC "-//FreeBSD//ENTITIES DocBook Author Entities//EN">
%authors;

<!ENTITY % mailing-lists PUBLIC "-//FreeBSD//ENTITIES DocBook Mailing List Entities//EN">
%mailing-lists;

<!ENTITY % trademarks PUBLIC "-//FreeBSD//ENTITIES DocBook Trademark Entities//EN">
%trademarks;
]>

<article>
  <articleinfo>
    <title>FreeBSD em Laptops</title>

    <pubdate>$FreeBSD: doc/en_US.ISO8859-1/articles/laptop/article.sgml,v 1.19 2003/09/14 11:29:06 simon Exp $</pubdate>

    <abstract>
      <para>FreeBSD trabalha bem em muitos laptops, com algumas
        advertências. Algumas questões específicas para rodar o
	&os; em laptops, relacionando diferentes requerimentos de
	hardwares de desktops, são discutidos abaixo.</para>
    </abstract>

    <legalnotice id="trademarks" role="trademarks">
      &tm-attrib.freebsd;
      &tm-attrib.linux;
      &tm-attrib.microsoft;
      &tm-attrib.xfree86;
      &tm-attrib.general;
    </legalnotice>
  </articleinfo>

    <para>FreeBSD é frequentemente utilizado como um sistema
      operacional para servidores, mas ele também trabalha bem em
      desktops, e se você quiser utilizá-lo em seu laptop você também
      poderá aproveitar todos os benefícios usuais: layout sistemático
      , de fácil administração e upgrading, o sistema ports/packages
      para adicionar software, e mais.  (Outros benefícios,
      como estabilidade, performance de rede, e performance dentro
      de um carregamento pesado, podem não ser tão óbvio em um laptop,
      claro.) Entretanto, instalando isto em laptops geralmente
      involve problemas nos quais não são encontrados em máquinas
      desktop e não são comummente discutidos (laptops, even more
      than desktops, are fine-tuned for &microsoft.windows;).  Este
      artigo aponta para discutir mais dessas questões.  Muitas
      pessoas têm também documentado suas experiências com &os;
      em modelos específicos de laptop em páginas da web na qual
      não fazem parte da documentação do &os;.  Você pode muito bem
      achar mais informações se digitar o nome do modelo do seu laptop
      e a palavra <quote>&os;</quote> num mecanismo de busca de sua
      escolha.  Adicionalmente este é um específico banco-de-dados
      on-line do &os; na qual aponta para pegar informações de
      edições do hardware com laptops,
      <ulink url="http://gerda.univie.ac.at/freebsd-laptops/">
      A lista de Compatibilidade de Laptop do FreeBSD</ulink>


    <para>Para comunicação com outros usuários do &os; em laptop ,
      verifique a lista &a.mobile.name;.</para>

  <sect1>
    <title>&xfree86;</title>

    <para>Versões recentes do <application>&xfree86;</application>
      trabalham com muitos adaptadores gráficos disponíveis em
      laptops nos dias de hoje. A aceleração pode não ser suportada,
      mas uma configuração genérica SVGA deve trabalhar.<para>

    <para>Verifique a documentação do seu laptop para a placa
      que você possui e verifique na documentação do
      <application>&xfree86;</application> ou na página <ulink
      url="http://www.xfree86.org/current/Status.html">Status de
      Drives para &xfree86;</ulink> para ver se ela é especificamente
      suportada.  Se não, use um dispositivo genérico (não vá para um
      nome que apenas pareça similar).  No <application>&xfree86;
      </application> versão 4, você pode tentar sua sorte
      com o comando <userinput>XFree86 -configure</userinput>
      que auto-detecta várias configurações.</para>

    <para>O problema geralmente &eacute; a configura&ccedil;&atilde;o do monitor.  Recursos
      comuns para <application>&xfree86;</application> t&ecirc;m seu foco em monitores CRT; getting a
      suitable modeline for an LCD display may be tricky.  You may
      be lucky and not need to specify a modeline, or just need to
      specify suitable <literal>HorizSync</literal> and <literal>VertRefresh</literal> ranges.  If that
      does not work, the best option is to check web resources
      devoted to configuring X on laptops (these are often
      Linux oriented sites but it does not matter because both systems
      use <application>&xfree86;</application>) and copy a modeline posted by someone for similar
      hardware.</para>

    <para>Muitos laptops v&ecirc;m com dois but&otilde;es on their pointing
      devices, which is rather problematic in X (since the middle
      button &eacute; comunmente usado para colar texto); vo&ecirc; pode mapear um
      clique esquerdo-direito simultâneo na configura&ccedil;&atilde;o do seu X para
      para servir como um clique do bot&atilde;o do meio with the line</para>

    <programlisting>
      Option "Emulate3Buttons"
    </programlisting>

    <para>in the <filename>XF86Config</filename> file in the <literal>InputDevice</literal>
      section (for <application>&xfree86;</application> version 4; for version 3, put just the line
      <literal>Emulate3Buttons</literal>, without the quotes, in the
      <literal>Pointer</literal> section.)</para>
  </sect1>

  <sect1>
    <title>Modems</title>
    <para>
      Laptops normalmente v&ecirc;m com modems internos (on-board).
      Unfortunately, this almost always means they are
      <quote>winmodems</quote> whose
      functionality is implemented in software, for which only &windows;
      drivers are normally available (though a few drivers are beginning
      to show up for other operating systems; for example, if your modem has a Lucent LT chipset it might be supported by the <filename role="package">comms/ltmdm</filename> port).  If that is the case, you
      need to buy an external modem: the most compact option is
      probably a PC Card (PCMCIA) modem, discussed below, but
      serial or USB modems may be cheaper.  Geralmente, modems
      normais (n&atilde;o-winmodems) devem trabalhar bem.
</para>

  </sect1>

  <sect1>
    <title>Dispositivos PCMCIA (PC Card)</title>

    <para>Muitos laptops v&ecirc;m com slots PCMCIA (tamb&eacute;m chamado PC Card)
      ; estes s&atilde;o bem suportados dentro do FreeBSD.  Olhe atrav&eacute;s
      das suas menssagens de boot-up (usando &man.dmesg.8;) e veja se esses foram
      detectados corretamente (eles podem aparecer como
      <devicename>pccard0</devicename>,
      <devicename>pccard1</devicename> etc on devices like
      <devicename>pcic0</devicename>).</para>

    <para>&os;&nbsp;4.X suporta 16-bit PCMCIA cards, e
      &os;&nbsp;5.X suporta ambos 16-bit and
      32-bit (<quote>CardBus</quote>) cards.   O banco de dados de cart&otilde;es suportados
      est&aacute; no arquivo <filename>/etc/defaults/pccard.conf</filename>.
      Olhe atrav&eacute;s disso, e de prefer&ecirc;ncia compre cart&otilde;es listados nele.  Cart&otilde;es n&atilde;o
      listados podem tamb&eacute;m trabalhar

como dispositivos <quote>gen&eacute;ricos</quote>: em
      particular muitos modems (16-bit) devem trabalhar bem, se ele
      n&atilde;o for um winmodem (these do exist even as PC Cards, so watch out).
      Se seu &eacute; reconhecido como um modem gen&eacute;rico, note que o
      arquivo default <filename>pccard.conf</filename> especifica um tempo delay de 10 segundos
      (to avoid freezes on certain modems); Isto may well be
      over-cautious for your modem, so you may want to play with it,
      reducing it or removing it totally.</para>

    <para>Some parts of <filename>pccard.conf</filename> may need
      editing.  Check the irq line, and be sure to remove any number
      already being used: in particular, if you have an on board sound
      card, remove irq 5 (otherwise you may experience hangs when you
      insert a card).  Check also the available memory slots; if your
      card is not being detected, try changing it to one of the other
      allowed values (listed in the manual page &man.pccardc.8;).
</para>

    <para>If it is not running already, start the &man.pccardd.8; daemon.
      (To enable it at boot time, add
      <programlisting>pccard_enable="YES"</programlisting> to
      <filename>/etc/rc.conf</filename>.)  Now your cards should be
      detected when you insert and remove them, and you should get
      log messages about new devices being enabled.</para>

    <para>There have been major changes to the pccard code
      (including ISA routing of interrupts, for machines where
      &os; is not able to use the PCI BIOS) before the &os;&nbsp;4.4
      release.  If you have problems, try upgrading your system.</para>

  </sect1>

  <sect1>

    <title>Gerenciamento de energia</title>

    <para>Unfortunately, this is not very reliably supported under
      FreeBSD.  If you are lucky, some functions may work reliably;
      or they may not work at all.</para>

    <para>Para tornar as coisas um pouco mais complexa, there are two existing
      standards for power management: APM e ACPI, o latter
      superseding the former and including more features, but also
      introducing more problems.</para>

    <para>Muitos laptops suportam ambos APM e ACPI (to a certain
      degree), outros somente suportam um deles, ent&atilde;o as chances que
      voc&ecirc; tem para experimentar with both of them to have reliable power
      management no seu laptop.</para>

    <note>
      <para>Voc&ecirc; n&atilde;o pode ter APM e ACPI habilitados ao mesmo tempo,
	mesmo se o seu laptop tenha suporte para ambos eles.</para>
    </note>

    <sect2>
      <title>APM</title>

      <para>The APM (Advanced Power Management) BIOS provides support
	for various power management features like standby, suspend,
	hibernation, CPU clock slow down etc.  and is available
	under &os;&nbsp;4.X and &os;&nbsp;5.X.</para>

      <para>To enable APM support, you can compile a kernel with power
	management support (<literal>device apm0</literal> on
	&os;&nbsp;4.X and <literal>device apm</literal> on
	&os;&nbsp;5.X).  A kernel module for APM is available under
	&os;&nbsp;5.X, to simply load the APM kernel module at boot
	add the line <literal>apm_load="YES"</literal> to
	<filename>/boot/loader.conf</filename>.</para>

      <para>On &os;&nbsp;5.X, you also have to set
	<literal>hint.apm.0.disabled="0"</literal> in
	<filename>/boot/device.hints</filename>.</para>

      <para>You can start APM at boot time by having
	<literal>apm_enable="YES"</literal> in
	<filename>/etc/rc.conf</filename>.  You may also want start
	the &man.apmd.8; daemon by adding
	<literal>apmd_enable="YES"</literal> to
	<filename>/etc/rc.conf</filename>, which takes care of
	various APM events that are posted to the BIOS, so you can
	have your laptop suspend/resume by pressing some function
	key on the keyboard or by closing/opening the lid.</para>

      <para>The APM commands are listed in the &man.apm.8; manual page.
	For instance, <command>apm -b</command> gives you battery
	status (or 255 if not supported), <command>apm -Z</command>
	puts the laptop on standby, <command>apm -z</command> (or
	<command>zzz</command>) suspends it.  To shutdown and power
	off the machine, use <command>shutdown -p</command>.  Again,
	some or all of these functions may not work very well or at
	all.</para>

      <para>You may find that laptop suspension/standby works in
	console mode but not under X (that is, the screen does not
	come on again); if you are running &os;&nbsp;5.X, one solution
	for this might be to put <literal>options
	SC_NO_SUSPEND_VTYSWITCH</literal>
	in your kernel configuration file and recompile your kernel.
	Another workaround is to switch to a virtual console (using
	<keycombo
	action="simul"><keycap>Ctrl</keycap><keycap>Alt</keycap><keycap>F1</keycap></keycombo>
	or another function key) and then execute &man.apm.8;.
	You can automate this with &man.vidcontrol.1;, if you are
	running &man.apmd.8;.  Simply edit
	<filename>/etc/apmd.conf</filename> and change it to
	this:</para>

      <programlisting>apm_event SUSPENDREQ {
 exec "vidcontrol -s 1 &lt; /dev/console";
 exec "/etc/rc.suspend";
}

apm_event USERSUSPENDREQ {
 exec "vidcontrol -s 1 &lt; /dev/console";
 exec "sync && sync && sync";
 exec "sleep 1";
 exec "apm -z";
}

apm_event NORMRESUME, STANDBYRESUME {
 exec "/etc/rc.resume";
 exec "vidcontrol -s 9 &lt; /dev/console";
}</programlisting>
    </sect2>

    <sect2>
      <title>ACPI</title>

      <para>ACPI (Advanced Configuration and Power Management
	Interface) provides not only power management but also
	platform hardware discovery (superseding PnP and PCI BIOS).
	ACPI is only available under &os;&nbsp;5.X and is enabled by
	default, so you do not have to do anything special to get it
	running.  You can control ACPI behaviour with
	&man.acpiconf.8;.</para>

      <para>Unfortunately, vendors often ship their laptops with
	broken ACPI implementations, thus having ACPI enabled
	sometimes causes more problems than being useful, up to the
	point that you cannot even boot &os; on some machines with
	ACPI enabled.</para>

      <para>If ACPI is causing problems, you might check if your
	laptop vendor has released a new BIOS version that fixes some
	bugs.  Since the &os; ACPI implementation is still very
	evolving code, you might also want to upgrade your system;
	chances are that your problems are fixed.</para>

      <para>If you want to disable ACPI simply add
	<literal>hint.acpi.0.disabled="1"</literal> to
	<filename>/boot/device.hints</filename>.  You can disable
	ACPI temporarily at the boot loader prompt by issueing
	<literal>unset acpi_load</literal> if you are having problems
	booting an ACPI enabled machine.  &os;&nbsp;5.1-RELEASE and
	later come with a boot-time menu that controls how &os; is
	booted.  One of the proposed options is to turn off ACPI.  So
	to disable ACPI just select <guimenuitem>2.  Boot &os; with ACPI
	disabled</guimenuitem> in the menu.</para>
    </sect2>

    <sect2>
      <title>Display de Gerenciamento de Energia</title>

    <para>O sistema X window (<application>&xfree86;</application>) tamb&eacute;m inclui um display de
      gerenciamento de energia (olhe na p&aacute;gina do manual &man.xset.1;, e procure por
      <quote>dpms</quote> nele).  Voc&ecirc; pode querer invertigar isso.  Entretanto,isso
      tamb&eacute;m trabalha inconsistentemente em laptops: isso
      geramlente desliga o display mas n&atilde;o desliga o
      backlight.</para>
    </sect2>

  </sect1>
</article>
